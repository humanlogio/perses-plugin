/*! For license information please see 2469.6a04640c.js.LICENSE.txt */
(self.webpackChunkHumanlog=self.webpackChunkHumanlog||[]).push([["2469"],{73808:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{GridItemContent:()=>tQ,DashboardContext:()=>W,VariableProviderWithQueryParams:()=>ry,DashboardStickyToolbar:()=>aH,Variable:()=>aV,Panel:()=>tX,ViewDashboard:()=>om,usePanel:()=>ec,AddGroupButton:()=>eM,PanelDrawer:()=>a4,GridContainer:()=>t0,usePanelActions:()=>ef,useVariableDefinitionActions:()=>rc,DeletePanelGroupDialog:()=>aK,createPanelDefinition:()=>V,useListVariableState:()=>aI,useVariableDefinitionAndState:()=>rd,useViewPanelGroup:()=>eS,usePanelGroupActions:()=>ei,useDashboardStore:()=>G,useViewPanel:()=>ew,useDashboard:()=>at,EditJsonDialog:()=>a0,DashboardDiscardChangesConfirmationDialog:()=>aX,PanelPluginLoader:()=>td,VariableList:()=>a$,EditJsonButton:()=>ao,VariableEditor:()=>r0,BuiltinVariableAccordions:()=>rX,usePanelGroupIds:()=>Q,useVariableDefinitions:()=>rp,useExternalVariableDefinitions:()=>rf,useEditJsonDialog:()=>eE,SaveChangesConfirmationDialog:()=>od,useEditMode:()=>J,DatasourceStoreProvider:()=>op,useDashboardActions:()=>K,usePanelGroupEditor:()=>el,useDeletePanelGroupDialog:()=>ed,VariableName:()=>r2,useDiscardChangesConfirmationDialog:()=>eP,QuerySummaryTable:()=>oa,useVariableDefinitionStoreCtx:()=>rl,EditVariablesButton:()=>r9,EditDatasourcesButton:()=>ai,generateId:()=>A,useSaveChangesConfirmationDialog:()=>eD,useVariableDefinitionStates:()=>ru,AddPanelButton:()=>eZ,DatasourceEditor:()=>an,DeletePanelDialog:()=>aW,usePanelGroup:()=>er,VariableListItem:()=>aN,useDashboardDuration:()=>ev,DashboardToolbar:()=>aB,GridLayout:()=>t2,VariableProvider:()=>rm,EmptyDashboard:()=>r4,Dashboard:()=>r7,GridTitle:()=>e4,DownloadButton:()=>ar,SaveDashboardButton:()=>as,PanelGroupDialog:()=>on,usePanelEditor:()=>eg,useListPanelGroups:()=>et,DashboardProvider:()=>q,PanelPreview:()=>a5,useDeletePanelDialog:()=>ey});var i=r(85893),a=r(96930),o=r(96346),s=r(20059);let l="Add panel",u="Add panel group",d="Edit datasources",c="Edit variables",p={whiteSpace:"nowrap",minWidth:"auto","& .MuiButton-startIcon":{marginRight:.5}},f="header-actions-container";var h=r(2388),g=r.n(h);let m=e=>{let t,r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,a={setState:n,getState:i,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(n,i,a);return a},y=e=>e?m(e):m;var b=r(52798);let{useDebugValue:v}=h,{useSyncExternalStoreWithSelector:x}=b,w=e=>e;function j(e,t=w,r){let n=x(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return v(n),n}let S=new Map,C=e=>{let t=S.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},D=(e,t={})=>(r,n,i)=>{let a,{enabled:o,anonymousActionType:s,store:l,...u}=t;try{a=(null==o||o)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!a)return o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(r,n,i);let{connection:d,...c}=((e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};let n=S.get(r.name);if(n)return{type:"tracked",store:e,...n};let i={connection:t.connect(r),stores:{}};return S.set(r.name,i),{type:"tracked",store:e,...i}})(l,a,u),p=!0;i.setState=(e,t,a)=>{let o=r(e,t);if(!p)return o;let c=void 0===a?{type:s||"anonymous"}:"string"==typeof a?{type:a}:a;return void 0===l?null==d||d.send(c,n()):null==d||d.send({...c,type:`${l}/${c.type}`},{...C(u.name),[l]:i.getState()}),o};let f=(...e)=>{let t=p;p=!1,r(...e),p=t},h=e(i.setState,n,i);if("untracked"===c.type?null==d||d.init(h):(c.stores[c.store]=i,null==d||d.init(Object.fromEntries(Object.entries(c.stores).map(([e,t])=>[e,e===c.store?h:t.getState()])))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){let e=!1,t=i.dispatch;i.dispatch=(...r)=>{"__setState"!==r[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...r)}}return d.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return O(e.payload,e=>{if("__setState"===e.type){if(void 0===l)return void f(e.state);1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let t=e.state[l];return void(null==t||JSON.stringify(i.getState())!==JSON.stringify(t)&&f(t))}i.dispatchFromDevtools&&"function"==typeof i.dispatch&&i.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(f(h),void 0===l)return null==d?void 0:d.init(i.getState());return null==d?void 0:d.init(C(u.name));case"COMMIT":if(void 0===l){null==d||d.init(i.getState());break}return null==d?void 0:d.init(C(u.name));case"ROLLBACK":return O(e.state,e=>{if(void 0===l){f(e),null==d||d.init(i.getState());return}f(e[l]),null==d||d.init(C(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return O(e.state,e=>{if(void 0===l)return void f(e);JSON.stringify(i.getState())!==JSON.stringify(e[l])&&f(e[l])});case"IMPORT_STATE":{let{nextLiftedState:r}=e.payload,n=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!n)return;void 0===l?f(n):f(n[l]),null==d||d.send(null,r);break}case"PAUSE_RECORDING":return p=!p}return}}),h},O=(e,t)=>{let r;try{r=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==r&&t(r)};var P=r(18241);let k=e=>(t,r,n)=>(n.setState=(e,r,...n)=>t("function"==typeof e?(0,P.Uy)(e):e,r,...n),e(n.setState,r,n));function E(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[r,n]of e)if(!Object.is(n,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var M=r(7212),R=r(7542),Z=r(89353);function A(){return void 0===globalThis.dashboardStoreId&&(globalThis.dashboardStoreId=0),globalThis.dashboardStoreId++}function V(e,t){return{kind:"Panel",spec:{display:{name:"",description:void 0},plugin:{kind:e??"",spec:t??{}},queries:[]}}}function I(e){let t={},r=[];for(let n of e){let e=[],i={};for(let t of n.spec.items){let r=A().toString();e.push({i:r,w:t.width,h:t.height,x:t.x,y:t.y}),i[r]=(0,Z.I4)(t.content)}let a=A();t[a]={id:a,isCollapsed:n.spec.display?.collapse?.open===!1,title:n.spec.display?.title,itemLayouts:e,itemPanelKeys:i},r.push(a)}return{panelGroups:t,panelGroupOrder:r}}function L(){return{id:A(),title:void 0,isCollapsed:!1,itemLayouts:[],itemPanelKeys:{}}}function z(e,t){e.panelGroups[t.id]=t,e.panelGroupOrder.unshift(t.id)}let _={sm:24,xxs:2};function T(e){let t=0;for(let r of e.itemLayouts){let e=r.y+r.h;e>t&&(t=e)}return t}function $({x:e,y:t,w:r,h:n}){return{x1:e,x2:e+r,y1:t,y2:t+n}}function N(e,t){let r=function(e){let t={};return Object.keys(e).forEach(e=>{let{name:r,number:n}=B(e);void 0===t[r]&&(t[r]=0);let i=t[r];"number"==typeof i&&n&&(t[r]=Math.max(i,n))}),t}(t),n=B(H(e)).name,i=r[n];return"number"==typeof i&&(n+=`-${i+1}`),n}let H=e=>e.replace(/\s+/g,"");function B(e){let t=e.match(/(.+)-([0-9]+)/);return t&&t[1]&&t[2]?{name:t[1],number:parseInt(t[2],10)}:{name:e}}let W=(0,h.createContext)(void 0);function G(e){let t=(0,h.useContext)(W);if(void 0===t)throw Error("No DashboardContext found. Did you forget a Provider?");return j(t,e,E)}function q(e){let t=(0,h.useCallback)(F,[e]),{defaultPluginKinds:r}=(0,R.usePluginRegistry)(),n=r?.Panel??"",{data:a}=(0,R.usePlugin)("Panel",n),[o]=(0,h.useState)(t(e));return(0,h.useEffect)(()=>{if(void 0===a)return;let e=a.createInitialOptions?a.createInitialOptions():{};o.setState({initialValues:{panelDefinition:V(n,e)}})},[a,o,n]),(0,i.jsx)(W.Provider,{value:o,children:e.children})}function F(e){let{initialState:{dashboardResource:t,isEditMode:r,viewPanelRef:n,setViewPanelRef:i}}=e,{kind:a,metadata:o,spec:{display:s,duration:l,refreshInterval:u=M.Q,datasources:d}}=t,c="ttl"in t.spec?t.spec.ttl:void 0,{spec:{layouts:p,panels:f}}=t;return p=p??[],f=f??{},y()(k(D((...e)=>{var t;let[h]=e;return{...(function(e){let{panelGroups:t,panelGroupOrder:r}=I(e);return e=>({panelGroups:t,panelGroupOrder:r,swapPanelGroups(t,r){e(e=>{if(t<0||t>=e.panelGroupOrder.length||r<0||r>=e.panelGroupOrder.length)throw Error("index out of bound");let n=e.panelGroupOrder[t],i=e.panelGroupOrder[r];if(void 0===n||void 0===i)throw Error("panel group is undefined");[e.panelGroupOrder[t],e.panelGroupOrder[r]]=[i,n]})},updatePanelGroupLayouts(t,r){e(e=>{let n=e.panelGroups[t];if(void 0===n)throw Error(`Cannot find panel group ${t}`);n.itemLayouts=r})}})})(p)(...e),...((e,t)=>({panelGroupEditor:void 0,openAddPanelGroup:()=>{let t={mode:"Add",initialValues:{title:"",isCollapsed:!1},applyChanges(t){let r=L();r.title=t.title,r.isCollapsed=t.isCollapsed,e(e=>{z(e,r)})},close(){e(e=>{e.panelGroupEditor=void 0})}};e(e=>{e.panelGroupEditor=t})},openEditPanelGroup:r=>{let n=t().panelGroups[r];if(void 0===n)throw Error(`Panel group with Id ${r} does not exist`);let i={mode:"Edit",initialValues:{title:n.title??"",isCollapsed:n.isCollapsed},applyChanges(t){e(e=>{let n=e.panelGroups[r];if(void 0===n)throw Error(`Panel group with Id ${r} does not exist`);n.title=t.title,n.isCollapsed=t.isCollapsed})},close(){e(e=>{e.panelGroupEditor=void 0})}};e(e=>{e.panelGroupEditor=i})}}))(...e),...((e,t)=>({deletePanelGroup(r){let{panelGroups:n,panelGroupOrder:i}=t(),a=n[r],o=i.findIndex(e=>e===r);if(void 0===a||-1===o)throw Error(`Panel group ${r} not found`);let s=Object.values(a.itemPanelKeys);e(e=>{delete e.panelGroups[r],e.panelGroupOrder.splice(o,1);let t=function(e){let t=new Set;for(let r of Object.values(e))for(let e of Object.values(r.itemPanelKeys))t.add(e);return t}(e.panelGroups);for(let r of s)t.has(r)||delete e.panels[r]})},openDeletePanelGroupDialog:r=>{let n=t().panelGroups[r];if(void 0===n)throw Error(`Panel group with Id ${r} not found`);e(e=>{e.deletePanelGroupDialog={panelGroupId:r,panelGroupName:n.title}})},closeDeletePanelGroupDialog:()=>e(e=>{e.deletePanelGroupDialog=void 0})}))(...e),...(t=f,()=>({panels:t}))(...e),...((e,t)=>({panelEditor:void 0,openEditPanel(r){let{panels:n,panelGroups:i}=t(),{panelGroupId:a,panelGroupItemLayoutId:o}=r,s=i[a]?.itemPanelKeys[o];if(void 0===s)throw Error(`Could not find Panel Group item ${r}`);let l=n[s];if(void 0===l)throw Error(`Cannot find Panel with key '${s}'`);let u={mode:"update",initialValues:{groupId:r.panelGroupId,panelDefinition:l},applyChanges:t=>{e(e=>{if(e.panels[s]=t.panelDefinition,t.groupId===a)return;let r=e.panelGroups[a];if(void 0===r)throw Error(`Missing panel group ${a}`);let n=r.itemLayouts.findIndex(e=>e.i===o),i=r.itemLayouts[n],l=r.itemPanelKeys[o];if(-1===n||void 0===i||void 0===l)throw Error(`Missing panel group item ${o}`);r.itemLayouts.splice(n,1),delete r.itemPanelKeys[o];let u=e.panelGroups[t.groupId];if(void 0===u)throw Error(`Could not find new group ${t.groupId}`);u.itemLayouts.push({i:i.i,x:0,y:T(u),w:i.w,h:i.h}),u.itemPanelKeys[i.i]=l})},close:()=>{e(e=>{e.panelEditor=void 0})}};e(e=>{e.panelEditor=u})},openAddPanel(r){let n;void 0===(r??=t().panelGroupOrder[0])&&((n=L()).title="Panel Group",r=n.id);let i={mode:"create",initialValues:{groupId:r,panelDefinition:t().initialValues?.panelDefinition??V()},applyChanges:r=>{let n=N(r.panelDefinition.spec.display.name,t().panels);e(e=>{e.panels[n]=r.panelDefinition;let t=e.panelGroups[r.groupId];if(void 0===t)throw Error(`Missing panel group ${r.groupId}`);let i={i:A().toString(),x:0,y:T(t),w:12,h:6};t.itemLayouts.push(i),t.itemPanelKeys[i.i]=n})},close:()=>{e(e=>{e.panelEditor=void 0})}};e(e=>{void 0!==n&&z(e,n),e.panelEditor=i})}}))(...e),...((e,t)=>({deletePanel(t){e(e=>{let{panelGroupId:r,panelGroupItemLayoutId:n}=t,i=e.panelGroups[r];if(void 0===i)throw Error(`Missing panel group ${r}`);let a=i.itemLayouts.findIndex(e=>e.i===n),o=i.itemPanelKeys[n];if(-1===a||void 0===o)throw Error(`Missing panel group item ${n}`);i.itemLayouts.splice(a,1),delete i.itemPanelKeys[n],!1===function(e,t){for(let r of Object.values(e))if(void 0!==Object.values(r.itemPanelKeys).find(e=>e===t))return!0;return!1}(e.panelGroups,o)&&delete e.panels[o]})},openDeletePanelDialog(r){let{panelGroupId:n,panelGroupItemLayoutId:i}=r,{panels:a,panelGroups:o}=t(),s=o[n];if(void 0===s)throw Error(`Panel group not found ${n}`);let l=s.itemPanelKeys[i];if(void 0===l)throw Error(`Could not find Panel Group item ${i}`);let u=a[l];if(void 0===u)throw Error(`Could not find panel ${l}`);e(e=>{e.deletePanelDialog={panelGroupItemId:r,panelName:u.spec.display.name,panelGroupName:s.title??""}})},closeDeletePanelDialog(){e(e=>{e.deletePanelDialog=void 0})}}))(...e),...(e=>({duplicatePanel(t){e(e=>{let r=e.panels,{panelGroupId:n,panelGroupItemLayoutId:i}=t,a=e.panelGroups[n];if(void 0===a)throw Error(`Missing panel group ${n}`);let o=a.itemPanelKeys[i];if(void 0===o)throw Error(`Could not find Panel Group item ${t}`);let s=r[o];if(void 0===s)throw Error(`Cannot find Panel with key '${o}'`);let l=a.itemLayouts.find(e=>e.i===i);if(void 0===l)throw Error(`Cannot find layout for Panel with key '${o}'`);let u=N(o,r);e.panels[u]=s;let d={i:A().toString(),w:l.w,h:l.h};a.itemLayouts=function(e,t,r){let n=_.sm,i=$(t),a=[],o=[],s=[];r.forEach(e=>{let t=$(e);t.y2<=i.y1?a.push(e):t.y1>=i.y2?s.push(e):o.push(e)}),o.sort((e,t)=>e.x-t.x);let l=o.findIndex(e=>e.i===t.i);if(l===o.length-1){if(i.x2+e.w<=n)return[...a,...o,{...e,x:i.x2,y:i.y1},...s]}else if(l>=0){let t=o[l+1];if(t&&$(t).x1-i.x2>=e.w)return o.splice(l+1,0,{...e,x:i.x2,y:i.y1}),[...a,...o,...s]}return[...a,...o,{x:i.x1,y:i.y2,...e},...s.map(t=>({...t,y:t.y+e.h}))]}(d,l,a.itemLayouts),a.itemPanelKeys[d.i]=u})}}))(...e),...((e,t)=>({viewPanel:{panelGroupItemId:void 0,panelRef:n},getViewPanel:()=>{var e,r,n;return e=t().panelGroups,r=t().viewPanel.panelGroupItemId,n=t().viewPanel.panelRef,r||(n?function(e,t){for(let r of Object.values(e)){let e=Object.entries(r.itemPanelKeys??[]).find(([e,r])=>r===t);if(e){let[t]=e;return{panelGroupId:r.id,panelGroupItemLayoutId:t}}}}(e,n):void 0)},setViewPanel(r){e(e=>{e.viewPanel={panelRef:void 0,panelGroupItemId:r};let n=function(e,t){if(!t)return;let r=e[t.panelGroupId];if(r)return r.itemPanelKeys[t.panelGroupItemLayoutId]}(t().panelGroups,r);i&&i(n)})}}))(...e),...(e=>({isOpen:!1,openDiscardChangesConfirmationDialog(t){e(e=>{e.discardChangesConfirmationDialog=t})},closeDiscardChangesConfirmationDialog(){e(e=>{e.discardChangesConfirmationDialog=void 0})}}))(...e),...(e=>({openEditJsonDialog(){e(e=>{e.editJsonDialog={isOpen:!0}})},closeEditJsonDialog(){e(e=>{e.editJsonDialog={isOpen:!1}})}}))(...e),...(e=>({isOpen:!1,openSaveChangesConfirmationDialog(t){e(e=>{e.saveChangesConfirmationDialog=t},!1,"openSaveChangesConfirmationDialog")},closeSaveChangesConfirmationDialog(){e(e=>{e.saveChangesConfirmationDialog=void 0},!1,"closeSaveChangesConfirmationDialog")}}))(...e),kind:a,metadata:o,display:s,duration:l,refreshInterval:u,datasources:d,ttl:c,isEditMode:!!r,setEditMode:e=>h({isEditMode:e}),setDashboard:({kind:e,metadata:t,spec:{display:r,panels:n={},layouts:i=[],duration:a,refreshInterval:o,datasources:s={}}})=>{h(l=>{l.kind=e,l.metadata=t,l.display=r,l.panels=n;let{panelGroups:u,panelGroupOrder:d}=I(i);l.panelGroups=u,l.panelGroupOrder=d,l.duration=a,l.refreshInterval=o??M.Q,l.datasources=s})}}})))}let U=({isEditMode:e,setEditMode:t})=>({isEditMode:e,setEditMode:t});function J(){return G(U)}let Y=({setDashboard:e,openAddPanelGroup:t,openAddPanel:r})=>({setDashboard:e,openAddPanelGroup:t,openAddPanel:r});function K(){let{setDashboard:e,openAddPanelGroup:t,openAddPanel:r}=G(Y);return{setDashboard:e,openAddPanelGroup:()=>t(),openAddPanel:()=>r()}}let X=e=>e.panelGroupOrder;function Q(){return G(X)}let ee=e=>e.panelGroups;function et(){let e=Q(),t=G(ee);return(0,h.useMemo)(()=>e.map(e=>{let r=t[e];if(void 0===r)throw Error(`Invalid panel group Id found ${e}`);return r}),[e,t])}function er(e){let t=G((0,h.useCallback)(t=>t.panelGroups[e],[e]));if(void 0===t)throw Error(`Panel group with Id ${e} was not found`);return t}let en=({openEditPanelGroup:e,deletePanelGroup:t,openAddPanel:r,updatePanelGroupLayouts:n})=>({openEditPanelGroup:e,deletePanelGroup:t,openAddPanel:r,updatePanelGroupLayouts:n});function ei(e){let{moveUp:t,moveDown:r}=function(e){let t=G((0,h.useCallback)(t=>t.panelGroupOrder.findIndex(t=>t===e),[e])),r=G(eo),n=G(ea);if(t<0)throw Error(`Could not find panel group with Id ${e} in order array`);return{moveUp:t>0?()=>n(t,t-1):void 0,moveDown:t<r-1?()=>n(t,t+1):void 0}}(e),{openEditPanelGroup:n,deletePanelGroup:i,openAddPanel:a,updatePanelGroupLayouts:o}=G(en);return{openEditPanelGroup:()=>n(e),deletePanelGroup:()=>i(e),openAddPanel:()=>a(e),moveUp:t,moveDown:r,updatePanelGroupLayouts:t=>o(e,t)}}let ea=e=>e.swapPanelGroups,eo=e=>e.panelGroupOrder.length,es=e=>e.panelGroupEditor;function el(){return G(es)}let eu=({deletePanelGroupDialog:e,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:r,deletePanelGroup:n})=>({deletePanelGroupDialog:e,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:r,deletePanelGroup:n});function ed(){let{deletePanelGroupDialog:e,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:r,deletePanelGroup:n}=G(eu);return{deletePanelGroupDialog:e,deletePanelGroup:n,openDeletePanelGroupDialog:t,closeDeletePanelGroupDialog:()=>r()}}function ec(e){let{panelGroupId:t,panelGroupItemLayoutId:r}=e,n=G((0,h.useCallback)(e=>{let n=e.panelGroups[t]?.itemPanelKeys[r];if(void 0!==n)return e.panels[n]},[t,r]));if(void 0===n)throw Error(`Could not find panel for Id ${e}`);return n}let ep=({openEditPanel:e,openDeletePanelDialog:t,duplicatePanel:r,setViewPanel:n})=>({openEditPanel:e,openDeletePanelDialog:t,duplicatePanel:r,setViewPanel:n});function ef(e){let{openEditPanel:t,openDeletePanelDialog:r,duplicatePanel:n,setViewPanel:i}=G(ep);return{openEditPanel:()=>t(e),openDeletePanelDialog:()=>r(e),duplicatePanel:()=>n(e),viewPanel:e=>i(e)}}let eh=e=>e.panelEditor;function eg(){return G(eh)}let em=({deletePanelDialog:e,deletePanel:t,closeDeletePanelDialog:r})=>({deletePanelDialog:e,deletePanel:t,closeDeletePanelDialog:r});function ey(){return G(em)}let eb=e=>e.duration;function ev(){return G(eb)}let ex=e=>({setViewPanel:e.setViewPanel,getViewPanel:e.getViewPanel,viewPanelId:e.getViewPanel()});function ew(){return G(ex)}let ej=e=>e.getViewPanel();function eS(){return G(ej)}let eC=({saveChangesConfirmationDialog:e,openSaveChangesConfirmationDialog:t,closeSaveChangesConfirmationDialog:r})=>({saveChangesConfirmationDialog:e,openSaveChangesConfirmationDialog:t,closeSaveChangesConfirmationDialog:r});function eD(){return G(eC)}let eO=({discardChangesConfirmationDialog:e,openDiscardChangesConfirmationDialog:t,closeDiscardChangesConfirmationDialog:r})=>({discardChangesConfirmationDialog:e,openDiscardChangesConfirmationDialog:t,closeDiscardChangesConfirmationDialog:r});function eP(){return G(eO)}let ek=({editJsonDialog:e,openEditJsonDialog:t,closeEditJsonDialog:r})=>({editJsonDialog:e,openEditJsonDialog:t,closeEditJsonDialog:r});function eE(){return G(ek)}let eM=()=>{let{openAddPanelGroup:e}=K();return(0,i.jsx)(s.InfoTooltip,{description:u,children:(0,i.jsx)(a.Z,{startIcon:(0,i.jsx)(o.default,{}),onClick:e,"aria-label":u,sx:p,children:"Panel Group"})})};var eR=r(65520);let eZ=({variant:e="text",color:t="primary",label:r="Panel",fullWidth:n})=>{let{openAddPanel:o}=K();return(0,i.jsx)(s.InfoTooltip,{description:l,children:(0,i.jsx)(a.Z,{startIcon:(0,i.jsx)(eR.default,{}),onClick:o,"aria-label":l,variant:e,color:t,fullWidth:n,sx:p,children:r})})};var eA=r(61460),eV=r(69968),eI=r(2734),eL=r(67026),ez=r(84882),e_=r(32559),eT=r(94780),e$=r(90948),eN=r(76158),eH=r(16504),eB=r(96067),eW=r(30577),eG=r(51705),eq=r(1588),eF=r(34867);function eU(e){return(0,eF.ZP)("MuiCollapse",e)}(0,eq.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);let eJ=(0,e$.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})((0,eN.Z)(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>"exited"===e.state&&!e.in&&"0px"===e.collapsedSize,style:{visibility:"hidden"}}]}))),eY=(0,e$.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),eK=(0,e$.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),eX=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiCollapse"}),{addEndListener:n,children:a,className:o,collapsedSize:s="0px",component:l,easing:u,in:d,onEnter:c,onEntered:p,onEntering:f,onExit:g,onExited:m,onExiting:y,orientation:b="vertical",style:v,timeout:x=eB.x9.standard,TransitionComponent:w=ez.ZP,...j}=r,S={...r,orientation:b,collapsedSize:s},C=(e=>{let{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,eT.Z)(n,eU,r)})(S),D=(0,eI.Z)(),O=(0,e_.Z)(),P=h.useRef(null),k=h.useRef(),E="number"==typeof s?`${s}px`:s,M="horizontal"===b,R=M?"width":"height",Z=h.useRef(null),A=(0,eG.Z)(t,Z),V=e=>t=>{if(e){let r=Z.current;void 0===t?e(r):e(r,t)}},I=()=>P.current?P.current[M?"clientWidth":"clientHeight"]:0,L=V((e,t)=>{P.current&&M&&(P.current.style.position="absolute"),e.style[R]=E,c&&c(e,t)}),z=V((e,t)=>{let r=I();P.current&&M&&(P.current.style.position="");let{duration:n,easing:i}=(0,eW.C)({style:v,timeout:x,easing:u},{mode:"enter"});if("auto"===x){let t=D.transitions.getAutoHeightDuration(r);e.style.transitionDuration=`${t}ms`,k.current=t}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[R]=`${r}px`,e.style.transitionTimingFunction=i,f&&f(e,t)}),_=V((e,t)=>{e.style[R]="auto",p&&p(e,t)}),T=V(e=>{e.style[R]=`${I()}px`,g&&g(e)}),$=V(m),N=V(e=>{let t=I(),{duration:r,easing:n}=(0,eW.C)({style:v,timeout:x,easing:u},{mode:"exit"});if("auto"===x){let r=D.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${r}ms`,k.current=r}else e.style.transitionDuration="string"==typeof r?r:`${r}ms`;e.style[R]=E,e.style.transitionTimingFunction=n,y&&y(e)});return(0,i.jsx)(w,{in:d,onEnter:L,onEntered:_,onEntering:z,onExit:T,onExited:$,onExiting:N,addEndListener:e=>{"auto"===x&&O.start(k.current||0,e),n&&n(Z.current,e)},nodeRef:Z,timeout:"auto"===x?null:x,...j,children:(e,{ownerState:t,...r})=>(0,i.jsx)(eJ,{as:l,className:(0,eL.Z)(C.root,o,{entered:C.entered,exited:!d&&"0px"===E&&C.hidden}[e]),style:{[M?"minWidth":"minHeight"]:E,...v},ref:A,ownerState:{...S,state:e},...r,children:(0,i.jsx)(eY,{ownerState:{...S,state:e},className:C.wrapper,ref:P,children:(0,i.jsx)(eK,{ownerState:{...S,state:e},className:C.wrapperInner,children:a})})})})});eX&&(eX.muiSupportAuto=!0);var eQ=r(23972),e0=r(19058),e1=r(26447),e2=r(22875),e9=r(5368),e3=r(3690),e5=r(26317),e6=r(78584),e8=r(83296);function e4(e){let t,r,n,a,o,{panelGroupId:l,title:u,collapse:d}=e,c=(0,R.useReplaceVariablesInString)(u),{openAddPanel:p,openEditPanelGroup:f,moveUp:h,moveDown:g}=ei(l),{openDeletePanelGroupDialog:m}=ed(),{isEditMode:y}=J(),b=(0,i.jsx)(eQ.Z,{variant:"h2",children:c});return(0,i.jsx)(eA.Z,{onClick:d?.onToggleOpen,sx:{display:"flex",justifyContent:"start",alignItems:"center",cursor:d?"pointer":"auto",backgroundColor:({palette:e})=>e.background.paper},"data-testid":"panel-group-header",children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e0.Z,{sx:{marginRight:1},"aria-label":`${d.isOpen?"collapse":"expand"} group ${c}`,children:d.isOpen?(0,i.jsx)(e2.default,{}):(0,i.jsx)(e9.default,{})}),b,y&&(0,i.jsxs)(e1.Z,{direction:"row",marginLeft:"auto",children:[(0,i.jsx)(s.InfoTooltip,{description:"Add panel to group",children:(0,i.jsx)(e0.Z,{"aria-label":(t=c,`add panel to group ${t}`),onClick:e=>{e.stopPropagation(),p()},children:(0,i.jsx)(eR.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Edit group",children:(0,i.jsx)(e0.Z,{"aria-label":(r=c,`edit group ${r}`),onClick:e=>{e.stopPropagation(),f()},children:(0,i.jsx)(e3.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Delete group",children:(0,i.jsx)(e0.Z,{"aria-label":(n=c,`delete group ${n}`),onClick:e=>{e.stopPropagation(),m(l)},children:(0,i.jsx)(e8.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Move group down",children:(0,i.jsx)(e0.Z,{"aria-label":(a=c,`move group ${a} down`),disabled:void 0===g,onClick:e=>{e.stopPropagation(),g?.()},children:(0,i.jsx)(e6.default,{})})}),(0,i.jsx)(s.InfoTooltip,{description:"Move group up",children:(0,i.jsx)(e0.Z,{"aria-label":(o=c,`move group ${o} up`),disabled:void 0===h,onClick:e=>{e.stopPropagation(),h?.()},children:(0,i.jsx)(e5.default,{})})})]})]}):b})}var e7=Object.defineProperty,te=new Map,tt=new WeakMap,tr=0,tn=void 0;h.Component;var ti=r(7430);function ta(e){return(0,eF.ZP)("MuiCardContent",e)}(0,eq.Z)("MuiCardContent",["root"]);let to=(0,e$.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),ts=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiCardContent"}),{className:n,component:a="div",...o}=r,s={...r,component:a},l=(e=>{let{classes:t}=e;return(0,eT.Z)({root:["root"]},ta,t)})(s);return(0,i.jsx)(to,{as:a,className:(0,eL.Z)(l.root,n),ownerState:s,ref:t,...o})});var tl=r(86388),tu=r(36363);function td(e){let{kind:t,spec:r,contentDimensions:n,definition:a,queryResults:o}=e,{data:s,isLoading:l}=(0,R.usePlugin)("Panel",t,{useErrorBoundary:!0}),u=s?.PanelComponent,d=s?.supportedQueryTypes||[];if(l)return(0,i.jsx)(tu.Z,{variant:"rectangular",width:n?.width,height:n?.height,"aria-label":"Loading..."});if(void 0===u)throw Error(`Missing PanelComponent from panel plugin for kind '${t}'`);for(let e of o)if(!d.includes(e.definition.kind))throw Error(`This panel does not support queries of type '${e.definition.kind}'. Supported query types: ${d.join(", ")}.`);return(0,i.jsx)(u,{spec:r,contentDimensions:n,definition:a,queryResults:o})}function tc(e){let{panelPluginKind:t,definition:r,queryResults:n,spec:a,contentDimensions:o}=e,{data:s,isLoading:l}=(0,R.usePlugin)("Panel",t,{useErrorBoundary:!0});if(l)return(0,i.jsx)(tu.Z,{variant:"rectangular",width:o?.width,height:o?.height,"aria-label":"Loading..."});let u=n.flatMap(e=>e.data?[{data:e.data,definition:e.definition}]:[]);if(u.length>0||0===n.length)return(0,i.jsx)(td,{kind:t,spec:a,contentDimensions:o,definition:r,queryResults:u});if(n.some(e=>e.isFetching))return(0,i.jsx)(tp,{plugin:s,spec:a,definition:r,contentDimensions:o});let d=n.find(e=>e.error);if(d)throw d.error;return(0,i.jsx)(tp,{plugin:s,spec:a,definition:r,contentDimensions:o})}function tp({plugin:e,spec:t,definition:r,contentDimensions:n}){return e?.LoadingComponent?(0,i.jsx)(e.LoadingComponent,{spec:t,contentDimensions:n,definition:r,queryResults:[]}):(0,i.jsx)(s.LoadingOverlay,{})}var tf=r(50716);function th(e){return(0,eF.ZP)("MuiCardHeader",e)}let tg=(0,eq.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var tm=r(80560);let ty=(0,e$.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{[`& .${tg.title}`]:t.title},{[`& .${tg.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),tb=(0,e$.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),tv=(0,e$.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),tx=(0,e$.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto",[`.${tf.Z.root}:where(& .${tg.title})`]:{display:"block"},[`.${tf.Z.root}:where(& .${tg.subheader})`]:{display:"block"}}),tw=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiCardHeader"}),{action:n,avatar:a,component:o="div",disableTypography:s=!1,subheader:l,subheaderTypographyProps:u,title:d,titleTypographyProps:c,slots:p={},slotProps:f={},...h}=r,g={...r,component:o,disableTypography:s},m=(e=>{let{classes:t}=e;return(0,eT.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},th,t)})(g),y={slots:p,slotProps:{title:c,subheader:u,...f}},b=d,[v,x]=(0,tm.Z)("title",{className:m.title,elementType:eQ.Z,externalForwardedProps:y,ownerState:g,additionalProps:{variant:a?"body2":"h5",component:"span"}});null==b||b.type===eQ.Z||s||(b=(0,i.jsx)(v,{...x,children:b}));let w=l,[j,S]=(0,tm.Z)("subheader",{className:m.subheader,elementType:eQ.Z,externalForwardedProps:y,ownerState:g,additionalProps:{variant:a?"body2":"body1",color:"textSecondary",component:"span"}});null==w||w.type===eQ.Z||s||(w=(0,i.jsx)(j,{...S,children:w}));let[C,D]=(0,tm.Z)("root",{ref:t,className:m.root,elementType:ty,externalForwardedProps:{...y,...h,component:o},ownerState:g}),[O,P]=(0,tm.Z)("avatar",{className:m.avatar,elementType:tb,externalForwardedProps:y,ownerState:g}),[k,E]=(0,tm.Z)("content",{className:m.content,elementType:tx,externalForwardedProps:y,ownerState:g}),[M,R]=(0,tm.Z)("action",{className:m.action,elementType:tv,externalForwardedProps:y,ownerState:g});return(0,i.jsxs)(C,{...D,children:[a&&(0,i.jsx)(O,{...P,children:a}),(0,i.jsxs)(k,{...E,children:[b,w]}),n&&(0,i.jsx)(M,{...R,children:n})]})});var tj=r(97571),tS=r(81666),tC=r(33460),tD=r(32977),tO=r(47612),tP=r(90738),tk=r(84022),tE=r(48075),tM=r(74496);let tR=(0,e$.ZP)(e0.Z)(({theme:e})=>({borderRadius:e.shape.borderRadius,padding:"4px"}));var tZ=r(37263),tA=r(13382),tV=r(9134),tI=r(64),tL=r(98216),tz=r(40902),t_=r(23400),tT=r(52936);let t$={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},tN=(0,e$.ZP)(eQ.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`underline${(0,tL.Z)(r.underline)}`],"button"===r.component&&t.button]}})((0,eN.Z)(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:t})=>"always"===e&&"inherit"!==t.color,style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter((0,tz.Z)()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:(0,tV.Fq)(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:(0,tV.Fq)(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:(0,tV.Fq)(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${t_.Z.focusVisible}`]:{outline:"auto"}}}]}))),tH=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiLink"}),n=(0,eI.Z)(),{className:a,color:o="primary",component:s="a",onBlur:l,onFocus:u,TypographyClasses:d,underline:c="always",variant:p="inherit",sx:f,...g}=r,[m,y]=h.useState(!1),b={...r,color:o,component:s,focusVisible:m,underline:c,variant:p},v=(e=>{let{classes:t,component:r,focusVisible:n,underline:i}=e,a={root:["root",`underline${(0,tL.Z)(i)}`,"button"===r&&"button",n&&"focusVisible"]};return(0,eT.Z)(a,t_.w,t)})(b);return(0,i.jsx)(tN,{color:o,className:(0,eL.Z)(v.root,a),classes:d,component:s,onBlur:e=>{(0,tI.Z)(e.target)||y(!1),l&&l(e)},onFocus:e=>{(0,tI.Z)(e.target)&&y(!0),u&&u(e)},ref:t,ownerState:b,variant:p,...g,sx:[...void 0===t$[o]?[{color:o}]:[],...Array.isArray(f)?f:[f]],style:{...g.style,..."always"===c&&"inherit"!==o&&!t$[o]&&{"--Link-underlineColor":(({theme:e,ownerState:t})=>{let r=t.color,n=(0,tT.DW)(e,`palette.${r}.main`,!1)||(0,tT.DW)(e,`palette.${r}`,!1)||t.color,i=(0,tT.DW)(e,`palette.${r}.mainChannel`)||(0,tT.DW)(e,`palette.${r}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:(0,tV.Fq)(n,.4)})({theme:n,ownerState:b})}}})});var tB=r(44939);function tW({links:e}){let[t,r]=(0,h.useState)(null);if(1===e.length&&e[0]){let t=e[0];return(0,i.jsx)(tG,{link:t})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:`${e.length} links`,enterDelay:100,children:(0,i.jsx)(e0.Z,{"aria-label":"Panel links",size:"small",onClick:e=>{r(e.currentTarget)},sx:e=>({borderRadius:e.shape.borderRadius,padding:"4px"}),children:(0,i.jsx)(tB.default,{"aria-describedby":"links-icon",fontSize:"inherit",sx:{color:e=>e.palette.text.secondary}})})}),(0,i.jsx)(tZ.Z,{anchorEl:t,open:!!t,onClose:()=>{r(null)},MenuListProps:{"aria-labelledby":"panel-links"},children:e.map(e=>(0,i.jsx)(tq,{link:e},e.url))})]})}function tG({link:e}){let{url:t,name:r,tooltip:n,targetBlank:a}=tF(e);return(0,i.jsx)(s.InfoTooltip,{description:n??t,enterDelay:100,children:(0,i.jsx)(e0.Z,{"aria-label":r??t,size:"small",href:t,target:a?"_blank":"_self",sx:e=>({borderRadius:e.shape.borderRadius,padding:"4px"}),children:(0,i.jsx)(tB.default,{fontSize:"inherit",sx:{color:e=>e.palette.text.secondary}})})})}function tq({link:e}){let{url:t,name:r,tooltip:n,targetBlank:a}=tF(e);return(0,i.jsx)(s.InfoTooltip,{description:n??t,enterDelay:100,children:(0,i.jsx)(tA.Z,{component:tH,href:t,target:a?"_blank":"_self",children:r??t})})}function tF(e){let t=(0,R.useReplaceVariablesInString)(e.url)??e.url,r=(0,R.useReplaceVariablesInString)(e.name),n=(0,R.useReplaceVariablesInString)(e.tooltip);return!1===e.renderVariables?e:{...e,url:t,name:r,tooltip:n}}let tU=(0,e$.ZP)(eA.Z)({display:"none",alignItems:"center",flexGrow:1,justifyContent:"flex-end"}),tJ=({editHandlers:e,readHandlers:t,extra:r,title:n,description:a,descriptionTooltipId:o,links:l,queryResults:u})=>{let d=(0,h.useMemo)(()=>{if(a&&a.trim().length>0)return(0,i.jsx)(s.InfoTooltip,{id:o,description:a,enterDelay:100,children:(0,i.jsx)(tR,{"aria-label":"panel description",size:"small",children:(0,i.jsx)(tM.default,{"aria-describedby":"info-tooltip","aria-hidden":!1,fontSize:"inherit",sx:{color:e=>e.palette.text.secondary}})})})},[o,a]),c=l&&l.length>0&&(0,i.jsx)(tW,{links:l}),p=void 0===e&&r,g=(0,h.useMemo)(()=>{let e=u.some(e=>e.data),t=u.some(e=>e.isFetching),r=u.filter(e=>e.error);if(t&&e)return(0,i.jsx)(tj.Z,{"aria-label":"loading",size:"1.125rem"});if(r.length>0){let e=r.map(e=>e.error).map(e=>e?.message??e?.toString()??"Unknown error").join("\n");return(0,i.jsx)(s.InfoTooltip,{description:e,children:(0,i.jsx)(tR,{"aria-label":"panel errors",size:"small",children:(0,i.jsx)(tE.default,{fontSize:"inherit"})})})}},[u]),m=(0,h.useMemo)(()=>{if(void 0!==t){let e;return(0,i.jsx)(s.InfoTooltip,{description:"Toggle View Mode",children:(0,i.jsx)(tR,{"aria-label":(e=n,`toggle panel ${e} view mode`),size:"small",onClick:t.onViewPanelClick,children:t.isPanelViewed?(0,i.jsx)(tC.default,{fontSize:"inherit"}):(0,i.jsx)(tD.default,{fontSize:"inherit"})})})}},[t,n]),y=(0,h.useMemo)(()=>{if(void 0!==e){let t,r,a;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:"Edit",children:(0,i.jsx)(tR,{"aria-label":(t=n,`edit panel ${t}`),size:"small",onClick:e.onEditPanelClick,children:(0,i.jsx)(e3.default,{fontSize:"inherit"})})}),(0,i.jsx)(s.InfoTooltip,{description:"Duplicate",children:(0,i.jsx)(tR,{"aria-label":(r=n,`duplicate panel ${r}`),size:"small",onClick:e.onDuplicatePanelClick,children:(0,i.jsx)(tP.default,{fontSize:"inherit",sx:{transform:"scale(0.925)"}})})}),(0,i.jsx)(s.InfoTooltip,{description:"Delete",children:(0,i.jsx)(tR,{"aria-label":(a=n,`delete panel ${a}`),size:"small",onClick:e.onDeletePanelClick,children:(0,i.jsx)(e8.default,{fontSize:"inherit"})})})]})}},[e,n]),b=(0,h.useMemo)(()=>{if(y&&!t?.isPanelViewed){let e;return(0,i.jsx)(s.InfoTooltip,{description:"Move",children:(0,i.jsx)(tR,{"aria-label":(e=n,`move panel ${e}`),size:"small",children:(0,i.jsx)(tO.default,{className:"drag-handle",sx:{cursor:"grab"},fontSize:"inherit"})})})}},[y,t,n]),v=(0,i.jsx)(eA.Z,{sx:{flexGrow:1}}),x=({children:r})=>void 0!==e||t?.isPanelViewed?(0,i.jsx)(i.Fragment,{children:r}):(0,i.jsx)(eA.Z,{sx:{display:"var(--panel-hover, none)"},children:r});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(tU,{sx:e=>({[e.containerQueries(f).between(0,170)]:{display:"flex"}}),children:[v,(0,i.jsxs)(x,{children:[(0,i.jsxs)(tY,{title:n,children:[d," ",c," ",g," ",p," ",m," ",y]}),b]})]}),(0,i.jsxs)(tU,{sx:e=>({[e.containerQueries(f).between(170,220)]:{display:"flex"}}),children:[(0,i.jsxs)(x,{children:[d," ",c]}),v," ",g,(0,i.jsxs)(x,{children:[p," ",m,(0,i.jsx)(tY,{title:n,children:y}),b]})]}),(0,i.jsxs)(tU,{sx:e=>({display:"flex",[e.containerQueries(f).down(220)]:{display:"none"}}),children:[(0,i.jsxs)(x,{children:[d," ",c]}),v," ",g,(0,i.jsxs)(x,{children:[p," ",m," ",y," ",b]})]})]})},tY=({children:e,title:t})=>{let r,[n,a]=(0,h.useState)();if(!((0,h.isValidElement)(e)||Array.isArray(e)&&e.some(h.isValidElement)))return;let o=()=>{a(void 0)},s=!!n,l=s?"actions-menu":void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tR,{className:"show-actions","aria-describedby":l,onClick:e=>{a(e.currentTarget.getBoundingClientRect())},"aria-label":(r=t,`show panel actions for ${r}`),size:"small",children:(0,i.jsx)(tk.default,{fontSize:"inherit"})}),(0,i.jsx)(tS.ZP,{id:l,open:s,anchorReference:"anchorPosition",anchorPosition:n,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)(e1.Z,{direction:"row",alignItems:"center",sx:{padding:1},onClick:o,children:e})})]})};function tK({id:e,title:t,description:r,links:n,queryResults:a,readHandlers:o,editHandlers:l,sx:u,extra:d,...c}){let p=`${e}-title`,h=`${e}-description`,g=(0,R.useReplaceVariablesInString)(t),m=(0,R.useReplaceVariablesInString)(r);return(0,i.jsx)(tw,{id:e,component:"header","aria-labelledby":p,"aria-describedby":h,disableTypography:!0,title:(0,i.jsxs)(e1.Z,{direction:"row",children:[(0,i.jsx)(eQ.Z,{id:p,variant:"subtitle1",sx:{lineHeight:"24px",minHeight:"26px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:g}),(0,i.jsx)(tJ,{title:g,description:m,descriptionTooltipId:h,links:n,queryResults:a,readHandlers:o,editHandlers:l,extra:d})]}),sx:(0,s.combineSx)(e=>({containerType:"inline-size",containerName:f,padding:e.spacing(1),borderBottom:`solid 1px ${e.palette.divider}`,".MuiCardHeader-content":{overflow:"hidden"}}),u),...c})}let tX=(0,h.memo)(function(e){let{definition:t,readHandlers:r,editHandlers:n,onMouseEnter:a,onMouseLeave:o,sx:l,panelOptions:u,panelGroupItemId:d,...c}=e,p=(0,s.useId)("Panel"),f=`${p}-header`,[g,m]=(0,h.useState)(null),{width:y,height:b}=(0,tl.default)({ref:g}),v=(0,h.useMemo)(()=>{if(void 0!==y&&void 0!==b)return{width:y,height:b}},[y,b]),x=(0,s.useChartsTheme)(),{queryResults:w}=(0,R.useDataQueriesContext)();return(0,i.jsxs)(ti.Z,{component:"section",sx:(0,s.combineSx)({width:"100%",height:"100%",display:"flex",flexFlow:"column nowrap",":hover":{"--panel-hover":"block"}},l),variant:"outlined",onMouseEnter:e=>{a?.(e)},onMouseLeave:e=>{o?.(e)},"aria-labelledby":f,"aria-describedby":f,"data-testid":"panel",...c,children:[!u?.hideHeader&&(0,i.jsx)(tK,{extra:u?.extra?.({panelDefinition:t,panelGroupItemId:d}),id:f,title:t.spec.display.name,description:t.spec.display.description,queryResults:w,readHandlers:r,editHandlers:n,links:t.spec.links,sx:{paddingX:`${x.container.padding.default}px`}}),(0,i.jsx)(ts,{component:"figure",sx:{position:"relative",overflow:"hidden",flexGrow:1,margin:0,padding:0,":last-child":{padding:0}},ref:m,children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,resetKeys:[t.spec,w],children:(0,i.jsx)(tc,{definition:t,panelPluginKind:t.spec.plugin.kind,spec:t.spec.plugin.spec,contentDimensions:v,queryResults:w})})})]})});function tQ(e){let t,{panelGroupItemId:r,width:n}=e,a=ec(r),{spec:{queries:o}}=a,{isEditMode:s}=J(),{openEditPanel:l,openDeletePanelDialog:u,duplicatePanel:d,viewPanel:c}=ef(r),p=eS(),{ref:f,inView:g}=function({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:i,triggerOnce:a,skip:o,initialInView:s,fallbackInView:l,onChange:u}={}){var d;let[c,p]=h.useState(null),f=h.useRef(u),[g,m]=h.useState({inView:!!s,entry:void 0});f.current=u,h.useEffect(()=>{let s;if(!o&&c)return s=function(e,t,r={},n=tn){if(void 0===window.IntersectionObserver&&void 0!==n){let i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}let{id:i,observer:a,elements:o}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var r;return`${t}_${"root"===t?!(r=e.root)?"0":(tt.has(r)||(tr+=1,tt.set(r,tr.toString())),tt.get(r)):e[t]}`}).toString(),r=te.get(t);if(!r){let n,i=new Map,a=new IntersectionObserver(t=>{t.forEach(t=>{var r;let a=t.isIntersecting&&n.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=a),null==(r=i.get(t.target))||r.forEach(e=>{e(a,t)})})},e);n=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:a,elements:i},te.set(t,r)}return r}(r),s=o.get(e)||[];return o.has(e)||o.set(e,s),s.push(t),a.observe(e),function(){s.splice(s.indexOf(t),1),0===s.length&&(o.delete(e),a.unobserve(e)),0===o.size&&(a.disconnect(),te.delete(i))}}(c,(e,t)=>{m({inView:e,entry:t}),f.current&&f.current(e,t),t.isIntersecting&&a&&s&&(s(),s=void 0)},{root:i,rootMargin:n,threshold:e,trackVisibility:r,delay:t},l),()=>{s&&s()}},[Array.isArray(e)?e.toString():e,c,i,n,a,o,r,l,t]);let y=null==(d=g.entry)?void 0:d.target,b=h.useRef(void 0);c||!y||a||o||b.current===y||(b.current=y,m({inView:!!s,entry:void 0}));let v=[p,g.inView,g.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}({threshold:.2,initialInView:!1,triggerOnce:!0}),m={isPanelViewed:p?.panelGroupId===r?.panelGroupId&&p?.panelGroupItemLayoutId===r?.panelGroupItemLayoutId,onViewPanelClick:function(){void 0===p?c(r):c(void 0)}};s&&(t={onEditPanelClick:l,onDuplicatePanelClick:d,onDeletePanelClick:u});let y=(0,R.useSuggestedStepMs)(n),{data:b}=(0,R.usePlugin)("Panel",a.spec.plugin.kind),v=(o??[]).map(e=>({kind:e.spec.plugin.kind,spec:e.spec.plugin.spec})),x="function"==typeof b?.queryOptions?b?.queryOptions(a.spec.plugin.spec):b?.queryOptions;return(0,i.jsx)(eA.Z,{ref:f,sx:{width:"100%",height:"100%"},children:(0,i.jsx)(R.DataQueriesProvider,{definitions:v,options:{suggestedStepMs:y,...x},queryOptions:{enabled:g},children:g&&(0,i.jsx)(tX,{definition:a,readHandlers:m,editHandlers:t,panelOptions:e.panelOptions,panelGroupItemId:r})})})}function t0(e){let[t,r]=(0,h.useState)(!0);return(0,h.useEffect)(()=>{t&&r(!1)},[t]),(0,i.jsx)(t1,{sx:[{"& + &":{marginTop:1},"& .react-grid-item.cssTransforms":{transitionProperty:t?"none":"transform"}},...Array.isArray(e.sx)?e.sx:[e.sx]],"data-testid":"panel-group",children:e.children})}let t1=(0,e$.ZP)("section")(({theme:e})=>({"& .react-grid-layout":{position:"relative",transition:"height 200ms ease"},"& .react-grid-item":{transition:"all 200ms ease",transitionProperty:"left, top"},"& .react-grid-item img":{pointerEvents:"none",userSelect:"none"},"& .react-grid-item.cssTransforms":{transitionProperty:"transform"},"& .react-grid-item.resizing":{zIndex:1,willChange:"width, height"},"& .react-grid-item.react-draggable-dragging":{transition:"none",zIndex:3,willChange:"transform"},"& .react-grid-item.dropping":{visibility:"hidden"},"& .react-grid-item.react-grid-placeholder":{background:e.palette.primary.main,opacity:.2,transitionDuration:"100ms",zIndex:2,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none"},"& .react-grid-item > .react-resizable-handle":{position:"absolute",width:"20px",height:"20px"},"& .react-grid-item > .react-resizable-handle::after":{content:'""',position:"absolute",right:"3px",bottom:"3px",width:"5px",height:"5px",borderRight:`2px solid ${e.palette.text.secondary}`,borderBottom:`2px solid ${e.palette.text.secondary}`},"& .react-resizable-hide > .react-resizable-handle":{display:"none"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-sw":{bottom:"0",left:"0",cursor:"sw-resize",transform:"rotate(90deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-se":{bottom:"0",right:"0",cursor:"se-resize"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-nw":{top:"0",left:"0",cursor:"nw-resize",transform:"rotate(180deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-ne":{top:"0",right:"0",cursor:"ne-resize",transform:"rotate(270deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-w, &.react-grid-item > .react-resizable-handle.react-resizable-handle-e":{top:"50%",marginTop:"-10px",cursor:"ew-resize"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-w":{left:"0",transform:"rotate(135deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-e":{right:"0",transform:"rotate(315deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-n, &.react-grid-item > .react-resizable-handle.react-resizable-handle-s":{left:"50%",marginLeft:"-10px",cursor:"ns-resize"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-n":{top:"0",transform:"rotate(225deg)"},"& .react-grid-item > .react-resizable-handle.react-resizable-handle-s":{bottom:"0",transform:"rotate(45deg)"},"& .react-resizable":{position:"relative"},"& .react-resizable-handle":{position:"absolute",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundOrigin:"content-box",boxSizing:"border-box",backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+')",backgroundPosition:"bottom right",padding:"0 3px 3px 0"},"& .react-resizable-handle-sw":{bottom:"0",left:"0",cursor:"sw-resize",transform:"rotate(90deg)"},"& .react-resizable-handle-se":{bottom:"0",right:"0",cursor:"se-resize"},"& .react-resizable-handle-nw":{top:"0",left:"0",cursor:"nw-resize",transform:"rotate(180deg)"},"& .react-resizable-handle-ne":{top:"0",right:"0",cursor:"ne-resize",transform:"rotate(270deg)"},"& .react-resizable-handle-w, .react-resizable-handle-e":{top:"50%",marginTop:"-10px",cursor:"ew-resize"},"& .react-resizable-handle-w":{left:"0",transform:"rotate(135deg)"},"& .react-resizable-handle-e":{right:"0",transform:"rotate(315deg)"},"& .react-resizable-handle-n, .react-resizable-handle-s":{left:"50%",marginLeft:"-10px",cursor:"ns-resize"},"& .react-resizable-handle-n":{top:"0",transform:"rotate(225deg)"},"& .react-resizable-handle-s":{bottom:"0",transform:"rotate(45deg)"}}));function t2(e){let{panelGroupId:t,panelOptions:r,panelFullHeight:n}=e,a=(0,eI.Z)(),o=er(t),{updatePanelGroupLayouts:l}=ei(t),[u,d]=(0,h.useState)(!o.isCollapsed),{isEditMode:c}=J(),[p,f]=(0,h.useState)(0),g=eS(),m=g?.panelGroupId===t,y=g?.panelGroupItemLayoutId;(0,h.useEffect)(()=>{m&&d(!0)},[m]);let b=void 0===g||m,v=(0,h.useMemo)(()=>y?o.itemLayouts.map(e=>e.i===y?{h:Math.round(((n??window.innerHeight)-48)/40),i:y,w:48,x:0,y:0}:e):o.itemLayouts,[o.itemLayouts,y,n]),x=(0,h.useMemo)(()=>(0,eV.WidthProvider)(eV.Responsive),[]);return(0,i.jsxs)(t0,{sx:{display:b?"block":"none",height:y?`${n}px`:"unset",overflow:y?"hidden":"unset"},children:[void 0!==o.title&&(0,i.jsx)(e4,{panelGroupId:t,title:o.title,collapse:void 0===o.isCollapsed?void 0:{isOpen:u,onToggleOpen:()=>d(e=>!e)}}),(0,i.jsx)(eX,{in:u,unmountOnExit:!0,appear:!1,"data-testid":"panel-group-content",children:(0,i.jsx)(x,{className:"layout",breakpoints:{sm:a.breakpoints.values.sm,xxs:0},cols:_,rowHeight:30,draggableHandle:".drag-handle",resizeHandles:["se"],isDraggable:c&&!m,isResizable:c&&!m,margin:[10,10],containerPadding:[0,10],layouts:{sm:v},onLayoutChange:(e,t)=>{let r=t.sm;r&&!m&&l(r)},onWidthChange:(e,t,r,n)=>{f((e-t[0]*(r-1)-2*n[0])/r)},allowOverlap:m,children:v.map(({i:e,w:n})=>(0,i.jsx)("div",{style:{display:void 0!==y?y===e?"unset":"none":"unset"},children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(tQ,{panelOptions:r,panelGroupItemId:{panelGroupId:t,panelGroupItemLayoutId:e},width:t9(n,p)})})},e))})})]})}let t9=(e,t)=>Number.isFinite(e)?Math.round(t*e+10*Math.max(0,e-1)):e,{useDebugValue:t3}=h,{useSyncExternalStoreWithSelector:t5}=b,t6=!1,t8=e=>e;function t4(e,t=t8,r){r&&!t6&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),t6=!0);let n=t5(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return t3(n),n}var t7=r(9213),re=r(93729);function rt(e,t){var r,n,i;let a={},o=[];return r=e,n=t,i=(e,t)=>{a[t]||(o.push(e),a[t]=!0)},r.forEach(e=>i(e,e.spec.name)),n.forEach(e=>e.definitions.forEach(t=>i(t,t.spec.name,e.source))),o}function rr(e,t){let r={value:null,loading:!1,overriding:!1,overridden:!1};switch(e.kind){case"TextVariable":r.value=t??e.spec.value;break;case"ListVariable":if(r.options=[],r.value=t??e.spec.defaultValue??null,r.options.length>0&&!r.value){let t=r.options[0]?.value??null;null!==t&&(r.value=e.spec.allowMultiple?[t]:t)}Array.isArray(r.value)&&1===r.value.length&&r.value[0]===t7.x&&(r.value=t7.x)}return r}function rn(e,t,r=[]){let n=new R.VariableStoreStateMap,i={};e.forEach(e=>{i[e.spec.name]=!0},{});let a={};return r.forEach(e=>{let r=e.source;e.definitions.forEach(e=>{let o=e.spec.name,s=t[o];n.set({source:r,name:o},{...rr(e,s||null),overridden:!!i[o]}),i[o]=!0,a[e.spec.name]=!0})},{}),e.forEach(e=>{let r=e.spec.name,i=t[r];n.set({name:r},{...rr(e,i||null),overriding:!!a[r]})}),i={},r.slice().reverse().forEach(e=>{let t=e.source;e.definitions.forEach(e=>{let r=e.spec.name,a=n.get({source:t,name:r});a&&(a.overriding=!!i[r]),i[r]=!0})}),n}var ri=r(11522);let ra="var-",ro={encode:function(e){return Array.isArray(e)?e.join(","):e},decode:e=>{if("string"==typeof e){if(!e)return null;let t=e.split(",");return 1===t.length?t[0]:t}return""}},rs=(0,h.createContext)(void 0);function rl(){let e=(0,h.useContext)(rs);if(!e)throw Error("VariableStoreContext not initialized");return e}function ru(e){return j(rl(),t=>{let r={};return(e??t.variableDefinitions.map(e=>e.spec.name)).forEach(e=>{let n=t.variableState.get({name:e});n&&!n.overridden&&(r[e]=n)}),t.externalVariableDefinitions.forEach(e=>{let n=e.source;e.definitions.forEach(e=>{let i=e.spec.name,a=t.variableState.get({name:i,source:n});a&&!a.overridden&&(r[i]=a)})}),r},(e,t)=>JSON.stringify(e)===JSON.stringify(t))}function rd(e,t){return t4(rl(),r=>({state:r.variableState.get({name:e,source:t}),definition:((t?r.externalVariableDefinitions.find(e=>e.source===t)?.definitions:r.variableDefinitions)||[]).find(t=>t.spec.name===e)}))}function rc(){return j(rl(),e=>({setVariableValue:e.setVariableValue,setVariableLoading:e.setVariableLoading,setVariableOptions:e.setVariableOptions,setVariableDefinitions:e.setVariableDefinitions,setVariableDefaultValues:e.setVariableDefaultValues,getSavedVariablesStatus:e.getSavedVariablesStatus}),E)}function rp(){return t4(rl(),e=>e.variableDefinitions)}function rf(){return t4(rl(),e=>e.externalVariableDefinitions)}function rh({children:e,builtinVariables:t}){let r=ru(),n=rp(),a=rf(),{absoluteTimeRange:o}=(0,R.useTimeRange)(),s=(0,h.useMemo)(()=>{let e={};return Object.keys(r).forEach(t=>{let i={...r[t]};if(i.value===t7.x){let e=rt(n,a).find(e=>e.spec.name===t);e?.kind==="ListVariable"&&e.spec.customAllValue?i.value=e.spec.customAllValue:i.value=i.options?.map(e=>e.value)??null}e[t]=i}),e},[r,n,a]),l=(0,h.useMemo)(()=>{let e=[{kind:"BuiltinVariable",spec:{name:"__from",value:()=>o.start.valueOf().toString(),source:"Dashboard",display:{name:"__from",description:"Start time of the current time range in unix millisecond epoch",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__to",value:()=>o.end.valueOf().toString(),source:"Dashboard",display:{name:"__to",description:"End time of the current time range in unix millisecond epoch",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__range",value:()=>(0,re.LU)((0,re.Gt)(o)),source:"Dashboard",display:{name:"__range",description:"The range for the current dashboard in human readable format",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__range_s",value:()=>((o.end.valueOf()-o.start.valueOf())/1e3).toString(),source:"Dashboard",display:{name:"__range_s",description:"The range for the current dashboard in second",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__range_ms",value:()=>(o.end.valueOf()-o.start.valueOf()).toString(),source:"Dashboard",display:{name:"__range_ms",description:"The range for the current dashboard in millisecond",hidden:!0}}}];return t?.forEach(t=>e.push(t)),e},[o,t]);return(0,i.jsx)(R.BuiltinVariableContext.Provider,{value:{variables:l},children:(0,i.jsx)(R.VariableContext.Provider,{value:{state:s},children:e})})}function rg({initialVariableDefinitions:e=[],externalVariableDefinitions:t=[],queryParams:r}){let n=function(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];n&&(t[r.replace(ra,"")]=n)}),t}(r?r[0]:{});return y()(D(k((i,a)=>({variableState:rn(e,n,t),variableDefinitions:e,externalVariableDefinitions:t,setVariableDefinitions(e){i(r=>{r.variableDefinitions=e,r.variableState=rn(e,n,t)},!1,"[Variables] setVariableDefinitions")},setVariableOptions(e,t,r){i(n=>{let i=n.variableState.get({name:e,source:r});i&&(i.options=t)},!1,"[Variables] setVariableOptions")},setVariableLoading(e,t,r){i(n=>{let i=n.variableState.get({name:e,source:r});i&&(i.loading=t)},!1,"[Variables] setVariableLoading")},setVariableValue:(e,t,n)=>i(i=>{let a=t,o=i.variableState.get({name:e,source:n});if(o){(Array.isArray(a)&&a.includes(t7.x)&&(a=a.at(-1)===t7.x?t7.x:a.filter(e=>e!==t7.x)),r)&&(0,r[1])({[`${ra}${e}`]:a});o.value=a}},!1,"[Variables] setVariableValue"),setVariableDefaultValues:()=>{let e=a().variableDefinitions,t=a().variableState,r=(0,P.Uy)(e,e=>{e.forEach((r,n)=>{let i=r.spec.name;if("ListVariable"===r.kind){let a=t.get({name:i});a?.value!==void 0&&(e[n]={kind:"ListVariable",spec:(0,P.Uy)(r.spec,e=>{e.defaultValue=a.value})})}else if("TextVariable"===r.kind){let a=t.get({name:i}),o="string"==typeof a?.value?a.value:"";a?.value!==void 0&&(e[n]={kind:"TextVariable",spec:(0,P.Uy)(r.spec,e=>{e.value=o})})}})});return i(e=>{e.variableDefinitions=r},!1,"[Variables] setVariableDefaultValues"),r},getSavedVariablesStatus:()=>(function(e,t){let r=!1,n=[];for(let i of e){let e=i.spec.name;if("ListVariable"===i.kind){let a=t.get({name:e});a?.value!==null&&a?.value!==i.spec.defaultValue&&(n.push(e),r=!0)}else if("TextVariable"===i.kind){let a=t.get({name:e}),o="string"==typeof a?.value?a.value:"";i.spec.value!==o&&(n.push(e),r=!0)}}return{isSavedVariableModified:r,modifiedVariableNames:n}})(a().variableDefinitions,a().variableState)}))))}function rm({children:e,initialVariableDefinitions:t=[],externalVariableDefinitions:r=[],builtinVariableDefinitions:n=[]}){let[a]=(0,h.useState)(()=>rg({initialVariableDefinitions:t,externalVariableDefinitions:r}));return(0,i.jsx)(rs.Provider,{value:a,children:(0,i.jsx)(rh,{builtinVariables:n,children:e})})}function ry({children:e,initialVariableDefinitions:t=[],externalVariableDefinitions:r=[],builtinVariableDefinitions:n=[]}){let a=function(e){let t={};return e.forEach(e=>{var r;t[r=e.spec.name,`${ra}${r}`]=ro}),(0,ri.useQueryParams)(t,{updateType:"replaceIn"})}(rt(t,r)),[o]=(0,h.useState)(()=>rg({initialVariableDefinitions:t,externalVariableDefinitions:r,queryParams:a}));return(0,i.jsx)(rs.Provider,{value:o,children:(0,i.jsx)(rh,{builtinVariables:n,children:e})})}var rb=r(87024),rv=r(89086),rx=r(47762),rw=r(85866),rj=r(56429),rS=r(58957),rC=r(46839),rD=r(46500);let rO=h.createContext({});var rP=r(49299);function rk(e){return(0,eF.ZP)("MuiAccordion",e)}let rE=(0,eq.Z)("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),rM=(0,e$.ZP)(rD.Z,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[{[`& .${rE.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})((0,eN.Z)(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${rE.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${rE.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}}),(0,eN.Z)(({theme:e})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${rE.expanded}`]:{margin:"16px 0"}}}]}))),rR=(0,e$.ZP)("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(e,t)=>t.heading})({all:"unset"}),rZ=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiAccordion"}),{children:n,className:a,defaultExpanded:o=!1,disabled:s=!1,disableGutters:l=!1,expanded:u,onChange:d,square:c=!1,slots:p={},slotProps:f={},TransitionComponent:g,TransitionProps:m,...y}=r,[b,v]=(0,rP.Z)({controlled:u,default:o,name:"Accordion",state:"expanded"}),x=h.useCallback(e=>{v(!b),d&&d(e,!b)},[b,d,v]),[w,...j]=h.Children.toArray(n),S=h.useMemo(()=>({expanded:b,disabled:s,disableGutters:l,toggle:x}),[b,s,l,x]),C={...r,square:c,disabled:s,disableGutters:l,expanded:b},D=(e=>{let{classes:t,square:r,expanded:n,disabled:i,disableGutters:a}=e;return(0,eT.Z)({root:["root",!r&&"rounded",n&&"expanded",i&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},rk,t)})(C),O={slots:{transition:g,...p},slotProps:{transition:m,...f}},[P,k]=(0,tm.Z)("root",{elementType:rM,externalForwardedProps:{...O,...y},className:(0,eL.Z)(D.root,a),shouldForwardComponentProp:!0,ownerState:C,ref:t,additionalProps:{square:c}}),[E,M]=(0,tm.Z)("heading",{elementType:rR,externalForwardedProps:O,className:D.heading,ownerState:C}),[R,Z]=(0,tm.Z)("transition",{elementType:eX,externalForwardedProps:O,ownerState:C});return(0,i.jsxs)(P,{...k,children:[(0,i.jsx)(E,{...M,children:(0,i.jsx)(rO.Provider,{value:S,children:w})}),(0,i.jsx)(R,{in:b,timeout:"auto",...Z,children:(0,i.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:D.region,children:j})})]})});var rA=r(5538);function rV(e){return(0,eF.ZP)("MuiAccordionSummary",e)}let rI=(0,eq.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),rL=(0,e$.ZP)(rA.Z,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,eN.Z)(({theme:e})=>{let t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${rI.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${rI.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${rI.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${rI.expanded}`]:{minHeight:64}}}]}})),rz=(0,e$.ZP)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,eN.Z)(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${rI.expanded}`]:{margin:"20px 0"}}}]}))),r_=(0,e$.ZP)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,eN.Z)(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${rI.expanded}`]:{transform:"rotate(180deg)"}}))),rT=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiAccordionSummary"}),{children:n,className:a,expandIcon:o,focusVisibleClassName:s,onClick:l,slots:u,slotProps:d,...c}=r,{disabled:p=!1,disableGutters:f,expanded:g,toggle:m}=h.useContext(rO),y={...r,expanded:g,disabled:p,disableGutters:f},b=(e=>{let{classes:t,expanded:r,disabled:n,disableGutters:i}=e;return(0,eT.Z)({root:["root",r&&"expanded",n&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},rV,t)})(y),v={slots:u,slotProps:d},[x,w]=(0,tm.Z)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,eL.Z)(b.root,a),elementType:rL,externalForwardedProps:{...v,...c},ownerState:y,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:p,"aria-expanded":g,focusVisibleClassName:(0,eL.Z)(b.focusVisible,s)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),m&&m(t),l&&l(t)}})}),[j,S]=(0,tm.Z)("content",{className:b.content,elementType:rz,externalForwardedProps:v,ownerState:y}),[C,D]=(0,tm.Z)("expandIconWrapper",{className:b.expandIconWrapper,elementType:r_,externalForwardedProps:v,ownerState:y});return(0,i.jsxs)(x,{...w,children:[(0,i.jsx)(j,{...S,children:n}),o&&(0,i.jsx)(C,{...D,children:o})]})});function r$(e){return(0,eF.ZP)("MuiAccordionDetails",e)}(0,eq.Z)("MuiAccordionDetails",["root"]);let rN=(0,e$.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,eN.Z)(({theme:e})=>({padding:e.spacing(1,2,2)}))),rH=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiAccordionDetails"}),{className:n,...a}=r,o=(e=>{let{classes:t}=e;return(0,eT.Z)({root:["root"]},r$,t)})(r);return(0,i.jsx)(rN,{className:(0,eL.Z)(o.root,n),ref:t,ownerState:r,...a})});var rB=r(21023),rW=r(84714),rG=r(65834);function rq(e){var t=(0,h.useState)(function(){return(0,P.vV)("function"==typeof e?e():e,!0)}),r=t[1];return[t[0],(0,h.useCallback)(function(e){r("function"==typeof e?(0,P.Uy)(e):(0,P.vV)(e))},[])]}var rF=r(22284),rU=r(83829),rJ=r(23706),rY=r(44417),rK=r(23246);function rX({builtinVariableDefinitions:e}){let t=(0,h.useMemo)(()=>{let t={};for(let r of e){let e=t[r.spec.source];if(e){e.push(r);continue}t[r.spec.source]=[r]}return t},[e]),r=(0,h.useMemo)(()=>{let e=[];for(let r in t)e.includes(r)||e.push(r);return e},[t]);return(0,i.jsx)(i.Fragment,{children:r.map(e=>(0,i.jsxs)(rZ,{sx:e=>({".MuiAccordionSummary-root":{backgroundColor:e.palette.background.lighter},".MuiAccordionDetails-root":{backgroundColor:e.palette.background.lighter}}),children:[(0,i.jsx)(rT,{expandIcon:(0,i.jsx)(rK.default,{}),"aria-controls":"builtin",id:"builtin",children:(0,i.jsx)(eQ.Z,{variant:"h2",children:(0,i.jsx)(s.InfoTooltip,{title:`${e} Built-in Variables`,description:"Variables computed during dashboard rendering.",children:(0,i.jsxs)("span",{children:[e," Built-in Variables"]})})})}),(0,i.jsx)(rH,{children:(0,i.jsx)(rv.Z,{children:(0,i.jsxs)(rx.Z,{sx:{minWidth:650},"aria-label":"table of external variables",children:[(0,i.jsx)(rw.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{children:"Name"}),(0,i.jsx)(rW.Z,{children:"Description"})]})}),(0,i.jsx)(rS.Z,{children:(t[e]??[]).map(t=>(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:t.spec.name}),(0,i.jsx)(rW.Z,{children:t.spec.display?.description??""})]},e+"-"+t.spec.name))})]})})})]},e))})}function rQ(e){return R.VARIABLE_TYPES.find(t=>t.kind===e)?.label}function r0(e){let[t,r]=rq(e.variableDefinitions),[n,o]=(0,h.useState)(null),[l,u]=(0,h.useState)("update"),d=e.externalVariableDefinitions,c=e.builtinVariableDefinitions,p=(0,h.useMemo)(()=>(function(e){let t=[],r=e.map(e=>e.spec.name),n=new Set(r);return r.length!==n.size&&t.push("Variable names must be unique"),{errors:t,isValid:0===t.length}})(t),[t]),[f]=(0,h.useMemo)(()=>[rn(t,{},d)],[d,t]),g="number"==typeof n&&t[n],{openDiscardChangesConfirmationDialog:m,closeDiscardChangesConfirmationDialog:y}=eP(),b=e=>{r(t=>{t.splice(e,1)})},v=(e,t)=>{r(r=>{if("up"===t){let t=r[e-1],n=r[e];0!==e&&t&&n&&(r[e-1]=n,r[e]=t)}else{let t=r[e+1],n=r[e];if(e===r.length-1||!t||!n)return;r[e+1]=n,r[e]=t}})};return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(R.ValidationProvider,{children:(0,i.jsx)(R.VariableEditorForm,{initialVariableDefinition:g,action:l,isDraft:!0,onActionChange:u,onSave:e=>{r(t=>{t[n]=e,o(null)})},onClose:()=>{"create"===l&&b(n),o(null)}})}),!g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.Z,{sx:{display:"flex",alignItems:"center",padding:e=>e.spacing(1,2),borderBottom:e=>`1px solid ${e.palette.divider}`},children:[(0,i.jsx)(eQ.Z,{variant:"h2",children:"Edit Dashboard Variables"}),(0,i.jsxs)(e1.Z,{direction:"row",spacing:1,marginLeft:"auto",children:[(0,i.jsx)(a.Z,{disabled:e.variableDefinitions===t||!p.isValid,variant:"contained",onClick:()=>{e.onChange(t)},children:"Apply"}),(0,i.jsx)(a.Z,{color:"secondary",variant:"outlined",onClick:()=>{JSON.stringify(e.variableDefinitions)!==JSON.stringify(t)?m({onDiscardChanges:()=>{y(),e.onCancel()},onCancel:()=>{y()},description:"You have unapplied changes. Are you sure you want to discard these changes? Changes cannot be recovered."}):e.onCancel()},children:"Cancel"})]})]}),(0,i.jsx)(eA.Z,{padding:2,sx:{overflowY:"scroll"},children:(0,i.jsxs)(e1.Z,{spacing:2,children:[(0,i.jsxs)(e1.Z,{spacing:2,children:[!p.isValid&&p.errors.map(e=>(0,i.jsx)(rb.Z,{severity:"error",children:e},e)),(0,i.jsx)(rv.Z,{children:(0,i.jsxs)(rx.Z,{sx:{minWidth:650},"aria-label":"table of variables",children:[(0,i.jsx)(rw.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(r1,{children:"Visibility"}),(0,i.jsx)(r1,{children:"Name"}),(0,i.jsx)(r1,{children:"Type"}),(0,i.jsx)(r1,{children:"Description"}),(0,i.jsx)(r1,{align:"right",children:"Actions"})]})}),(0,i.jsx)(rS.Z,{children:t.map((e,n)=>(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(r1,{component:"th",scope:"row",children:(0,i.jsx)(rC.Z,{checked:e.spec.display?.hidden!==!0,onChange:e=>{var t;t=e.target.checked,r(e=>{let r=e[n];r&&(r.spec.display||(r.spec.display={name:r.spec.name,hidden:!1}),r.spec.display.hidden=!1===t)})}})}),(0,i.jsx)(r1,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,i.jsx)(r2,{name:e.spec.name,state:f.get({name:e.spec.name})})}),(0,i.jsx)(r1,{children:rQ(e.kind)??e.kind}),(0,i.jsx)(r1,{children:e.spec.display?.description??""}),(0,i.jsxs)(r1,{align:"right",sx:{whiteSpace:"nowrap"},children:[(0,i.jsx)(e0.Z,{onClick:()=>v(n,"up"),disabled:0===n,children:(0,i.jsx)(e5.default,{})}),(0,i.jsx)(e0.Z,{onClick:()=>v(n,"down"),disabled:n===t.length-1,children:(0,i.jsx)(e6.default,{})}),(0,i.jsx)(e0.Z,{onClick:()=>{u("update"),o(n)},children:(0,i.jsx)(rF.default,{})}),(0,i.jsx)(e0.Z,{onClick:()=>b(n),children:(0,i.jsx)(rU.default,{})})]})]},e.spec.name))})]})}),(0,i.jsx)(eA.Z,{display:"flex",children:(0,i.jsx)(a.Z,{variant:"contained",startIcon:(0,i.jsx)(rG.default,{}),sx:{marginLeft:"auto"},onClick:()=>{u("create"),r(e=>{e.push({kind:"TextVariable",spec:{name:"NewVariable",value:""}})}),o(t.length)},children:"Add Variable"})})]}),d&&!d.every(e=>0===e.definitions.length)&&d.map((e,t)=>e.definitions.length>0&&(0,i.jsxs)(rZ,{sx:e=>({".MuiAccordionSummary-root":{backgroundColor:e.palette.background.lighter},".MuiAccordionDetails-root":{backgroundColor:e.palette.background.lighter}}),children:[(0,i.jsx)(rT,{expandIcon:(0,i.jsx)(rK.default,{}),"aria-controls":e.source,id:e.source,children:(0,i.jsx)(e1.Z,{flexDirection:"row",alignItems:"center",justifyContent:"start",children:(0,i.jsxs)(i.Fragment,{children:[e.tooltip?(0,i.jsx)(eQ.Z,{variant:"h2",children:(0,i.jsx)(s.InfoTooltip,{title:e.tooltip.title||"",description:e.tooltip.description||"",children:(0,i.jsxs)("span",{children:[(0,tL.Z)(e.source)," Variables"]})})}):(0,i.jsxs)(eQ.Z,{variant:"h2",children:[(0,tL.Z)(e.source)," Variables"]}),e.editLink&&(0,i.jsx)(e0.Z,{href:e.editLink,target:"_blank",children:(0,i.jsx)(rY.default,{fontSize:"small"})})]})})}),(0,i.jsx)(rH,{children:(0,i.jsx)(rv.Z,{children:(0,i.jsxs)(rx.Z,{sx:{minWidth:650},"aria-label":"table of external variables",children:[(0,i.jsx)(rw.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(r1,{children:"Visibility"}),(0,i.jsx)(r1,{children:"Name"}),(0,i.jsx)(r1,{children:"Type"}),(0,i.jsx)(r1,{children:"Description"}),(0,i.jsx)(r1,{align:"right",children:"Actions"})]})}),(0,i.jsx)(rS.Z,{children:e.definitions.map(t=>(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(r1,{component:"th",scope:"row",children:(0,i.jsx)(rC.Z,{checked:t.spec.display?.hidden!==!0,disabled:!0})}),(0,i.jsx)(r1,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:(0,i.jsx)(r2,{name:t.spec.name,state:f.get({name:t.spec.name,source:e.source})})}),(0,i.jsx)(r1,{children:rQ(t.kind)??t.kind}),(0,i.jsx)(r1,{children:t.spec.display?.description??""}),(0,i.jsxs)(r1,{align:"right",children:[(0,i.jsx)(rB.Z,{title:"Override",children:(0,i.jsx)(e0.Z,{onClick:()=>{r(e=>{e.push(t)})},disabled:!!f.get({name:t.spec.name}),children:(0,i.jsx)(rJ.default,{})})}),(0,i.jsx)(e0.Z,{disabled:!0,children:(0,i.jsx)(e5.default,{})}),(0,i.jsx)(e0.Z,{disabled:!0,children:(0,i.jsx)(e6.default,{})}),(0,i.jsx)(e0.Z,{disabled:!0,children:(0,i.jsx)(rF.default,{})}),(0,i.jsx)(e0.Z,{disabled:!0,children:(0,i.jsx)(rU.default,{})})]})]},t.spec.name))})]})})})]},t)),c&&(0,i.jsx)(rX,{builtinVariableDefinitions:c})]})})]})]})}let r1=(0,e$.ZP)(rW.Z)(({theme:e})=>({borderBottom:`solid 1px ${e.palette.divider}`}));function r2(e){let{name:t,state:r}=e;return(0,i.jsxs)(i.Fragment,{children:[!r?.overridden&&`${t} `,!r?.overridden&&r?.overriding&&(0,i.jsx)(eA.Z,{fontWeight:"normal",color:e=>e.palette.primary.main,children:"(overriding)"}),r?.overridden&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eA.Z,{color:e=>e.palette.grey[500],children:t}),(0,i.jsx)(eA.Z,{fontWeight:"normal",color:e=>e.palette.grey[500],children:"(overridden)"})]})]})}function r9({variant:e="text",label:t="Variables",color:r="primary",fullWidth:n}){let[o,l]=(0,h.useState)(!1),u=rp(),d=rf(),f=(0,R.useBuiltinVariableDefinitions)(),{setVariableDefinitions:g}=rc(),m=()=>{l(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:c,children:(0,i.jsx)(a.Z,{startIcon:(0,i.jsx)(e3.default,{}),onClick:()=>{l(!0)},"aria-label":c,variant:e,color:r,fullWidth:n,sx:p,children:t})}),(0,i.jsx)(s.Drawer,{isOpen:o,onClose:m,PaperProps:{sx:{width:"50%"}},"data-testid":"variable-editor",children:(0,i.jsx)(r0,{variableDefinitions:u,externalVariableDefinitions:d,builtinVariableDefinitions:f,onCancel:m,onChange:e=>{g(e),l(!1)}})})]})}let r3=({label:e="Edit",onClick:t})=>(0,i.jsx)(a.Z,{onClick:t,startIcon:(0,i.jsx)(e3.default,{}),variant:"outlined",color:"secondary",sx:{whiteSpace:"nowrap",minWidth:"auto"},children:e}),r5="Let's get started",r6={variant:"outlined",color:"secondary"},r8=({actions:e,isEditMode:t,onEditButtonClick:r})=>e&&"boolean"!=typeof e?e:!1===e?null:t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eZ,{variant:"outlined",color:"secondary",label:"Add Panel",fullWidth:!0}),(0,i.jsx)(r9,{variant:"outlined",color:"secondary",label:"Add Variables",fullWidth:!0})]}):r?(0,i.jsx)(r3,{...r6,label:"Edit Dashboard",onClick:r}):null,r4=({title:e=r5,image:t,description:r,additionalText:n,actions:a,onEditButtonClick:o})=>{let{isEditMode:s}=J(),l=s?"We currently support time series charts, gauge charts, stat charts and more!":"This dashboard is currently empty. Get started by clicking the edit button.",u=(0,i.jsx)(r8,{actions:a,onEditButtonClick:o,isEditMode:s});return(0,i.jsxs)(eA.Z,{sx:{width:"500px",textAlign:"center",margin:"0 auto"},children:[(0,i.jsxs)(eA.Z,{sx:{width:"289px",margin:"0 auto"},children:[!!t&&t,(0,i.jsx)(eQ.Z,{variant:"h2",gutterBottom:!0,children:e}),(0,i.jsx)(eQ.Z,{variant:"body1",children:r??l}),u&&(0,i.jsx)(eA.Z,{sx:{display:"flex",gap:2,marginTop:1,justifyContent:"center"},children:u})]}),n&&(0,i.jsx)(eQ.Z,{variant:"subtitle1",sx:{marginTop:12},children:n})]})};function r7({emptyDashboardProps:e,panelOptions:t,...r}){let n=Q(),a=(0,h.useRef)(null),o=!n.length,l=a.current?.getBoundingClientRect().top??165,u=window.innerHeight-l-window.scrollY;return(0,i.jsx)(eA.Z,{...r,sx:{height:"100%"},ref:a,children:(0,i.jsxs)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:[o&&(0,i.jsx)(eA.Z,{sx:{height:"100%",display:"flex",alignItems:"center"},children:(0,i.jsx)(r4,{...e})}),!o&&n.map(e=>(0,i.jsx)(t2,{panelGroupId:e,panelOptions:t,panelFullHeight:u},e))]})})}var ne=r(73501),nt=r(7982),nr=r(97354),nn=r(7434);let ni=Symbol.for("yaml.alias"),na=Symbol.for("yaml.document"),no=Symbol.for("yaml.map"),ns=Symbol.for("yaml.pair"),nl=Symbol.for("yaml.scalar"),nu=Symbol.for("yaml.seq"),nd=Symbol.for("yaml.node.type"),nc=e=>!!e&&"object"==typeof e&&e[nd]===ni,np=e=>!!e&&"object"==typeof e&&e[nd]===na,nf=e=>!!e&&"object"==typeof e&&e[nd]===no,nh=e=>!!e&&"object"==typeof e&&e[nd]===ns,ng=e=>!!e&&"object"==typeof e&&e[nd]===nl,nm=e=>!!e&&"object"==typeof e&&e[nd]===nu;function ny(e){if(e&&"object"==typeof e)switch(e[nd]){case no:case nu:return!0}return!1}function nb(e){if(e&&"object"==typeof e)switch(e[nd]){case ni:case no:case nl:case nu:return!0}return!1}let nv=e=>(ng(e)||ny(e))&&!!e.anchor,nx=Symbol("break visit"),nw=Symbol("skip children"),nj=Symbol("remove node");function nS(e,t){let r=nP(t);np(e)?nC(null,e.contents,r,Object.freeze([e]))===nj&&(e.contents=null):nC(null,e,r,Object.freeze([]))}function nC(e,t,r,n){let i=nk(e,t,r,n);if(nb(i)||nh(i))return nE(e,n,i),nC(e,i,r,n);if("symbol"!=typeof i){if(ny(t)){n=Object.freeze(n.concat(t));for(let e=0;e<t.items.length;++e){let i=nC(e,t.items[e],r,n);if("number"==typeof i)e=i-1;else{if(i===nx)return nx;i===nj&&(t.items.splice(e,1),e-=1)}}}else if(nh(t)){n=Object.freeze(n.concat(t));let e=nC("key",t.key,r,n);if(e===nx)return nx;e===nj&&(t.key=null);let i=nC("value",t.value,r,n);if(i===nx)return nx;i===nj&&(t.value=null)}}return i}async function nD(e,t){let r=nP(t);np(e)?await nO(null,e.contents,r,Object.freeze([e]))===nj&&(e.contents=null):await nO(null,e,r,Object.freeze([]))}async function nO(e,t,r,n){let i=await nk(e,t,r,n);if(nb(i)||nh(i))return nE(e,n,i),nO(e,i,r,n);if("symbol"!=typeof i){if(ny(t)){n=Object.freeze(n.concat(t));for(let e=0;e<t.items.length;++e){let i=await nO(e,t.items[e],r,n);if("number"==typeof i)e=i-1;else{if(i===nx)return nx;i===nj&&(t.items.splice(e,1),e-=1)}}}else if(nh(t)){n=Object.freeze(n.concat(t));let e=await nO("key",t.key,r,n);if(e===nx)return nx;e===nj&&(t.key=null);let i=await nO("value",t.value,r,n);if(i===nx)return nx;i===nj&&(t.value=null)}}return i}function nP(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function nk(e,t,r,n){return"function"==typeof r?r(e,t,n):nf(t)?r.Map?.(e,t,n):nm(t)?r.Seq?.(e,t,n):nh(t)?r.Pair?.(e,t,n):ng(t)?r.Scalar?.(e,t,n):nc(t)?r.Alias?.(e,t,n):void 0}function nE(e,t,r){let n=t[t.length-1];if(ny(n))n.items[e]=r;else if(nh(n))"key"===e?n.key=r:n.value=r;else if(np(n))n.contents=r;else{let e=nc(n)?"alias":"scalar";throw Error(`Cannot replace node with ${e} parent`)}}nS.BREAK=nx,nS.SKIP=nw,nS.REMOVE=nj,nD.BREAK=nx,nD.SKIP=nw,nD.REMOVE=nj;let nM={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},nR=e=>e.replace(/[!,[\]{}]/g,e=>nM[e]);class nZ{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},nZ.defaultYaml,e),this.tags=Object.assign({},nZ.defaultTags,t)}clone(){let e=new nZ(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new nZ(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:nZ.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},nZ.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:nZ.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},nZ.defaultTags),this.atNextDocument=!1);let r=e.trim().split(/[ \t]+/),n=r.shift();switch(n){case"%TAG":{if(2!==r.length&&(t(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;let[e,n]=r;return this.tags[e]=n,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==r.length)return t(0,"%YAML directive should contain exactly one part"),!1;let[e]=r;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;{let r=/^\d+\.\d+$/.test(e);return t(6,`Unsupported YAML version ${e}`,r),!1}}default:return t(0,`Unknown directive ${n}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){let r=e.slice(2,-1);return"!"===r||"!!"===r?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),r)}let[,r,n]=e.match(/^(.*!)([^!]*)$/s);n||t(`The ${e} tag has no suffix`);let i=this.tags[r];if(i)try{return i+decodeURIComponent(n)}catch(e){return t(String(e)),null}return"!"===r?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[t,r]of Object.entries(this.tags))if(e.startsWith(r))return t+nR(e.substring(r.length));return"!"===e[0]?e:`!<${e}>`}toString(e){let t,r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);if(e&&n.length>0&&nb(e.contents)){let r={};nS(e.contents,(e,t)=>{nb(t)&&t.tag&&(r[t.tag]=!0)}),t=Object.keys(r)}else t=[];for(let[i,a]of n)("!!"!==i||"tag:yaml.org,2002:"!==a)&&(!e||t.some(e=>e.startsWith(a)))&&r.push(`%TAG ${i} ${a}`);return r.join("\n")}}function nA(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let t=JSON.stringify(e);throw Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function nV(e){let t=new Set;return nS(e,{Value(e,r){r.anchor&&t.add(r.anchor)}}),t}function nI(e,t){for(let r=1;;++r){let n=`${e}${r}`;if(!t.has(n))return n}}function nL(e,t,r,n){if(n&&"object"==typeof n)if(Array.isArray(n))for(let t=0,r=n.length;t<r;++t){let r=n[t],i=nL(e,n,String(t),r);void 0===i?delete n[t]:i!==r&&(n[t]=i)}else if(n instanceof Map)for(let t of Array.from(n.keys())){let r=n.get(t),i=nL(e,n,t,r);void 0===i?n.delete(t):i!==r&&n.set(t,i)}else if(n instanceof Set)for(let t of Array.from(n)){let r=nL(e,n,t,t);void 0===r?n.delete(t):r!==t&&(n.delete(t),n.add(r))}else for(let[t,r]of Object.entries(n)){let i=nL(e,n,t,r);void 0===i?delete n[t]:i!==r&&(n[t]=i)}return e.call(t,r,n)}function nz(e,t,r){if(Array.isArray(e))return e.map((e,t)=>nz(e,String(t),r));if(e&&"function"==typeof e.toJSON){if(!r||!nv(e))return e.toJSON(t,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(e,n),r.onCreate=e=>{n.res=e,delete r.onCreate};let i=e.toJSON(t,r);return r.onCreate&&r.onCreate(i),i}return"bigint"!=typeof e||r?.keep?e:Number(e)}nZ.defaultYaml={explicit:!1,version:"1.2"},nZ.defaultTags={"!!":"tag:yaml.org,2002:"};class n_{constructor(e){Object.defineProperty(this,nd,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:r,onAnchor:n,reviver:i}={}){if(!np(e))throw TypeError("A document argument is required");let a={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},o=nz(this,"",a);if("function"==typeof n)for(let{count:e,res:t}of a.anchors.values())n(t,e);return"function"==typeof i?nL(i,{"":o},"",o):o}}class nT extends n_{constructor(e){super(ni),this.source=e,Object.defineProperty(this,"tag",{set(){throw Error("Alias nodes cannot have tags")}})}resolve(e,t){let r,n;for(let i of(t?.aliasResolveCache?r=t.aliasResolveCache:(r=[],nS(e,{Node:(e,t)=>{(nc(t)||nv(t))&&r.push(t)}}),t&&(t.aliasResolveCache=r)),r)){if(i===this)break;i.anchor===this.source&&(n=i)}return n}toJSON(e,t){if(!t)return{source:this.source};let{anchors:r,doc:n,maxAliasCount:i}=t,a=this.resolve(n,t);if(!a)throw ReferenceError(`Unresolved alias (the anchor must be set before the alias): ${this.source}`);let o=r.get(a);if(o||(nz(a,null,t),o=r.get(a)),!o||void 0===o.res)throw ReferenceError("This should not happen: Alias anchor was not resolved?");if(i>=0&&(o.count+=1,0===o.aliasCount&&(o.aliasCount=function e(t,r,n){if(nc(r)){let e=r.resolve(t),i=n&&e&&n.get(e);return i?i.count*i.aliasCount:0}if(ny(r)){let i=0;for(let a of r.items){let r=e(t,a,n);r>i&&(i=r)}return i}return nh(r)?Math.max(e(t,r.key,n),e(t,r.value,n)):1}(n,a,r)),o.count*o.aliasCount>i))throw ReferenceError("Excessive alias count indicates a resource exhaustion attack");return o.res}toString(e,t,r){let n=`*${this.source}`;if(e){if(nA(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source))throw Error(`Unresolved alias (the anchor must be set before the alias): ${this.source}`);if(e.implicitKey)return`${n} `}return n}}let n$=e=>!e||"function"!=typeof e&&"object"!=typeof e;class nN extends n_{constructor(e){super(nl),this.value=e}toJSON(e,t){return t?.keep?this.value:nz(this.value,e,t)}toString(){return String(this.value)}}function nH(e,t,r){let n;if(np(e)&&(e=e.contents),nb(e))return e;if(nh(e)){let t=r.schema[no].createNode?.(r.schema,null,r);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:i,onAnchor:a,onTagObj:o,schema:s,sourceObjects:l}=r;if(i&&e&&"object"==typeof e){if(n=l.get(e))return n.anchor??(n.anchor=a(e)),new nT(n.anchor);n={anchor:null,node:null},l.set(e,n)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let u=function(e,t,r){if(t){let e=r.filter(e=>e.tag===t),n=e.find(e=>!e.format)??e[0];if(!n)throw Error(`Tag ${t} not found`);return n}return r.find(t=>t.identify?.(e)&&!t.format)}(e,t,s.tags);if(!u){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){let t=new nN(e);return n&&(n.node=t),t}u=e instanceof Map?s[no]:Symbol.iterator in Object(e)?s[nu]:s[no]}o&&(o(u),delete r.onTagObj);let d=u?.createNode?u.createNode(r.schema,e,r):"function"==typeof u?.nodeClass?.from?u.nodeClass.from(r.schema,e,r):new nN(e);return t?d.tag=t:u.default||(d.tag=u.tag),n&&(n.node=d),d}function nB(e,t,r){let n=r;for(let e=t.length-1;e>=0;--e){let r=t[e];if("number"==typeof r&&Number.isInteger(r)&&r>=0){let e=[];e[r]=n,n=e}else n=new Map([[r,n]])}return nH(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}nN.BLOCK_FOLDED="BLOCK_FOLDED",nN.BLOCK_LITERAL="BLOCK_LITERAL",nN.PLAIN="PLAIN",nN.QUOTE_DOUBLE="QUOTE_DOUBLE",nN.QUOTE_SINGLE="QUOTE_SINGLE";let nW=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class nG extends n_{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>nb(t)||nh(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(nW(e))this.add(t);else{let[r,...n]=e,i=this.get(r,!0);if(ny(i))i.addIn(n,t);else if(void 0===i&&this.schema)this.set(r,nB(this.schema,n,t));else throw Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}}deleteIn(e){let[t,...r]=e;if(0===r.length)return this.delete(t);let n=this.get(t,!0);if(ny(n))return n.deleteIn(r);throw Error(`Expected YAML collection at ${t}. Remaining path: ${r}`)}getIn(e,t){let[r,...n]=e,i=this.get(r,!0);return 0===n.length?!t&&ng(i)?i.value:i:ny(i)?i.getIn(n,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!nh(t))return!1;let r=t.value;return null==r||e&&ng(r)&&null==r.value&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){let[t,...r]=e;if(0===r.length)return this.has(t);let n=this.get(t,!0);return!!ny(n)&&n.hasIn(r)}setIn(e,t){let[r,...n]=e;if(0===n.length)this.set(r,t);else{let e=this.get(r,!0);if(ny(e))e.setIn(n,t);else if(void 0===e&&this.schema)this.set(r,nB(this.schema,n,t));else throw Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}}}let nq=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function nF(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}let nU=(e,t,r)=>e.endsWith("\n")?nF(r,t):r.includes("\n")?"\n"+nF(r,t):(e.endsWith(" ")?"":" ")+r,nJ="flow",nY="block",nK="quoted";function nX(e,t,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:a=20,onFold:o,onOverflow:s}={}){let l,u,d;if(!i||i<0)return e;i<a&&(a=0);let c=Math.max(1+a,1+i-t.length);if(e.length<=c)return e;let p=[],f={},h=i-t.length;"number"==typeof n&&(n>i-Math.max(2,a)?p.push(0):h=i-n);let g=!1,m=-1,y=-1,b=-1;for(r===nY&&-1!==(m=nQ(e,m,t.length))&&(h=m+c);d=e[m+=1];){if(r===nK&&"\\"===d){switch(y=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}b=m}if("\n"===d)r===nY&&(m=nQ(e,m,t.length)),h=m+t.length+c,l=void 0;else{if(" "===d&&u&&" "!==u&&"\n"!==u&&"	"!==u){let t=e[m+1];t&&" "!==t&&"\n"!==t&&"	"!==t&&(l=m)}if(m>=h)if(l)p.push(l),h=l+c,l=void 0;else if(r===nK){for(;" "===u||"	"===u;)u=d,d=e[m+=1],g=!0;let t=m>b+1?m-2:y-1;if(f[t])return e;p.push(t),f[t]=!0,h=t+c,l=void 0}else g=!0}u=d}if(g&&s&&s(),0===p.length)return e;o&&o();let v=e.slice(0,p[0]);for(let n=0;n<p.length;++n){let i=p[n],a=p[n+1]||e.length;0===i?v=`
${t}${e.slice(0,a)}`:(r===nK&&f[i]&&(v+=`${e[i]}\\`),v+=`
${t}${e.slice(i+1,a)}`)}return v}function nQ(e,t,r){let n=t,i=t+1,a=e[i];for(;" "===a||"	"===a;)if(t<i+r)a=e[++t];else{do a=e[++t];while(a&&"\n"!==a);n=t,a=e[i=t+1]}return n}let n0=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),n1=e=>/^(%|---|\.\.\.)/m.test(e);function n2(e,t){let r=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=t,i=t.options.doubleQuotedMinMultiLineLength,a=t.indent||(n1(e)?"  ":""),o="",s=0;for(let e=0,t=r[e];t;t=r[++e])if(" "===t&&"\\"===r[e+1]&&"n"===r[e+2]&&(o+=r.slice(s,e)+"\\ ",e+=1,s=e,t="\\"),"\\"===t)switch(r[e+1]){case"u":{o+=r.slice(s,e);let t=r.substr(e+2,4);switch(t){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:"00"===t.substr(0,2)?o+="\\x"+t.substr(2):o+=r.substr(e,6)}e+=5,s=e+1}break;case"n":if(n||'"'===r[e+2]||r.length<i)e+=1;else{for(o+=r.slice(s,e)+"\n\n";"\\"===r[e+2]&&"n"===r[e+3]&&'"'!==r[e+4];)o+="\n",e+=2;o+=a," "===r[e+2]&&(o+="\\"),e+=1,s=e+1}break;default:e+=1}return o=s?o+r.slice(s):r,n?o:nX(o,a,nK,n0(t,!1))}function n9(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return n2(e,t);let r=t.indent||(n1(e)?"  ":""),n="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return t.implicitKey?n:nX(n,r,nJ,n0(t,!1))}function n3(e,t){let r,{singleQuote:n}=t.options;if(!1===n)r=n2;else{let t=e.includes('"'),i=e.includes("'");r=t&&!i?n9:i&&!t?n2:n?n9:n2}return r(e,t)}try{n=RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{n=/\n+(?!\n|$)/g}function n5({comment:e,type:t,value:r},i,a,o){let s,l,u,{blockQuote:d,commentString:c,lineWidth:p}=i.options;if(!d||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return n3(r,i);let f=i.indent||(i.forceBlockIndent||n1(r)?"  ":""),h="literal"===d||"folded"!==d&&t!==nN.BLOCK_FOLDED&&(t===nN.BLOCK_LITERAL||!function(e,t,r){if(!t||t<0)return!1;let n=t-r,i=e.length;if(i<=n)return!1;for(let t=0,r=0;t<i;++t)if("\n"===e[t]){if(t-r>n)return!0;if(i-(r=t+1)<=n)return!1}return!0}(r,p,f.length));if(!r)return h?"|\n":">\n";for(l=r.length;l>0;--l){let e=r[l-1];if("\n"!==e&&"	"!==e&&" "!==e)break}let g=r.substring(l),m=g.indexOf("\n");-1===m?s="-":r===g||m!==g.length-1?(s="+",o&&o()):s="",g&&(r=r.slice(0,-g.length),"\n"===g[g.length-1]&&(g=g.slice(0,-1)),g=g.replace(n,`$&${f}`));let y=!1,b=-1;for(u=0;u<r.length;++u){let e=r[u];if(" "===e)y=!0;else if("\n"===e)b=u;else break}let v=r.substring(0,b<u?b+1:u);v&&(r=r.substring(v.length),v=v.replace(/\n+/g,`$&${f}`));let x=f?"2":"1",w=(y?x:"")+s;if(e&&(w+=" "+c(e.replace(/ ?[\r\n]+/g," ")),a&&a()),!h){let e=r.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${f}`),n=!1,a=n0(i,!0);"folded"!==d&&t!==nN.BLOCK_FOLDED&&(a.onOverflow=()=>{n=!0});let o=nX(`${v}${e}${g}`,f,nY,a);if(!n)return`>${w}
${f}${o}`}return r=r.replace(/\n+/g,`$&${f}`),`|${w}
${f}${v}${r}${g}`}function n6(e,t,r,n){let{implicitKey:i,inFlow:a}=t,o="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)}),{type:s}=e;s!==nN.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(s=nN.QUOTE_DOUBLE);let l=e=>{switch(e){case nN.BLOCK_FOLDED:case nN.BLOCK_LITERAL:return i||a?n3(o.value,t):n5(o,t,r,n);case nN.QUOTE_DOUBLE:return n2(o.value,t);case nN.QUOTE_SINGLE:return n9(o.value,t);case nN.PLAIN:return function(e,t,r,n){let{type:i,value:a}=e,{actualString:o,implicitKey:s,indent:l,indentStep:u,inFlow:d}=t;if(s&&a.includes("\n")||d&&/[[\]{},]/.test(a))return n3(a,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return s||d||!a.includes("\n")?n3(a,t):n5(e,t,r,n);if(!s&&!d&&i!==nN.PLAIN&&a.includes("\n"))return n5(e,t,r,n);if(n1(a)){if(""===l)return t.forceBlockIndent=!0,n5(e,t,r,n);else if(s&&l===u)return n3(a,t)}let c=a.replace(/\n+/g,`$&
${l}`);if(o){let e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(c),{compat:r,tags:n}=t.doc.schema;if(n.some(e)||r?.some(e))return n3(a,t)}return s?c:nX(c,l,nJ,n0(t,!1))}(o,t,r,n);default:return null}},u=l(s);if(null===u){let{defaultKeyType:e,defaultStringType:r}=t.options,n=i&&e||r;if(null===(u=l(n)))throw Error(`Unsupported default string type ${n}`)}return u}function n8(e,t){let r,n=Object.assign({blockQuote:!0,commentString:nq,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function n4(e,t,r,n){let i;if(nh(e))return e.toString(t,r,n);if(nc(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let a=nb(e)?e:t.doc.createNode(e,{onTagObj:e=>i=e});i??(i=function(e,t){let r,n;if(t.tag){let r=e.filter(e=>e.tag===t.tag);if(r.length>0)return r.find(e=>e.format===t.format)??r[0]}if(ng(t)){r=t.value;let i=e.filter(e=>e.identify?.(r));if(i.length>1){let e=i.filter(e=>e.test);e.length>0&&(i=e)}n=i.find(e=>e.format===t.format)??i.find(e=>!e.format)}else r=t,n=e.find(e=>e.nodeClass&&r instanceof e.nodeClass);if(!n){let e=r?.constructor?.name??(null===r?"null":typeof r);throw Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,a));let o=function(e,t,{anchors:r,doc:n}){if(!n.directives)return"";let i=[],a=(ng(e)||ny(e))&&e.anchor;a&&nA(a)&&(r.add(a),i.push(`&${a}`));let o=e.tag??(t.default?null:t.tag);return o&&i.push(n.directives.tagString(o)),i.join(" ")}(a,i,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);let s="function"==typeof i.stringify?i.stringify(a,t,r,n):ng(a)?n6(a,t,r,n):a.toString(t,r,n);return o?ng(a)||"{"===s[0]||"["===s[0]?`${o} ${s}`:`${o}
${t.indent}${s}`:s}let n7={identify:e=>"<<"===e||"symbol"==typeof e&&"<<"===e.description,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new nN(Symbol("<<")),{addToJSMap:ie}),stringify:()=>"<<"};function ie(e,t,r){if(nm(r=e&&nc(r)?r.resolve(e.doc):r))for(let n of r.items)it(e,t,n);else if(Array.isArray(r))for(let n of r)it(e,t,n);else it(e,t,r)}function it(e,t,r){let n=e&&nc(r)?r.resolve(e.doc):r;if(!nf(n))throw Error("Merge sources must be maps or map aliases");for(let[r,i]of n.toJSON(null,e,Map))t instanceof Map?t.has(r)||t.set(r,i):t instanceof Set?t.add(r):Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{value:i,writable:!0,enumerable:!0,configurable:!0});return t}function ir(e,t,{key:r,value:n}){if(nb(r)&&r.addToJSMap)r.addToJSMap(e,t,n);else if((n7.identify(r)||ng(r)&&(!r.type||r.type===nN.PLAIN)&&n7.identify(r.value))&&e?.doc.schema.tags.some(e=>e.tag===n7.tag&&e.default))ie(e,t,n);else{let i=nz(r,"",e);if(t instanceof Map)t.set(i,nz(n,i,e));else if(t instanceof Set)t.add(i);else{let a=function(e,t,r){if(null===t)return"";if("object"!=typeof t)return String(t);if(nb(e)&&r?.doc){let t=n8(r.doc,{});for(let e of(t.anchors=new Set,r.anchors.keys()))t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;let a=e.toString(t);if(!r.mapKeyWarned){var n,i;let e=JSON.stringify(a);e.length>40&&(e=e.substring(0,36)+'..."'),n=r.doc.options.logLevel,i=`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`,("debug"===n||"warn"===n)&&console.warn(i),r.mapKeyWarned=!0}return a}return JSON.stringify(t)}(r,i,e),o=nz(n,a,e);a in t?Object.defineProperty(t,a,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[a]=o}}return t}function ii(e,t,r){return new ia(nH(e,void 0,r),nH(t,void 0,r))}class ia{constructor(e,t=null){Object.defineProperty(this,nd,{value:ns}),this.key=e,this.value=t}clone(e){let{key:t,value:r}=this;return nb(t)&&(t=t.clone(e)),nb(r)&&(r=r.clone(e)),new ia(t,r)}toJSON(e,t){let r=t?.mapAsMap?new Map:{};return ir(t,r,this)}toString(e,t,r){return e?.doc?function({key:e,value:t},r,n,i){let a,o,s,{allNullValues:l,doc:u,indent:d,indentStep:c,options:{commentString:p,indentSeq:f,simpleKeys:h}}=r,g=nb(e)&&e.comment||null;if(h){if(g)throw Error("With simple keys, key nodes cannot have comments");if(ny(e)||!nb(e)&&"object"==typeof e)throw Error("With simple keys, collection cannot be used as a key value")}let m=!h&&(!e||g&&null==t&&!r.inFlow||ny(e)||(ng(e)?e.type===nN.BLOCK_FOLDED||e.type===nN.BLOCK_LITERAL:"object"==typeof e));r=Object.assign({},r,{allNullValues:!1,implicitKey:!m&&(h||!l),indent:d+c});let y=!1,b=!1,v=n4(e,r,()=>y=!0,()=>b=!0);if(!m&&!r.inFlow&&v.length>1024){if(h)throw Error("With simple keys, single line scalar must not span more than 1024 characters");m=!0}if(r.inFlow){if(l||null==t)return y&&n&&n(),""===v?"?":m?`? ${v}`:v}else if(l&&!h||null==t&&m)return v=`? ${v}`,g&&!y?v+=nU(v,r.indent,p(g)):b&&i&&i(),v;y&&(g=null),m?(g&&(v+=nU(v,r.indent,p(g))),v=`? ${v}
${d}:`):(v=`${v}:`,g&&(v+=nU(v,r.indent,p(g)))),nb(t)?(a=!!t.spaceBefore,o=t.commentBefore,s=t.comment):(a=!1,o=null,s=null,t&&"object"==typeof t&&(t=u.createNode(t))),r.implicitKey=!1,!m&&!g&&ng(t)&&(r.indentAtStart=v.length+1),b=!1,!(!f&&c.length>=2&&!r.inFlow&&!m&&nm(t))||t.flow||t.tag||t.anchor||(r.indent=r.indent.substring(2));let x=!1,w=n4(t,r,()=>x=!0,()=>b=!0),j=" ";if(g||a||o){if(j=a?"\n":"",o){let e=p(o);j+=`
${nF(e,r.indent)}`}""!==w||r.inFlow?j+=`
${r.indent}`:"\n"===j&&(j="\n\n")}else if(!m&&ny(t)){let e=w[0],n=w.indexOf("\n"),i=-1!==n,a=r.inFlow??t.flow??0===t.items.length;if(i||!a){let t=!1;if(i&&("&"===e||"!"===e)){let r=w.indexOf(" ");"&"===e&&-1!==r&&r<n&&"!"===w[r+1]&&(r=w.indexOf(" ",r+1)),(-1===r||n<r)&&(t=!0)}t||(j=`
${r.indent}`)}}else(""===w||"\n"===w[0])&&(j="");return v+=j+w,r.inFlow?x&&n&&n():s&&!x?v+=nU(v,r.indent,p(s)):b&&i&&i(),v}(this,e,t,r):JSON.stringify(this)}}function io(e,t,r){return(t.inFlow??e.flow?function({items:e},t,{flowChars:r,itemIndent:n}){let{indent:i,indentStep:a,flowCollectionPadding:o,options:{commentString:s}}=t,l=Object.assign({},t,{indent:n+=a,inFlow:!0,type:null}),u=!1,d=0,c=[];for(let r=0;r<e.length;++r){let i=e[r],a=null;if(nb(i))i.spaceBefore&&c.push(""),is(t,c,i.commentBefore,!1),i.comment&&(a=i.comment);else if(nh(i)){let e=nb(i.key)?i.key:null;e&&(e.spaceBefore&&c.push(""),is(t,c,e.commentBefore,!1),e.comment&&(u=!0));let r=nb(i.value)?i.value:null;r?(r.comment&&(a=r.comment),r.commentBefore&&(u=!0)):null==i.value&&e?.comment&&(a=e.comment)}a&&(u=!0);let o=n4(i,l,()=>a=null);r<e.length-1&&(o+=","),a&&(o+=nU(o,n,s(a))),!u&&(c.length>d||o.includes("\n"))&&(u=!0),c.push(o),d=c.length}let{start:p,end:f}=r;if(0===c.length)return p+f;if(!u){let e=c.reduce((e,t)=>e+t.length+2,2);u=t.options.lineWidth>0&&e>t.options.lineWidth}if(!u)return`${p}${o}${c.join(" ")}${o}${f}`;{let e=p;for(let t of c)e+=t?`
${a}${i}${t}`:"\n";return`${e}
${i}${f}`}}:function({comment:e,items:t},r,{blockItemPrefix:n,flowChars:i,itemIndent:a,onChompKeep:o,onComment:s}){let l,{indent:u,options:{commentString:d}}=r,c=Object.assign({},r,{indent:a,type:null}),p=!1,f=[];for(let e=0;e<t.length;++e){let i=t[e],o=null;if(nb(i))!p&&i.spaceBefore&&f.push(""),is(r,f,i.commentBefore,p),i.comment&&(o=i.comment);else if(nh(i)){let e=nb(i.key)?i.key:null;e&&(!p&&e.spaceBefore&&f.push(""),is(r,f,e.commentBefore,p))}p=!1;let s=n4(i,c,()=>o=null,()=>p=!0);o&&(s+=nU(s,a,d(o))),p&&o&&(p=!1),f.push(n+s)}if(0===f.length)l=i.start+i.end;else{l=f[0];for(let e=1;e<f.length;++e){let t=f[e];l+=t?`
${u}${t}`:"\n"}}return e?(l+="\n"+nF(d(e),u),s&&s()):p&&o&&o(),l})(e,t,r)}function is({indent:e,options:{commentString:t}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){let i=nF(t(n),e);r.push(i.trimStart())}}function il(e,t){let r=ng(t)?t.value:t;for(let n of e)if(nh(n)&&(n.key===t||n.key===r||ng(n.key)&&n.key.value===r))return n}class iu extends nG{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(no,e),this.items=[]}static from(e,t,r){let{keepUndefined:n,replacer:i}=r,a=new this(e),o=(e,o)=>{if("function"==typeof i)o=i.call(t,e,o);else if(Array.isArray(i)&&!i.includes(e))return;(void 0!==o||n)&&a.items.push(ii(e,o,r))};if(t instanceof Map)for(let[e,r]of t)o(e,r);else if(t&&"object"==typeof t)for(let e of Object.keys(t))o(e,t[e]);return"function"==typeof e.sortMapEntries&&a.items.sort(e.sortMapEntries),a}add(e,t){let r;r=nh(e)?e:e&&"object"==typeof e&&"key"in e?new ia(e.key,e.value):new ia(e,e?.value);let n=il(this.items,r.key),i=this.schema?.sortMapEntries;if(n){if(!t)throw Error(`Key ${r.key} already set`);ng(n.value)&&n$(r.value)?n.value.value=r.value:n.value=r.value}else if(i){let e=this.items.findIndex(e=>0>i(r,e));-1===e?this.items.push(r):this.items.splice(e,0,r)}else this.items.push(r)}delete(e){let t=il(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){let r=il(this.items,e),n=r?.value;return(!t&&ng(n)?n.value:n)??void 0}has(e){return!!il(this.items,e)}set(e,t){this.add(new ia(e,t),!0)}toJSON(e,t,r){let n=r?new r:t?.mapAsMap?new Map:{};for(let e of(t?.onCreate&&t.onCreate(n),this.items))ir(t,n,e);return n}toString(e,t,r){if(!e)return JSON.stringify(this);for(let e of this.items)if(!nh(e))throw Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),io(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:t})}}let id={collection:"map",default:!0,nodeClass:iu,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(nf(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,r)=>iu.from(e,t,r)};class ic extends nG{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(nu,e),this.items=[]}add(e){this.items.push(e)}delete(e){let t=ip(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){let r=ip(e);if("number"!=typeof r)return;let n=this.items[r];return!t&&ng(n)?n.value:n}has(e){let t=ip(e);return"number"==typeof t&&t<this.items.length}set(e,t){let r=ip(e);if("number"!=typeof r)throw Error(`Expected a valid index, not ${e}.`);let n=this.items[r];ng(n)&&n$(t)?n.value=t:this.items[r]=t}toJSON(e,t){let r=[];t?.onCreate&&t.onCreate(r);let n=0;for(let e of this.items)r.push(nz(e,String(n++),t));return r}toString(e,t,r){return e?io(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:t}):JSON.stringify(this)}static from(e,t,r){let{replacer:n}=r,i=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let a of t){if("function"==typeof n){let r=t instanceof Set?a:String(e++);a=n.call(t,r,a)}i.items.push(nH(a,void 0,r))}}return i}}function ip(e){let t=ng(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}let ih={collection:"seq",default:!0,nodeClass:ic,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(nm(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,r)=>ic.from(e,t,r)},ig={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,r,n)=>n6(e,t=Object.assign({actualString:!0},t),r,n)},im={identify:e=>null==e,createNode:()=>new nN(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new nN(null),stringify:({source:e},t)=>"string"==typeof e&&im.test.test(e)?e:t.options.nullStr},iy={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new nN("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},r)=>e&&iy.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?r.options.trueStr:r.options.falseStr};function ib({format:e,minFractionDigits:t,tag:r,value:n}){if("bigint"==typeof n)return String(n);let i="number"==typeof n?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let a=JSON.stringify(n);if(!e&&t&&(!r||"tag:yaml.org,2002:float"===r)&&/^\d/.test(a)){let e=a.indexOf(".");e<0&&(e=a.length,a+=".");let r=t-(a.length-e-1);for(;r-- >0;)a+="0"}return a}let iv={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?-1/0:1/0,stringify:ib},ix={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():ib(e)}},iw={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let t=new nN(parseFloat(e)),r=e.indexOf(".");return -1!==r&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-r-1),t},stringify:ib},ij=e=>"bigint"==typeof e||Number.isInteger(e),iS=(e,t,r,{intAsBigInt:n})=>n?BigInt(e):parseInt(e.substring(t),r);function iC(e,t,r){let{value:n}=e;return ij(n)&&n>=0?r+n.toString(t):ib(e)}let iD={identify:e=>ij(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,r)=>iS(e,2,8,r),stringify:e=>iC(e,8,"0o")},iO={identify:ij,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,r)=>iS(e,0,10,r),stringify:ib},iP={identify:e=>ij(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,r)=>iS(e,2,16,r),stringify:e=>iC(e,16,"0x")},ik=[id,ih,ig,im,iy,iD,iO,iP,iv,ix,iw];function iE(e){return"bigint"==typeof e||Number.isInteger(e)}let iM=({value:e})=>JSON.stringify(e),iR=[id,ih].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:iM},{identify:e=>null==e,createNode:()=>new nN(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:iM},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:iM},{identify:iE,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:r})=>r?BigInt(e):parseInt(e,10),stringify:({value:e})=>iE(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:iM}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),iZ={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"!=typeof atob)return t("This environment does not support reading binary tags; either Buffer or atob is required"),e;{let t=atob(e.replace(/[\n\r]/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return r}},stringify({comment:e,type:t,value:r},n,i,a){let o;if(!r)return"";if("function"==typeof btoa){let e="";for(let t=0;t<r.length;++t)e+=String.fromCharCode(r[t]);o=btoa(e)}else throw Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=nN.BLOCK_LITERAL),t!==nN.QUOTE_DOUBLE){let e=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),r=Math.ceil(o.length/e),i=Array(r);for(let t=0,n=0;t<r;++t,n+=e)i[t]=o.substr(n,e);o=i.join(t===nN.BLOCK_LITERAL?"\n":" ")}return n6({comment:e,type:t,value:o},n,i,a)}};function iA(e,t){if(nm(e))for(let r=0;r<e.items.length;++r){let n=e.items[r];if(!nh(n)){if(nf(n)){n.items.length>1&&t("Each pair must have its own sequence indicator");let e=n.items[0]||new ia(new nN(null));if(n.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${n.commentBefore}
${e.key.commentBefore}`:n.commentBefore),n.comment){let t=e.value??e.key;t.comment=t.comment?`${n.comment}
${t.comment}`:n.comment}n=e}e.items[r]=nh(n)?n:new ia(n)}}else t("Expected a sequence for this tag");return e}function iV(e,t,r){let{replacer:n}=r,i=new ic(e);i.tag="tag:yaml.org,2002:pairs";let a=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let o,s;if("function"==typeof n&&(e=n.call(t,String(a++),e)),Array.isArray(e))if(2===e.length)o=e[0],s=e[1];else throw TypeError(`Expected [key, value] tuple: ${e}`);else if(e&&e instanceof Object){let t=Object.keys(e);if(1===t.length)s=e[o=t[0]];else throw TypeError(`Expected tuple with one key, not ${t.length} keys`)}else o=e;i.items.push(ii(o,s,r))}return i}let iI={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:iA,createNode:iV};class iL extends ic{constructor(){super(),this.add=iu.prototype.add.bind(this),this.delete=iu.prototype.delete.bind(this),this.get=iu.prototype.get.bind(this),this.has=iu.prototype.has.bind(this),this.set=iu.prototype.set.bind(this),this.tag=iL.tag}toJSON(e,t){if(!t)return super.toJSON(e);let r=new Map;for(let e of(t?.onCreate&&t.onCreate(r),this.items)){let n,i;if(nh(e)?(n=nz(e.key,"",t),i=nz(e.value,n,t)):n=nz(e,"",t),r.has(n))throw Error("Ordered maps must not include duplicate keys");r.set(n,i)}return r}static from(e,t,r){let n=iV(e,t,r),i=new this;return i.items=n.items,i}}iL.tag="tag:yaml.org,2002:omap";let iz={collection:"seq",identify:e=>e instanceof Map,nodeClass:iL,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){let r=iA(e,t),n=[];for(let{key:e}of r.items)ng(e)&&(n.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):n.push(e.value));return Object.assign(new iL,r)},createNode:(e,t,r)=>iL.from(e,t,r)};function i_({value:e,source:t},r){return t&&(e?iT:i$).test.test(t)?t:e?r.options.trueStr:r.options.falseStr}let iT={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new nN(!0),stringify:i_},i$={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new nN(!1),stringify:i_},iN=e=>"bigint"==typeof e||Number.isInteger(e);function iH(e,t,r,{intAsBigInt:n}){let i=e[0];if(("-"===i||"+"===i)&&(t+=1),e=e.substring(t).replace(/_/g,""),n){switch(r){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}let t=BigInt(e);return"-"===i?BigInt(-1)*t:t}let a=parseInt(e,r);return"-"===i?-1*a:a}function iB(e,t,r){let{value:n}=e;if(iN(n)){let e=n.toString(t);return n<0?"-"+r+e.substr(1):r+e}return ib(e)}class iW extends iu{constructor(e){super(e),this.tag=iW.tag}add(e){let t;t=nh(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new ia(e.key,null):new ia(e,null),il(this.items,t.key)||this.items.push(t)}get(e,t){let r=il(this.items,e);return!t&&nh(r)?ng(r.key)?r.key.value:r.key:r}set(e,t){if("boolean"!=typeof t)throw Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);let r=il(this.items,e);r&&!t?this.items.splice(this.items.indexOf(r),1):!r&&t&&this.items.push(new ia(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,r);throw Error("Set items must all have null values")}static from(e,t,r){let{replacer:n}=r,i=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof n&&(e=n.call(t,e,e)),i.items.push(ii(e,null,r));return i}}iW.tag="tag:yaml.org,2002:set";let iG={collection:"map",identify:e=>e instanceof Set,nodeClass:iW,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,r)=>iW.from(e,t,r),resolve(e,t){if(nf(e))if(e.hasAllNullValues(!0))return Object.assign(new iW,e);else t("Set items must all have null values");else t("Expected a mapping for this tag");return e}};function iq(e,t){let r=e[0],n="-"===r||"+"===r?e.substring(1):e,i=e=>t?BigInt(e):Number(e),a=n.replace(/_/g,"").split(":").reduce((e,t)=>e*i(60)+i(t),i(0));return"-"===r?i(-1)*a:a}function iF(e){let{value:t}=e,r=e=>e;if("bigint"==typeof t)r=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return ib(e);let n="";t<0&&(n="-",t*=r(-1));let i=r(60),a=[t%i];return t<60?a.unshift(0):(t=(t-a[0])/i,a.unshift(t%i),t>=60&&(t=(t-a[0])/i,a.unshift(t))),n+a.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}let iU={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:r})=>iq(e,r),stringify:iF},iJ={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>iq(e,!1),stringify:iF},iY={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let t=e.match(iY.test);if(!t)throw Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,a,o,s]=t.map(Number),l=Date.UTC(r,n-1,i,a||0,o||0,s||0,t[7]?Number((t[7]+"00").substr(1,3)):0),u=t[8];if(u&&"Z"!==u){let e=iq(u,!1);30>Math.abs(e)&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},iK=[id,ih,ig,im,iT,i$,{identify:iN,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,r)=>iH(e,2,2,r),stringify:e=>iB(e,2,"0b")},{identify:iN,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,r)=>iH(e,1,8,r),stringify:e=>iB(e,8,"0")},{identify:iN,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,r)=>iH(e,0,10,r),stringify:ib},{identify:iN,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,r)=>iH(e,2,16,r),stringify:e=>iB(e,16,"0x")},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?-1/0:1/0,stringify:ib},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():ib(e)}},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let t=new nN(parseFloat(e.replace(/_/g,""))),r=e.indexOf(".");if(-1!==r){let n=e.substring(r+1).replace(/_/g,"");"0"===n[n.length-1]&&(t.minFractionDigits=n.length)}return t},stringify:ib},iZ,n7,iz,iI,iG,iU,iJ,iY],iX=new Map([["core",ik],["failsafe",[id,ih,ig]],["json",iR],["yaml11",iK],["yaml-1.1",iK]]),iQ={binary:iZ,bool:iy,float:iw,floatExp:ix,floatNaN:iv,floatTime:iJ,int:iO,intHex:iP,intOct:iD,intTime:iU,map:id,merge:n7,null:im,omap:iz,pairs:iI,seq:ih,set:iG,timestamp:iY},i0={"tag:yaml.org,2002:binary":iZ,"tag:yaml.org,2002:merge":n7,"tag:yaml.org,2002:omap":iz,"tag:yaml.org,2002:pairs":iI,"tag:yaml.org,2002:set":iG,"tag:yaml.org,2002:timestamp":iY};function i1(e,t,r){let n=iX.get(t);if(n&&!e)return r&&!n.includes(n7)?n.concat(n7):n.slice();let i=n;if(!i)if(Array.isArray(e))i=[];else{let e=Array.from(iX.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}if(Array.isArray(e))for(let t of e)i=i.concat(t);else"function"==typeof e&&(i=e(i.slice()));return r&&(i=i.concat(n7)),i.reduce((e,t)=>{let r="string"==typeof t?iQ[t]:t;if(!r){let e=JSON.stringify(t),r=Object.keys(iQ).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown custom tag ${e}; use one of ${r}`)}return e.includes(r)||e.push(r),e},[])}let i2=(e,t)=>e.key<t.key?-1:+(e.key>t.key);class i9{constructor({compat:e,customTags:t,merge:r,resolveKnownTags:n,schema:i,sortMapEntries:a,toStringDefaults:o}){this.compat=Array.isArray(e)?i1(e,"compat"):e?i1(null,e):null,this.name="string"==typeof i&&i||"core",this.knownTags=n?i0:{},this.tags=i1(t,this.name,r),this.toStringOptions=o??null,Object.defineProperty(this,no,{value:id}),Object.defineProperty(this,nl,{value:ig}),Object.defineProperty(this,nu,{value:ih}),this.sortMapEntries="function"==typeof a?a:!0===a?i2:null}clone(){let e=Object.create(i9.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class i3{constructor(e,t,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,nd,{value:na});let n=null;"function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t,t=void 0);let i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=i;let{version:a}=i;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new nZ({version:a}),this.setSchema(a,r),this.contents=void 0===e?null:this.createNode(e,n,r)}clone(){let e=Object.create(i3.prototype,{[nd]:{value:na}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=nb(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){i5(this.contents)&&this.contents.add(e)}addIn(e,t){i5(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){let r=nV(this);e.anchor=!t||r.has(t)?nI(t||"a",r):t}return new nT(e.anchor)}createNode(e,t,r){let n;if("function"==typeof t)e=t.call({"":e},"",e),n=t;else if(Array.isArray(t)){let e=t.filter(e=>"number"==typeof e||e instanceof String||e instanceof Number).map(String);e.length>0&&(t=t.concat(e)),n=t}else void 0===r&&t&&(r=t,t=void 0);let{aliasDuplicateObjects:i,anchorPrefix:a,flow:o,keepUndefined:s,onTagObj:l,tag:u}=r??{},{onAnchor:d,setAnchors:c,sourceObjects:p}=function(e,t){let r=[],n=new Map,i=null;return{onAnchor:n=>{r.push(n),i??(i=nV(e));let a=nI(t,i);return i.add(a),a},setAnchors:()=>{for(let e of r){let t=n.get(e);if("object"==typeof t&&t.anchor&&(ng(t.node)||ny(t.node)))t.node.anchor=t.anchor;else{let t=Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}}},sourceObjects:n}}(this,a||"a"),f={aliasDuplicateObjects:i??!0,keepUndefined:s??!1,onAnchor:d,onTagObj:l,replacer:n,schema:this.schema,sourceObjects:p},h=nH(e,u,f);return o&&ny(h)&&(h.flow=!0),c(),h}createPair(e,t,r={}){return new ia(this.createNode(e,null,r),this.createNode(t,null,r))}delete(e){return!!i5(this.contents)&&this.contents.delete(e)}deleteIn(e){return nW(e)?null!=this.contents&&(this.contents=null,!0):!!i5(this.contents)&&this.contents.deleteIn(e)}get(e,t){return ny(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return nW(e)?!t&&ng(this.contents)?this.contents.value:this.contents:ny(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!ny(this.contents)&&this.contents.has(e)}hasIn(e){return nW(e)?void 0!==this.contents:!!ny(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=nB(this.schema,[e],t):i5(this.contents)&&this.contents.set(e,t)}setIn(e,t){nW(e)?this.contents=t:null==this.contents?this.contents=nB(this.schema,Array.from(e),t):i5(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let r;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new nZ({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new nZ({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{let t=JSON.stringify(e);throw Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(r)this.schema=new i9(Object.assign(r,t));else throw Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:r,maxAliasCount:n,onAnchor:i,reviver:a}={}){let o={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===r,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},s=nz(this.contents,t??"",o);if("function"==typeof i)for(let{count:e,res:t}of o.anchors.values())i(t,e);return"function"==typeof a?nL(a,{"":s},"",s):s}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||0>=Number(e.indent))){let t=JSON.stringify(e.indent);throw Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){let r=[],n=!0===t.directives;if(!1!==t.directives&&e.directives){let t=e.directives.toString(e);t?(r.push(t),n=!0):e.directives.docStart&&(n=!0)}n&&r.push("---");let i=n8(e,t),{commentString:a}=i.options;if(e.commentBefore){1!==r.length&&r.unshift("");let t=a(e.commentBefore);r.unshift(nF(t,""))}let o=!1,s=null;if(e.contents){if(nb(e.contents)){if(e.contents.spaceBefore&&n&&r.push(""),e.contents.commentBefore){let t=a(e.contents.commentBefore);r.push(nF(t,""))}i.forceBlockIndent=!!e.comment,s=e.contents.comment}let t=s?void 0:()=>o=!0,l=n4(e.contents,i,()=>s=null,t);s&&(l+=nU(l,"",a(s))),("|"===l[0]||">"===l[0])&&"---"===r[r.length-1]?r[r.length-1]=`--- ${l}`:r.push(l)}else r.push(n4(e.contents,i));if(e.directives?.docEnd)if(e.comment){let t=a(e.comment);t.includes("\n")?(r.push("..."),r.push(nF(t,""))):r.push(`... ${t}`)}else r.push("...");else{let t=e.comment;t&&o&&(t=t.replace(/^\n+/,"")),t&&((!o||s)&&""!==r[r.length-1]&&r.push(""),r.push(nF(a(t),"")))}return r.join("\n")+"\n"}(this,e)}}function i5(e){if(ny(e))return!0;throw Error("Expected a YAML collection as document contents")}let i6=Symbol("break visit"),i8=Symbol("skip children"),i4=Symbol("remove item");function i7(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),function e(t,r,n){let i=n(r,t);if("symbol"==typeof i)return i;for(let a of["key","value"]){let o=r[a];if(o&&"items"in o){for(let r=0;r<o.items.length;++r){let i=e(Object.freeze(t.concat([[a,r]])),o.items[r],n);if("number"==typeof i)r=i-1;else{if(i===i6)return i6;i===i4&&(o.items.splice(r,1),r-=1)}}"function"==typeof i&&"key"===a&&(i=i(r,t))}}return"function"==typeof i?i(r,t):i}(Object.freeze([]),e,t)}function ae(e,t,r){let n=null;if("function"==typeof t||Array.isArray(t)?n=t:void 0===r&&t&&(r=t),"string"==typeof r&&(r=r.length),"number"==typeof r){let e=Math.round(r);r=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){let{keepUndefined:e}=r??t??{};if(!e)return}return np(e)&&!n?e.toString(r):new i3(e,n,r).toString(r)}function at(){let{panels:e,panelGroups:t,panelGroupOrder:r,setDashboard:n,kind:i,metadata:a,display:o,duration:s,refreshInterval:l,datasources:u,ttl:d}=G(({panels:e,panelGroups:t,panelGroupOrder:r,setDashboard:n,kind:i,metadata:a,display:o,duration:s,refreshInterval:l,datasources:u,ttl:d})=>({panels:e,panelGroups:t,panelGroupOrder:r,setDashboard:n,kind:i,metadata:a,display:o,duration:s,refreshInterval:l,datasources:u,ttl:d})),{setVariableDefinitions:c}=rc(),p=rp(),f=function(e,t){let r=[];return t.map(t=>{let n,i=e[t];if(void 0===i)throw Error("panel group not found");let{title:a,isCollapsed:o,itemLayouts:s,itemPanelKeys:l}=i;a&&(n={title:a,collapse:{open:!o}});let u={kind:"Grid",spec:{display:n,items:s.map(e=>{let t=l[e.i];if(void 0===t)throw Error(`Missing panel key of layout ${e.i}`);return{x:e.x,y:e.y,width:e.w,height:e.h,content:(0,Z.$j)(t)}})}};r.push(u)}),r}(t,r);return{dashboard:"Dashboard"===i?{kind:i,metadata:a,spec:{display:o,panels:e,layouts:f,variables:p,duration:s,refreshInterval:l,datasources:u}}:{kind:i,metadata:a,spec:{display:o,panels:e,layouts:f,variables:p,duration:s,refreshInterval:l,datasources:u,ttl:d}},setDashboard:e=>{c(e.spec.variables),n(e)}}}function ar(){let{dashboard:e}=at(),t=(0,h.useRef)(null),[r,n]=g().useState(null),a=!!r,o=(r,i)=>()=>{n(null);let a,o="";switch(r){case"json":a="application/json",o=JSON.stringify(e,null,2);break;case"yaml":if(a="application/yaml","cr"===i){let t=e.metadata.name.toLowerCase().replace(/[^a-z0-9-]/g,"-");o=ae({apiVersion:"perses.dev/v1alpha1",kind:"PersesDashboard",metadata:{labels:{"app.kubernetes.io/name":"perses-dashboard","app.kubernetes.io/instance":t,"app.kubernetes.io/part-of":"perses-operator"},name:t,namespace:e.metadata.project},spec:e.spec})}else o=ae(e)}if(!t||!t.current)return;let s=URL.createObjectURL(new Blob([o],{type:a}));t.current.download=`${e.metadata.name}${"cr"===i?"-cr":""}.${r}`,t.current.href=s,t.current.click(),URL.revokeObjectURL(s)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ToolbarIconButton,{id:"download-dashboard-button","aria-controls":a?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,onClick:e=>{n(e.currentTarget)},children:(0,i.jsx)(nn.default,{})}),(0,i.jsx)(tZ.Z,{id:"download-dashboard-formats",anchorEl:r,open:a,hideBackdrop:!0,onClose:()=>n(null),MenuListProps:{"aria-labelledby":"download-dashboard-button"},children:(0,i.jsx)("div",{children:(0,i.jsx)(nt.d,{onClickAway:()=>n(null),children:(0,i.jsxs)(nr.Z,{children:[(0,i.jsx)(tA.Z,{onClick:o("json"),children:"JSON"}),(0,i.jsx)(tA.Z,{onClick:o("yaml"),children:"YAML"}),(0,i.jsx)(tA.Z,{onClick:o("yaml","cr"),children:"YAML (CR)"})]})})})}),(0,i.jsx)("a",{ref:t,style:{display:"none"}})]})}function an(e){let[t,r]=rq(e.datasources),[n,o]=(0,h.useState)("update"),[s,l]=(0,h.useState)(null),u={default:!1,plugin:{kind:"PrometheusDatasource",spec:{}}},{openDiscardChangesConfirmationDialog:d,closeDiscardChangesConfirmationDialog:c}=eP();return(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(R.ValidationProvider,{children:(0,i.jsx)(R.DatasourceEditorForm,{initialDatasourceDefinition:s,action:n,isDraft:!0,onActionChange:o,onSave:e=>{r(t=>{delete t[s.name],t[e.name]=e.spec,l(null)})},onClose:()=>{l(null)}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.Z,{sx:{display:"flex",alignItems:"center",padding:e=>e.spacing(1,2),borderBottom:e=>`1px solid ${e.palette.divider}`},children:[(0,i.jsx)(eQ.Z,{variant:"h2",children:"Edit Dashboard Datasources"}),(0,i.jsxs)(e1.Z,{direction:"row",spacing:1,marginLeft:"auto",children:[(0,i.jsx)(a.Z,{disabled:e.datasources===t,variant:"contained",onClick:()=>{e.onChange(t)},children:"Apply"}),(0,i.jsx)(a.Z,{color:"secondary",variant:"outlined",onClick:()=>{JSON.stringify(e.datasources)!==JSON.stringify(t)?d({onDiscardChanges:()=>{c(),e.onCancel()},onCancel:()=>{c()},description:"You have unapplied changes. Are you sure you want to discard these changes? Changes cannot be recovered."}):e.onCancel()},children:"Cancel"})]})]}),(0,i.jsx)(eA.Z,{padding:2,sx:{overflowY:"scroll"},children:(0,i.jsx)(e1.Z,{spacing:2,children:(0,i.jsxs)(e1.Z,{spacing:2,children:[(0,i.jsx)(rv.Z,{children:(0,i.jsxs)(rx.Z,{sx:{minWidth:650},"aria-label":"table of datasources",children:[(0,i.jsx)(rw.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{children:"Name"}),(0,i.jsx)(rW.Z,{children:"Type"}),(0,i.jsx)(rW.Z,{children:"Description"}),(0,i.jsx)(rW.Z,{align:"right",children:"Actions"})]})}),(0,i.jsx)(rS.Z,{children:Object.entries(t).map(([e,n])=>(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:e}),(0,i.jsx)(rW.Z,{children:n.plugin.kind}),(0,i.jsx)(rW.Z,{children:n.display?.description??""}),(0,i.jsxs)(rW.Z,{align:"right",sx:{whiteSpace:"nowrap"},children:[(0,i.jsx)(e0.Z,{onClick:()=>{o("update"),l({name:e,spec:t[e]??u})},children:(0,i.jsx)(rF.default,{})}),(0,i.jsx)(e0.Z,{onClick:()=>{r(t=>{delete t[e]})},children:(0,i.jsx)(rU.default,{})})]})]},e))})]})}),(0,i.jsx)(eA.Z,{display:"flex",children:(0,i.jsx)(a.Z,{variant:"contained",startIcon:(0,i.jsx)(rG.default,{}),sx:{marginLeft:"auto"},onClick:()=>{o("create"),l({name:"NewDatasource",spec:u})},children:"Add Datasource"})})]})})})]})})}function ai(){let[e,t]=(0,h.useState)(!1),{getLocalDatasources:r,setLocalDatasources:n,getSavedDatasources:o,setSavedDatasources:l}=(0,R.useDatasourceStore)(),u=r(),c=o(),{dashboard:f,setDashboard:g}=at(),m=()=>{t(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InfoTooltip,{description:d,children:(0,i.jsx)(a.Z,{startIcon:(0,i.jsx)(e3.default,{}),onClick:()=>{t(!0)},"aria-label":d,variant:"text",color:"primary",sx:p,children:"Datasources"})}),(0,i.jsx)(s.Drawer,{isOpen:e,onClose:m,PaperProps:{sx:{width:"50%"}},"data-testid":"datasource-editor",children:(0,i.jsx)(an,{datasources:u,onCancel:m,onChange:e=>{let r=Object.keys(e).filter(t=>{let r="directUrl"in(e[t]?.plugin?.spec??{}),n=!r&&!("directUrl"in(c[t]?.plugin?.spec??{}))&&e[t]?.plugin?.spec?.proxy===c[t]?.plugin?.spec?.proxy;return r||n}).reduce((t,r)=>(t[r]=e[r],t),{});g((f.kind,{...f,spec:{...f.spec,datasources:e}})),l(r),n(e),t(!1)}})})]})}i7.BREAK=i6,i7.SKIP=i8,i7.REMOVE=i4,i7.itemAtPath=(e,t)=>{let r=e;for(let[e,n]of t){let t=r?.[e];if(!t||!("items"in t))return;r=t.items[n]}return r},i7.parentCollection=(e,t)=>{let r=i7.itemAtPath(e,t.slice(0,-1)),n=t[t.length-1][0],i=r?.[n];if(i&&"items"in i)return i;throw Error("Parent collection not found")};var aa=r(78270);let ao=e=>{let{isReadonly:t}=e,{openEditJsonDialog:r}=eE(),n=t?"View JSON":"Edit JSON";return(0,i.jsx)(s.InfoTooltip,{description:n,children:(0,i.jsx)(s.ToolbarIconButton,{"aria-label":n,variant:"outlined",onClick:()=>r(),children:(0,i.jsx)(aa.default,{})})})},as=({onSave:e,isDisabled:t,variant:r="contained"})=>{let[n,o]=(0,h.useState)(!1),{dashboard:s,setDashboard:l}=at(),{getSavedVariablesStatus:u,setVariableDefaultValues:d}=rc(),{isSavedVariableModified:c}=u(),{timeRange:p}=(0,R.useTimeRange)(),{setEditMode:f}=J(),{openSaveChangesConfirmationDialog:g,closeSaveChangesConfirmationDialog:m}=eD(),y=async()=>{if(e)try{o(!0),await e(s),m(),f(!1)}catch(e){throw Error(`An error occurred while saving the dashboard. ${e}`)}finally{o(!1)}else f(!1)};return(0,i.jsx)(a.Z,{variant:r,onClick:()=>{let e=(0,re.s3)(p)&&s.spec.duration!==p.pastDuration;e||c?g({onSaveChanges:(e,t)=>{if((0,re.s3)(p)&&!0===e&&(s.spec.duration=p.pastDuration),!0===t){let e=d();s.spec.variables=e}l(s),y()},onCancel:()=>{m()},isSavedDurationModified:e,isSavedVariableModified:c}):y()},disabled:t||n,children:"Save"})};function al(e,t){let{disableHysteresis:r=!1,threshold:n=100,target:i}=t,a=e.current;return i&&(e.current=void 0!==i.pageYOffset?i.pageYOffset:i.scrollTop),(!!r||void 0===a||!(e.current<a))&&e.current>n}let au="undefined"!=typeof window?window:null;function ad(e){return(0,eF.ZP)("MuiAppBar",e)}(0,eq.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);let ac=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,ap=(0,e$.ZP)(rD.Z,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`position${(0,tL.Z)(r.position)}`],t[`color${(0,tL.Z)(r.color)}`]]}})((0,eN.Z)(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter((0,tz.Z)(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:e=>!0===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>!1===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?ac(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?ac(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),af=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiAppBar"}),{className:n,color:a="primary",enableColorOnDark:o=!1,position:s="fixed",...l}=r,u={...r,color:a,position:s,enableColorOnDark:o},d=(e=>{let{color:t,position:r,classes:n}=e,i={root:["root",`color${(0,tL.Z)(t)}`,`position${(0,tL.Z)(r)}`]};return(0,eT.Z)(i,ad,n)})(u);return(0,i.jsx)(ap,{square:!0,component:"header",ownerState:u,elevation:4,className:(0,eL.Z)(d.root,n,"fixed"===s&&"mui-fixed"),ref:t,...l})});var ah=r(45856),ag=r(47511),am=r(37746),ay=r(76819),ab=r(7968),av=r(82056),ax=r(47035);function aw(e){return(0,eF.ZP)("MuiLinearProgress",e)}(0,eq.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);let aj=(0,ax.keyframes)`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,aS="string"!=typeof aj?(0,ax.css)`
        animation: ${aj} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,aC=(0,ax.keyframes)`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,aD="string"!=typeof aC?(0,ax.css)`
        animation: ${aC} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,aO=(0,ax.keyframes)`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,aP="string"!=typeof aO?(0,ax.css)`
        animation: ${aO} 3s infinite linear;
      `:null,ak=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,tV.$n)(e.palette[t].main,.62):(0,tV._j)(e.palette[t].main,.5),aE=(0,e$.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`color${(0,tL.Z)(r.color)}`],t[r.variant]]}})((0,eN.Z)(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter((0,tz.Z)()).map(([t])=>({props:{color:t},style:{backgroundColor:ak(e,t)}})),{props:({ownerState:e})=>"inherit"===e.color&&"buffer"!==e.variant,style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),aM=(0,e$.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.dashed,t[`dashedColor${(0,tL.Z)(r.color)}`]]}})((0,eN.Z)(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter((0,tz.Z)()).map(([t])=>{let r=ak(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`}}})]})),aP||{animation:`${aO} 3s infinite linear`}),aR=(0,e$.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t.bar1,t[`barColor${(0,tL.Z)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})((0,eN.Z)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter((0,tz.Z)()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:"transform .4s linear"}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .4s linear"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:aS||{animation:`${aj} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),aZ=(0,e$.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.bar,t.bar2,t[`barColor${(0,tL.Z)(r.color)}`],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})((0,eN.Z)(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter((0,tz.Z)()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"!==e.color,style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>"buffer"!==e.variant&&"inherit"===e.color,style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter((0,tz.Z)()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:ak(e,t),transition:"transform .4s linear"}})),{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:{width:"auto"}},{props:({ownerState:e})=>"indeterminate"===e.variant||"query"===e.variant,style:aD||{animation:`${aC} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),aA=h.forwardRef(function(e,t){let r=(0,eH.i)({props:e,name:"MuiLinearProgress"}),{className:n,color:a="primary",value:o,valueBuffer:s,variant:l="indeterminate",...u}=r,d={...r,color:a,variant:l},c=(e=>{let{classes:t,variant:r,color:n}=e,i={root:["root",`color${(0,tL.Z)(n)}`,r],dashed:["dashed",`dashedColor${(0,tL.Z)(n)}`],bar1:["bar","bar1",`barColor${(0,tL.Z)(n)}`,("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==r&&`barColor${(0,tL.Z)(n)}`,"buffer"===r&&`color${(0,tL.Z)(n)}`,("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,eT.Z)(i,aw,t)})(d),p=(0,av.V)(),f={},h={},g={};if(("determinate"===l||"buffer"===l)&&void 0!==o){f["aria-valuenow"]=Math.round(o),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let e=o-100;p&&(e=-e),h.transform=`translateX(${e}%)`}if("buffer"===l&&void 0!==s){let e=(s||0)-100;p&&(e=-e),g.transform=`translateX(${e}%)`}return(0,i.jsxs)(aE,{className:(0,eL.Z)(c.root,n),ownerState:d,role:"progressbar",...f,ref:t,...u,children:["buffer"===l?(0,i.jsx)(aM,{className:c.dashed,ownerState:d}):null,(0,i.jsx)(aR,{className:c.bar1,ownerState:d,style:h}),"determinate"===l?null:(0,i.jsx)(aZ,{className:c.bar2,ownerState:d,style:g})]})});function aV({name:e,source:t}){let r=rd(e,t),n=r.definition?.kind;switch(n){case"TextVariable":return(0,i.jsx)(aT,{name:e,source:t});case"ListVariable":return(0,i.jsx)(a_,{name:e,source:t})}return(0,i.jsxs)("div",{children:["Unsupported Variable Kind: $",n]})}function aI(e,t,r){let n=e?.allowMultiple===!0,i=e?.allowAllValue===!0,a=e?.sort,o=(0,h.useMemo)(()=>r.isFetching??!1,[r.isFetching]),s=(0,h.useMemo)(()=>r.data??[],[r.data]),l=t?.value;n&&!Array.isArray(l)&&(l="string"==typeof l?[l]:[]);let u=(0,h.useMemo)(()=>{let e=s?[...s]:[];if(!a||"none"===a)return e;switch(a){case"alphabetical-asc":return e.sort((e,t)=>e.label>t.label?1:-1);case"alphabetical-desc":return e.sort((e,t)=>e.label>t.label?-1:1);case"numerical-asc":return e.sort((e,t)=>parseInt(e.label)>parseInt(t.label)?1:-1);case"numerical-desc":return e.sort((e,t)=>parseInt(e.label)<parseInt(t.label)?1:-1);case"alphabetical-ci-asc":return e.sort((e,t)=>e.label.toLowerCase()>t.label.toLowerCase()?1:-1);case"alphabetical-ci-desc":return e.sort((e,t)=>e.label.toLowerCase()>t.label.toLowerCase()?-1:1);default:return e}},[s,a]),d=(0,h.useMemo)(()=>{let e=u;return i&&(e=[{value:t7.x,label:"All"},...e]),e},[i,u]),c=(0,h.useMemo)(()=>!!d.find(e=>n?l.includes(e.value):l===e.value),[d,l,n]);l=(0,h.useMemo)(()=>{let e=d?.[+!!i]?.value;return!e||c&&l&&0!==l.length?l:n?[e]:e},[d,l,c,n,i]);let p=(0,h.useMemo)(()=>Array.isArray(l)?d.filter(e=>l?.includes(e.value)):d.find(e=>l===e.value)??{value:"",label:""},[l,d]);return{value:l,loading:o,options:s,selectedOptions:p,viewOptions:d}}let aL=e=>(0,i.jsx)(am.Z,{...e,sx:{minWidth:"fit-content"},placement:"bottom-start"}),az=(e,t)=>{let r=(e.length+1)*8+40*("list"===t);return r<120?120:r>500?500:r};function a_({name:e,source:t}){let r=rd(e,t),n=r.definition,a=(0,R.useListVariablePluginValues)(n),{setVariableValue:o,setVariableLoading:s,setVariableOptions:l}=rc(),{selectedOptions:u,value:d,loading:c,options:p,viewOptions:f}=aI(n?.spec,r.state,a),[g,m]=(0,h.useState)(120),[y,b]=(0,h.useState)(""),v=n?.spec.display?.name??e,x=n?.spec.allowMultiple===!0,w=n?.spec.allowAllValue===!0;return(0,h.useEffect)(()=>{d&&o(e,d,t)},[o,e,d,t]),(0,h.useEffect)(()=>{s(e,c,t)},[s,e,c,t]),(0,h.useEffect)(()=>{p&&l(e,p,t)},[l,e,p,t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ay.Z,{disablePortal:!0,disableCloseOnSelect:x,multiple:x,fullWidth:!0,limitTags:3,size:"small",disableClearable:!0,slots:{popper:aL},renderInput:e=>x?(0,i.jsx)(ab.Z,{...e,label:v,onChange:e=>b(e.target.value)}):(0,i.jsx)(ab.Z,{...e,label:v,style:{width:`${g}px`}}),sx:{"& .MuiInputBase-root":{minHeight:"38px"},"& .MuiAutocomplete-tag":{margin:"1px 2px"}},value:u,onChange:(r,n)=>{if((null===n||Array.isArray(n)&&0===n.length)&&w)o(e,t7.x,t);else o(e,null===n?null:Array.isArray(n)?n.map(e=>e.value):n.value,t)},inputValue:x?y:void 0,onInputChange:(e,t)=>{x||m(az(t,"list"))},onBlur:()=>{x&&b("")},options:f}),c&&(0,i.jsx)(aA,{})]})}function aT({name:e,source:t}){let r=rd(e,t),n=r.state,a=r.definition,[o,s]=(0,h.useState)(n?.value??""),[l,u]=(0,h.useState)(az(o,"text")),{setVariableValue:d}=rc();return(0,h.useEffect)(()=>{s(n?.value??"")},[n?.value]),(0,i.jsx)(ab.Z,{title:o,value:o,onChange:e=>{s(e.target.value),u(az(e.target.value,"text"))},onBlur:()=>d(e,o,t),placeholder:e,label:a?.spec.display?.name??e,slotProps:{input:{readOnly:a?.spec.constant??!1}},sx:{width:`${l}px`,"& .MuiInputBase-root":{minHeight:"38px"},"& .MuiInputBase-input":{textOverflow:"ellipsis"}}})}function a$(){let e=rp(),t=rf();return(0,i.jsxs)(i.Fragment,{children:[t.slice().reverse().map(e=>e.definitions.map(t=>(0,i.jsx)(aN,{spec:t.spec,source:e.source},t.spec.name+e.source))),e.map(e=>(0,i.jsx)(aN,{spec:e.spec},e.spec.name))]})}function aN({spec:e,source:t}){let r=rd(e.name,t);return r.state?.overridden?null:(0,i.jsx)(eA.Z,{display:e.display?.hidden?"none":void 0,minWidth:"120px",maxWidth:"500px",flexShrink:0,"data-testid":"variable-"+e.name,children:(0,i.jsx)(aV,{name:e.name,source:t},(e.name+t)??"")},(e.name+t)??"")}function aH(e){let[t,r]=(0,h.useState)(e.initialVariableIsSticky),n=function(e={}){let{getTrigger:t=al,target:r=au,...n}=e,i=h.useRef(),[a,o]=h.useState(()=>t(i,n));return h.useEffect(()=>{if(null===r)return o(!1);let e=()=>{o(t(i,{target:r,...n}))};return e(),r.addEventListener("scroll",e,{passive:!0}),()=>{r.removeEventListener("scroll",e,{passive:!0})}},[r,t,JSON.stringify(n)]),a}({disableHysteresis:!0})&&e.initialVariableIsSticky&&t,a=(0,ne.Z)((0,eI.Z)().breakpoints.up("md"));return(0,i.jsx)(eA.Z,{marginBottom:-1,"data-testid":"variable-list",children:(0,i.jsx)(af,{color:"inherit",position:n?"fixed":"static",elevation:4*!!n,sx:{backgroundColor:"inherit",...e.sx},children:(0,i.jsxs)(eA.Z,{display:"flex",justifyContent:"space-between",sx:{flexDirection:a?"row":"column"},children:[(0,i.jsxs)(eA.Z,{display:"flex",flexWrap:!n&&a?"wrap":"nowrap",maxWidth:n||!a?"100vw":"100%",maxHeight:"150px",pt:1,pl:+!!n,mt:n&&a?.5:0,ml:n&&a?.5:0,sx:{overflowX:!n&&a?"hidden":"auto",scrollbarWidth:"thin","&::-webkit-scrollbar":{height:"8px",backgroundColor:e=>e.palette.grey["300"]},"&::-webkit-scrollbar-thumb":{background:e=>e.palette.grey["600"]}},gap:1,children:[(0,i.jsx)(a$,{}),e.initialVariableIsSticky&&(0,i.jsx)(e0.Z,{style:{width:"fit-content",height:"fit-content"},onClick:()=>r(!t),children:t?(0,i.jsx)(ah.default,{}):(0,i.jsx)(ag.default,{})})]}),n&&(0,i.jsx)(e1.Z,{m:a?1.5:1,mt:1.5*!!a,ml:a?1.5:"auto",direction:"row",justifyContent:"end",children:(0,i.jsx)(R.TimeRangeControls,{})})]})})})}let aB=e=>{let{dashboardName:t,dashboardTitleComponent:r,initialVariableIsSticky:n,isReadonly:o,isVariableEnabled:l,isDatasourceEnabled:u,onEditButtonClick:d,onCancelButtonClick:c,onSave:p}=e,{isEditMode:f}=J(),h=(0,ne.Z)((0,eI.Z)().breakpoints.up("sm")),g=(0,ne.Z)((0,eI.Z)().breakpoints.up("md")),m=r||(0,i.jsx)(eQ.Z,{variant:"h2",children:t});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(e1.Z,{"data-testid":"dashboard-toolbar",children:[(0,i.jsxs)(eA.Z,{px:2,py:1.5,display:"flex",sx:{backgroundColor:e=>e.palette.primary.main+(f?"30":"0")},children:[m,f?(0,i.jsxs)(e1.Z,{direction:"row",gap:1,ml:"auto",children:[o&&(0,i.jsx)(rb.Z,{severity:"warning",sx:{backgroundColor:"transparent",padding:0},children:"Dashboard managed via code only. Download JSON and commit changes to save."}),(0,i.jsxs)(e1.Z,{direction:"row",spacing:.5,ml:1,whiteSpace:"nowrap",children:[l&&(0,i.jsx)(r9,{}),u&&(0,i.jsx)(ai,{}),(0,i.jsx)(eZ,{}),(0,i.jsx)(eM,{})]}),(0,i.jsx)(as,{onSave:p,isDisabled:o}),(0,i.jsx)(a.Z,{variant:"outlined",onClick:c,children:"Cancel"})]}):(0,i.jsx)(i.Fragment,{children:h&&(0,i.jsx)(e1.Z,{direction:"row",gap:1,ml:"auto",children:(0,i.jsx)(r3,{onClick:d})})})]}),(0,i.jsxs)(eA.Z,{sx:{display:"flex",width:"100%",alignItems:"start",padding:e=>e.spacing(1,2,0,2),flexDirection:g?"row":"column",flexWrap:"nowrap",gap:1},children:[(0,i.jsx)(eA.Z,{width:"100%",children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(aH,{initialVariableIsSticky:n,sx:{backgroundColor:({palette:e})=>e.background.default}})})}),(0,i.jsx)(e1.Z,{direction:"row",ml:"auto",flexWrap:"wrap",justifyContent:"end",children:(0,i.jsxs)(e1.Z,{direction:"row",spacing:1,mt:1,ml:1,children:[(0,i.jsx)(R.TimeRangeControls,{}),(0,i.jsx)(ar,{}),(0,i.jsx)(ao,{isReadonly:!f})]})})]})]})})},aW=()=>{let{deletePanelDialog:e,closeDeletePanelDialog:t}=ey();return(0,i.jsxs)(s.Dialog,{open:void 0!==e,children:[(0,i.jsx)(s.Dialog.Header,{onClose:()=>t(),children:"Delete Panel"}),e&&(0,i.jsx)(aG,{deletePanelDialog:e})]})},aG=({deletePanelDialog:e})=>{let{deletePanel:t,closeDeletePanelDialog:r}=ey(),{setViewPanel:n}=ew();return(0,i.jsxs)("form",{onSubmit:i=>{i.preventDefault();let{panelGroupItemId:a}=e;t(a),r(),n(void 0)},children:[(0,i.jsxs)(s.Dialog.Content,{children:["Are you sure you want to delete ",e.panelName," from ",e.panelGroupName,"? This action cannot be undone."]}),(0,i.jsxs)(s.Dialog.Actions,{children:[(0,i.jsx)(s.Dialog.PrimaryButton,{children:"Delete"}),(0,i.jsx)(s.Dialog.SecondaryButton,{onClick:()=>r(),children:"Cancel"})]})]})};var aq=r(8361),aF=r(37645),aU=r(15495),aJ=r(68325),aY=r(42734);let aK=()=>{let{deletePanelGroupDialog:e,closeDeletePanelGroupDialog:t,deletePanelGroup:r}=ed(),{setViewPanel:n}=ew(),o=e?.panelGroupId;return(0,i.jsxs)(aq.Z,{open:void 0!==e,children:[(0,i.jsx)(aF.Z,{children:"Delete Panel Group"}),(0,i.jsx)(e0.Z,{"aria-label":"Close",onClick:()=>t(),sx:e=>({position:"absolute",top:e.spacing(.5),right:e.spacing(.5)}),children:(0,i.jsx)(aY.default,{})}),(0,i.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),void 0===o)throw Error("group index is undefined");r(o),t(),n(void 0)},children:[(0,i.jsxs)(aU.Z,{dividers:!0,sx:{width:"500px"},children:["Are you sure you want to delete ",e?.panelGroupName??"panel group","? This will delete all the panels within the group."]}),(0,i.jsxs)(aJ.Z,{children:[(0,i.jsx)(a.Z,{variant:"contained",type:"submit",children:"Delete"}),(0,i.jsx)(a.Z,{variant:"outlined",color:"secondary",onClick:()=>t(),children:"Cancel"})]})]})]})},aX=()=>{let{discardChangesConfirmationDialog:e}=eP();return void 0===e?null:(0,i.jsx)(s.DiscardChangesConfirmationDialog,{description:e.description||"You have unsaved changes in this dashboard. Are you sure you want to discard these changes? Changes cannot be recovered.",isOpen:!0,onCancel:e.onCancel,onDiscardChanges:e.onDiscardChanges})};var aQ=r(24846);let a0=e=>{let{isReadonly:t,disableMetadataEdition:r}=e,{editJsonDialog:n,closeEditJsonDialog:a}=eE();return(0,i.jsxs)(s.Dialog,{open:!!n?.isOpen,scroll:"paper",fullWidth:!0,maxWidth:"lg",children:[(0,i.jsxs)(s.Dialog.Header,{onClose:()=>a(),children:[!t&&"Edit "," Dashboard JSON"]}),n?.isOpen&&(0,i.jsx)(a1,{isReadonly:t,disableMetadataEdition:r})]})},a1=e=>{let{isReadonly:t,disableMetadataEdition:r}=e,{closeEditJsonDialog:n}=eE(),{setTimeRange:a,setRefreshInterval:o}=(0,R.useTimeRange)(),{dashboard:l,setDashboard:u}=at(),{setLocalDatasources:d}=(0,R.useDatasourceStore)(),[c,p]=(0,h.useState)(l),f=e=>{e.preventDefault(),u(c),a({pastDuration:c.spec.duration}),o(c.spec.refreshInterval??"0s"),d(c.spec.datasources??{}),n()};return(0,i.jsxs)(s.Dialog.Form,{onSubmit:f,children:[(0,i.jsxs)(s.Dialog.Content,{sx:{width:"100%"},children:[r&&!t&&(0,i.jsx)(rb.Z,{sx:{marginBottom:e=>e.spacing(1)},severity:"warning",children:"Metadata cannot be modified or saved."}),"EphemeralDashboard"===c.kind&&(0,i.jsx)(rb.Z,{sx:{marginBottom:1},severity:"warning",children:"Time-to-live cannot be modified or saved from here. Go to the project view to modify it."}),(0,i.jsx)(aQ.Z,{fullWidth:!0,children:(0,i.jsx)(s.JSONEditor,{minHeight:"300px",maxHeight:"70vh",value:c,onChange:e=>(e=>{try{let t=JSON.parse(e??"{}");p(t)}catch(e){}})(e),readOnly:t})})]}),!t&&(0,i.jsx)(s.Dialog.Actions,{children:(0,i.jsx)(s.Dialog.PrimaryButton,{onClick:f,children:"Apply"})})]})};var a2=r(87067),a9=r(97235),a3=r(15910);function a5({panelDefinition:e}){let t=(0,h.useRef)(null),r=840;null!==t.current&&(r=t.current.getBoundingClientRect().width);let n=(0,R.useSuggestedStepMs)(r),{data:a,isLoading:o}=(0,R.usePlugin)("Panel",e.spec.plugin.kind);if(o||""===e.spec.plugin.kind)return null;let s=e.spec.queries??[],l=s.length?s.map(e=>({kind:e.spec.plugin.kind,spec:e.spec.plugin.spec})):[];return(0,i.jsx)(eA.Z,{ref:t,height:300,children:(0,i.jsx)(R.DataQueriesProvider,{definitions:l,options:{suggestedStepMs:n,...a?.queryOptions},children:(0,i.jsx)(tX,{definition:e})})})}function a6(e){let{initialValues:t,initialAction:r,onSave:n,onClose:o}=e,l=et(),{panelDefinition:u,setName:d,setDescription:c,setLinks:p,setQueries:f,setPlugin:g,setPanelDefinition:m}=(e=>{let{display:t,plugin:r,queries:n,links:i}=e.spec,[a,o]=(0,h.useState)(t.name),[s,l]=(0,h.useState)(t.description),[u,d]=(0,h.useState)(i),[c,p]=(0,h.useState)(r),[f,g]=(0,h.useState)(n),[m,y]=(0,h.useState)(n),b=(0,h.useCallback)((e,t)=>{t?(g(m),y(void 0)):y(void 0===e?f:e)},[y,m,g,f]),v=(0,h.useCallback)(e=>{let{display:t,plugin:r,queries:n,links:i}=e.spec;o(t.name),l(t.description),d(i),p(r),b(n)},[o,l,d,p,b]);return(0,h.useMemo)(()=>({panelDefinition:{kind:"Panel",spec:{display:{name:a,description:s},plugin:c,queries:m,links:u}},setName:o,setDescription:l,setLinks:d,setQueries:b,setPlugin:p,setPanelDefinition:v}),[a,s,u,c,m,b,v])})(t.panelDefinition),{plugin:y}=u.spec,[b,v]=(0,h.useState)(!1),{panelEditorSchema:x}=(0,R.useValidationSchemas)(),w=(0,a9.useForm)({resolver:(0,a3.F)(x),mode:"onBlur",defaultValues:t}),j=(0,R.usePluginEditor)({pluginTypes:["Panel"],value:{selection:{kind:y.kind,type:"Panel"},spec:y.spec},onChange:e=>{w.setValue("panelDefinition.spec.plugin",{kind:e.selection.kind,spec:e.spec}),g({kind:e.selection.kind,spec:e.spec})},onHideQueryEditorChange:e=>{f(void 0,e)}}),S=(0,R.getTitleAction)(r,!0),C=(0,R.getSubmitText)(r,!0),D=(0,a9.useWatch)({control:w.control,name:"panelDefinition.spec.links"});(0,h.useEffect)(()=>{p(D)},[p,D]);let O=(0,a9.useWatch)({control:w.control,name:"panelDefinition.spec.display.name"}),P=(0,a9.useWatch)({control:w.control,name:"panelDefinition.spec.display.description"}),k=(0,a9.useWatch)({control:w.control,name:"panelDefinition.spec.plugin.kind"});return(0,i.jsxs)(a9.FormProvider,{...w,children:[(0,i.jsxs)(eA.Z,{sx:{display:"flex",alignItems:"center",padding:e=>e.spacing(1,2),borderBottom:e=>`1px solid ${e.palette.divider}`},children:[(0,i.jsxs)(eQ.Z,{variant:"h2",children:[S," Panel"]}),(0,i.jsxs)(e1.Z,{direction:"row",spacing:1,marginLeft:"auto",children:[(0,i.jsx)(a.Z,{variant:"contained",disabled:!w.formState.isValid,onClick:w.handleSubmit(e=>{n(e)}),children:C}),(0,i.jsx)(a.Z,{color:"secondary",variant:"outlined",onClick:function(){JSON.stringify(t)!==JSON.stringify(w.getValues())?v(!0):o()},children:"Cancel"})]})]}),(0,i.jsx)(eA.Z,{id:a8,sx:{flex:1,overflowY:"scroll",padding:e=>e.spacing(2)},children:(0,i.jsxs)(a2.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(a2.ZP,{item:!0,xs:8,children:(0,i.jsx)(a9.Controller,{control:w.control,name:"panelDefinition.spec.display.name",render:({field:e,fieldState:t})=>(0,i.jsx)(ab.Z,{...e,required:!0,fullWidth:!0,label:"Name",error:!!t.error,helperText:t.error?.message,value:O??"",onChange:t=>{e.onChange(t),d(t.target.value)}})})}),(0,i.jsx)(a2.ZP,{item:!0,xs:4,children:(0,i.jsx)(a9.Controller,{control:w.control,name:"groupId",render:({field:e,fieldState:t})=>(0,i.jsx)(ab.Z,{select:!0,...e,required:!0,fullWidth:!0,label:"Group",error:!!t.error,helperText:t.error?.message,onChange:t=>{e.onChange(t)},children:l.map((e,t)=>(0,i.jsx)(tA.Z,{value:e.id,children:e.title??`Group ${t+1}`},e.id))})})}),(0,i.jsx)(a2.ZP,{item:!0,xs:8,children:(0,i.jsx)(a9.Controller,{control:w.control,name:"panelDefinition.spec.display.description",render:({field:e,fieldState:t})=>(0,i.jsx)(ab.Z,{...e,fullWidth:!0,label:"Description",error:!!t.error,helperText:t.error?.message,value:P??"",onChange:t=>{e.onChange(t),c(t.target.value)}})})}),(0,i.jsx)(a2.ZP,{item:!0,xs:4,children:(0,i.jsx)(a9.Controller,{control:w.control,name:"panelDefinition.spec.plugin.kind",render:({field:e,fieldState:t})=>(0,i.jsx)(R.PluginKindSelect,{...e,pluginTypes:["Panel"],required:!0,fullWidth:!0,label:"Type",disabled:j.isLoading,error:!!j.error||!!t.error,helperText:j.error?.message??t.error?.message,value:{type:"Panel",kind:k},onChange:t=>{e.onChange(t.kind),j.onSelectionChange(t)}})})}),(0,i.jsxs)(a2.ZP,{item:!0,xs:12,children:[(0,i.jsx)(eQ.Z,{variant:"h4",marginBottom:1,children:"Preview"}),(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(a5,{panelDefinition:u})})]}),(0,i.jsx)(a2.ZP,{item:!0,xs:12,children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(R.PanelSpecEditor,{control:w.control,panelDefinition:u,onJSONChange:e=>{let t=JSON.parse(e),{kind:r,spec:n}=t.spec.plugin;u.spec.plugin.kind!==r&&JSON.stringify(u.spec.plugin.spec)!==JSON.stringify(n)&&j.rememberCurrentSpecState(),m(t)},onQueriesChange:e=>{f(e)},onPluginSpecChange:e=>{j.onSpecChange(e)}})})})]})}),(0,i.jsx)(s.DiscardChangesConfirmationDialog,{description:"You have unapplied changes in this panel. Are you sure you want to discard these changes? Changes cannot be recovered.",isOpen:b,onCancel:()=>{v(!1)},onDiscardChanges:()=>{v(!1),o()}})]})}let a8="panel-editor-form",a4=()=>{let e=eg(),[t,r]=(0,h.useState)(!1),n=void 0!==e&&!1===t;return(0,i.jsx)(s.Drawer,{isOpen:n,onClose:()=>{},SlideProps:{onExited:()=>{e?.close(),r(!1)}},"data-testid":"panel-editor",children:e&&(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(a6,{initialAction:e.mode,initialValues:e.initialValues,onSave:function(t){if(void 0===e||void 0===t)throw Error("Cannot apply changes");e.applyChanges(t),r(!0)},onClose:()=>{r(!0)}})})})};var a7=r(37267),oe=r(86034);function ot(e){let{initialValues:t,onSubmit:r}=e,[n,a]=(0,h.useState)(t.title),[o,s]=(0,h.useState)(t.isCollapsed);return(0,i.jsxs)("form",{id:or,onSubmit:e=>{e.preventDefault(),r({title:n,isCollapsed:o})},children:[(0,i.jsx)(aQ.Z,{fullWidth:!0,margin:"normal",children:(0,i.jsx)(ab.Z,{required:!0,label:"Name",variant:"outlined",value:n,onChange:e=>a(e.target.value)})}),(0,i.jsxs)(aQ.Z,{fullWidth:!0,margin:"normal",children:[(0,i.jsx)(a7.Z,{id:"select-collapse-state",children:"Collapse State"}),(0,i.jsxs)(oe.Z,{required:!0,displayEmpty:!0,labelId:"select-collapse-state",label:"Collapse State",size:"small",value:o?"Closed":"Open",onChange:e=>{s("Closed"===e.target.value)},children:[(0,i.jsx)(tA.Z,{value:"Open",children:"Open"}),(0,i.jsx)(tA.Z,{value:"Closed",children:"Closed"})]})]})]})}let or="panel-group-editor-form";function on(){let e=el(),[t,r]=(0,h.useState)(!1),n=void 0!==e&&!1===t;return(0,i.jsx)(aq.Z,{open:n,TransitionProps:{onExited:()=>{e?.close(),r(!1)}},children:void 0!==e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(aF.Z,{children:[e.mode," Panel Group"]}),(0,i.jsx)(e0.Z,{"aria-label":"Close",onClick:e.close,sx:e=>({position:"absolute",top:e.spacing(.5),right:e.spacing(.5)}),children:(0,i.jsx)(aY.default,{})}),(0,i.jsx)(aU.Z,{dividers:!0,sx:{width:"500px"},children:(0,i.jsx)(ot,{initialValues:e.initialValues,onSubmit:t=>{if(void 0===e)throw Error("Cannot apply changes");e.applyChanges(t),r(!0)}})}),(0,i.jsxs)(aJ.Z,{children:[(0,i.jsx)(a.Z,{variant:"contained",type:"submit",form:or,children:"Edit"===e.mode?"Apply":"Add"}),(0,i.jsx)(a.Z,{variant:"outlined",color:"secondary",onClick:e.close,children:"Cancel"})]})]})})}var oi=r(75343);function oa(e){let{showTotalQueries:t=!0}=e,r=(0,R.useDatasourceClient)({kind:"PrometheusDatasource"}),{absoluteTimeRange:n}=(0,R.useTimeRange)(),o=(0,oi.useQueryClient)().getQueryCache().findAll(),s=o.filter(e=>"loading"===e.state.status),l=o.filter(e=>"success"===e.state.status),u=(0,R.useActiveTimeSeriesQueries)();if(!0===r.isLoading)return null;let d=[];return u.forEach(e=>{let t=e.state.data;if(t&&t.metadata?.notices){let r=e.queryKey,n=t.metadata.notices[0]?.message;n&&d.push({query:String(r[0].spec.plugin.spec.query),summary:n})}}),(0,i.jsxs)(e1.Z,{spacing:1,mb:2,sx:{maxWidth:1e3},children:[(0,i.jsxs)(eA.Z,{sx:{p:1},children:[(0,i.jsx)(eQ.Z,{variant:"h2",mb:1,children:"Query Summary"}),(0,i.jsx)(rv.Z,{component:rD.Z,children:(0,i.jsxs)(rx.Z,{size:"small","aria-label":"query summary table",children:[(0,i.jsx)(rw.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{children:"Queries Loading"}),(0,i.jsx)(rW.Z,{children:"Recent Time Series Queries"}),t&&(0,i.jsx)(rW.Z,{children:"Total Queries"}),(0,i.jsx)(rW.Z,{children:"Start Time"}),(0,i.jsx)(rW.Z,{children:"End Time"})]})}),(0,i.jsx)(rS.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{children:s.length}),(0,i.jsx)(rW.Z,{children:u.length}),t&&(0,i.jsx)(rW.Z,{children:l.length}),(0,i.jsx)(rW.Z,{children:n.start.toString()}),(0,i.jsx)(rW.Z,{children:n.end.toString()})]})})]})})]}),d.length>0&&(0,i.jsxs)(eA.Z,{sx:{p:1,m:0},children:[(0,i.jsx)(eQ.Z,{variant:"h3",mb:1,children:"Warnings"}),(0,i.jsx)(rv.Z,{component:rD.Z,sx:{mb:2},children:(0,i.jsxs)(rx.Z,{size:"small","aria-label":"query warnings table",children:[(0,i.jsx)(rw.Z,{children:(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{children:"Query"}),(0,i.jsx)(rW.Z,{children:"Summary"})]})}),(0,i.jsx)(rS.Z,{children:d.map((e,t)=>(0,i.jsxs)(rj.Z,{children:[(0,i.jsx)(rW.Z,{children:e.query}),(0,i.jsx)(rW.Z,{children:e.summary})]},t))})]})}),(0,i.jsx)(a.Z,{disabled:!0,variant:"outlined",children:"TODO: Action Button"})]})]})}var oo=r(18401),os=r(4559),ol=r(66583),ou=r(19524);let od=()=>{let{saveChangesConfirmationDialog:e}=eD(),t=e?.isSavedDurationModified??!0,r=e?.isSavedVariableModified??!0,[n,a]=(0,h.useState)(t),[o,l]=(0,h.useState)(r),{getSavedVariablesStatus:u}=rc(),{modifiedVariableNames:d}=u(),c=void 0!==e,{timeRange:p}=(0,R.useTimeRange)(),f=(0,re.s3)(p)?`(Last ${p.pastDuration})`:"(Absolute time ranges can not be saved)",g=`Save current time range as new default ${f}`,m=`Save current variable values as new default (${d.length>0?d.join(", "):"No modified variables"})`;return(0,i.jsx)(s.Dialog,{open:c,children:void 0!==e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Dialog.Header,{onClose:()=>e.onCancel(),children:"Save Dashboard"}),(0,i.jsxs)(s.Dialog.Content,{children:[(0,i.jsx)(eQ.Z,{marginBottom:2,children:e.description||ou.R}),(0,i.jsxs)(oo.Z,{children:[(0,i.jsx)(os.Z,{control:(0,i.jsx)(ol.Z,{disabled:!t||!(0,re.s3)(p),checked:n&&t&&(0,re.s3)(p),onChange:e=>a(e.target.checked)}),label:g}),(0,i.jsx)(os.Z,{control:(0,i.jsx)(ol.Z,{disabled:!r,checked:o&&r,onChange:e=>l(e.target.checked)}),label:m})]})]}),(0,i.jsxs)(s.Dialog.Actions,{children:[(0,i.jsx)(s.Dialog.PrimaryButton,{onClick:()=>e.onSaveChanges(n,o),children:"Save Changes"}),(0,i.jsx)(s.Dialog.SecondaryButton,{onClick:()=>e.onCancel(),children:"Cancel"})]})]})})};var oc=r(9780);function op(e){let{projectName:t,datasourceApi:r,onCreate:n,children:a}=e,[o,s]=(0,h.useState)(e.dashboardResource),[l,u]=(0,h.useState)(e.savedDatasources??{}),d=t??o?.metadata.project,{getPlugin:c,listPluginMetadata:p}=(0,R.usePluginRegistry)(),f=(0,oc.z)(async e=>{if(o){let{datasources:t}=o.spec,n=function(e,t){if(void 0===e)return;if(void 0!==t.name){let r=e[t.name];if(void 0===r)return;return r.plugin.kind===t.kind?{name:t.name,spec:r}:void 0}let r=Object.entries(e).find(e=>e[1].plugin.kind===t.kind&&e[1].default);if(r)return{name:r[0],spec:r[1]}}(t,e);if(void 0!==n)return{spec:n.spec,proxyUrl:of(r,{project:o.metadata.project,dashboard:o.metadata.name,name:n.name})}}if(d){let t=await r.getDatasource(d,e);if(void 0!==t)return{spec:t.spec,proxyUrl:of(r,{project:t.metadata.project,name:t.metadata.name})}}let t=await r.getGlobalDatasource(e);if(void 0!==t)return{spec:t.spec,proxyUrl:of(r,{name:t.metadata.name})};throw Error(`No datasource found for kind '${e.kind}' and name '${e.name}'`)}),g=(0,h.useCallback)(async e=>{let{spec:t}=await f(e);return t},[f]),m=(0,h.useCallback)(async function(e){let{kind:t}=e,[{spec:r,proxyUrl:i},a]=await Promise.all([f(e),c("Datasource",t)]),o=a.createClient(r.plugin.spec,{proxyUrl:i});return void 0!==n?n(o):o},[f,c,n]),y=(0,oc.z)(async e=>{let[t,n,i]=await Promise.all([p(["Datasource"]),d?r.listDatasources(d,e):[],r.listGlobalDatasources(e)]),a=t.find(t=>t.spec.name===e);if(void 0===a)throw Error(`Could not find a Datasource plugin with kind '${e}'`);let{results:s,addItem:u}=function(e){let t=[],r=new Set,n=!0,i=!1,a={},o=1;return{results:t,addItem:({spec:s,selectorName:l,selectorGroup:u,editLink:d,saved:c})=>{u=u??"",n&&t.push({group:`Default ${e}`,items:[]});let p=t[a[u]??-1];!p&&(a[u]=o,p={items:[],group:u,editLink:d},t[o]=p,o++);let f=r.has(l);p.items.push({name:s.display?.name??l,overridden:f,saved:c,selector:{kind:s.plugin.kind,name:l,group:u}}),r.add(l);let h=!f&&s.default&&!i;if(t[0]&&(n||h)&&(t[0].items=[{name:`Default (${l} from ${u})`,selector:{kind:s.plugin.kind}}],i=h),f)for(let e=+!!i;e<o;e++)(t[e]?.items??[]).filter(e=>e.selector.name===l).forEach(e=>{e.overriding=!0});n=!1}}}(a.spec.display.name);if(o?.spec.datasources)for(let t in o.spec.datasources){let r=o.spec.datasources[t];if(void 0===r||r.plugin.kind!==e)continue;let n=t in l;u({spec:r,selectorName:t,selectorGroup:"dashboard",saved:n})}for(let e of n){let t=e.metadata.name;u({spec:e.spec,selectorName:t,selectorGroup:"project",editLink:`/projects/${d}/datasources`})}for(let e of i){let t=e.metadata.name;u({spec:e.spec,selectorName:t,selectorGroup:"global",editLink:"/admin/datasources"})}return s}),b=(0,h.useCallback)(()=>o?.spec.datasources??{},[o]),v=(0,h.useCallback)(()=>l,[l]),x=(0,h.useCallback)(e=>{o&&s((o.kind,{...o,spec:{...o.spec,datasources:e}}))},[o]),w=(0,h.useMemo)(()=>({getDatasource:g,getDatasourceClient:m,getLocalDatasources:b,setLocalDatasources:x,setSavedDatasources:u,getSavedDatasources:v,listDatasourceSelectItems:y}),[g,m,b,x,y,u,v]);return(0,i.jsx)(R.DatasourceStoreContext.Provider,{value:w,children:a})}function of(e,t){return e.buildProxyUrl?e.buildProxyUrl(t):""}function oh({children:e,initialState:t}){let[r,n]=(0,ri.useQueryParam)("viewPanelRef",ri.StringParam);return(0,i.jsx)(q,{initialState:{viewPanelRef:r??void 0,setViewPanelRef:n,...t},children:e})}let og=e=>{let{dashboardResource:t,dashboardTitleComponent:r,emptyDashboardProps:n,onSave:a,onDiscard:o,initialVariableIsSticky:l,isReadonly:u,isVariableEnabled:d,isDatasourceEnabled:c,isCreating:p}=e,f=(0,s.useChartsTheme)(),{isEditMode:g,setEditMode:m}=J(),{dashboard:y,setDashboard:b}=at(),[v,x]=(0,h.useState)(void 0),{setSavedDatasources:w}=(0,R.useDatasourceStore)(),{openDiscardChangesConfirmationDialog:j,closeDiscardChangesConfirmationDialog:S}=eP(),C=()=>{m(!0),x(y),w(y.spec.datasources??{})};return(0,i.jsxs)(eA.Z,{sx:{flexGrow:1,overflowX:"hidden",overflowY:"auto",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(aB,{dashboardName:t.metadata.name,dashboardTitleComponent:r,initialVariableIsSticky:l,onSave:a,isReadonly:u,isVariableEnabled:d,isDatasourceEnabled:c,onEditButtonClick:C,onCancelButtonClick:()=>{JSON.stringify(y)===JSON.stringify(v)?m(!1):j({onDiscardChanges:()=>{v&&b(v),m(!1),S(),o&&o(y)},onCancel:()=>{S()}})}}),(0,i.jsxs)(eA.Z,{sx:{paddingTop:2,paddingX:2,height:"100%"},children:[(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(r7,{emptyDashboardProps:{onEditButtonClick:C,...n}})}),(0,i.jsx)(s.ChartsProvider,{chartsTheme:f,enablePinning:!1,enableSyncGrouping:!1,children:(0,i.jsx)(a4,{})}),(0,i.jsx)(on,{}),(0,i.jsx)(aK,{}),(0,i.jsx)(aW,{}),(0,i.jsx)(aX,{}),(0,i.jsx)(a0,{isReadonly:!g,disableMetadataEdition:!p}),(0,i.jsx)(od,{})]})]})};function om(e){let{dashboardResource:t,datasourceApi:r,externalVariableDefinitions:n,dashboardTitleComponent:a,emptyDashboardProps:o,onSave:l,onDiscard:u,initialVariableIsSticky:d,isReadonly:c,isVariableEnabled:p,isDatasourceEnabled:f,isEditing:g,isCreating:m,sx:y,...b}=e,{spec:v}=t,x=v.duration??M.U,w=v.refreshInterval??M.Q,j=(0,R.useInitialTimeRange)(x),S=(0,R.useInitialRefreshInterval)(w),{data:C}=(0,R.usePluginBuiltinVariableDefinitions)(),D=(0,h.useMemo)(()=>{let e=[{kind:"BuiltinVariable",spec:{name:"__dashboard",value:()=>t.metadata.name,source:"Dashboard",display:{name:"__dashboard",description:"The name of the current dashboard",hidden:!0}}},{kind:"BuiltinVariable",spec:{name:"__project",value:()=>t.metadata.project,source:"Dashboard",display:{name:"__project",description:"The name of the current dashboard project",hidden:!0}}}];return C&&C.forEach(t=>e.push(t)),e},[t.metadata.name,t.metadata.project,C]);return(0,i.jsx)(op,{dashboardResource:t,datasourceApi:r,children:(0,i.jsx)(oh,{initialState:{dashboardResource:t,isEditMode:!!g},children:(0,i.jsx)(R.TimeRangeProviderWithQueryParams,{initialTimeRange:j,initialRefreshInterval:S,children:(0,i.jsx)(ry,{initialVariableDefinitions:v.variables,externalVariableDefinitions:n,builtinVariableDefinitions:D,children:(0,i.jsx)(eA.Z,{sx:(0,s.combineSx)({display:"flex",width:"100%",height:"100%",position:"relative",overflow:"hidden"},y),...b,children:(0,i.jsx)(s.ErrorBoundary,{FallbackComponent:s.ErrorAlert,children:(0,i.jsx)(og,{dashboardResource:t,dashboardTitleComponent:a,emptyDashboardProps:o,onSave:l,onDiscard:u,initialVariableIsSticky:d,isReadonly:c,isVariableEnabled:p,isDatasourceEnabled:f,isCreating:m})})})})})})})}},57966:function(e){function t(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}e.exports=t,e.exports.clsx=t},58367:function(e,t){(function(e){"use strict";function t(e){return function(t,r,n,i,a,o,s){return e(t,r,s)}}function r(e){return function(t,r,n,i){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n,i);var a=i.get(t),o=i.get(r);if(a&&o)return a===r&&o===t;i.set(t,r),i.set(r,t);var s=e(t,r,n,i);return i.delete(t),i.delete(r),s}}function n(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function i(e){return e.constructor===Object||null==e.constructor}function a(e){return"function"==typeof e.then}function o(e,t){return e===t||e!=e&&t!=t}var s=Object.prototype.toString;function l(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,l=e.areObjectsEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,c=(0,e.createIsNestedEqual)(p);function p(e,p,f){if(e===p)return!0;if(!e||!p||"object"!=typeof e||"object"!=typeof p)return e!=e&&p!=p;if(i(e)&&i(p))return l(e,p,c,f);var h=Array.isArray(e),g=Array.isArray(p);if(h||g)return h===g&&t(e,p,c,f);var m=s.call(e);return m===s.call(p)&&("[object Date]"===m?r(e,p,c,f):"[object RegExp]"===m?u(e,p,c,f):"[object Map]"===m?n(e,p,c,f):"[object Set]"===m?d(e,p,c,f):"[object Object]"===m||"[object Arguments]"===m?!(a(e)||a(p))&&l(e,p,c,f):("[object Boolean]"===m||"[object Number]"===m||"[object String]"===m)&&o(e.valueOf(),p.valueOf()))}return p}function u(e,t,r,n){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!r(e[i],t[i],i,i,e,t,n))return!1;return!0}var d=r(u);function c(e,t){return o(e.valueOf(),t.valueOf())}function p(e,t,r,n){var i=e.size===t.size;if(!i)return!1;if(!e.size)return!0;var a={},o=0;return e.forEach(function(s,l){if(i){var u=!1,d=0;t.forEach(function(i,c){!u&&!a[d]&&(u=r(l,c,o,d,e,t,n)&&r(s,i,l,c,e,t,n))&&(a[d]=!0),d++}),o++,i=u}}),i}var f=r(p),h=Object.prototype.hasOwnProperty;function g(e,t,r,n){var i,a=Object.keys(e),o=a.length;if(Object.keys(t).length!==o)return!1;for(;o-- >0;){if("_owner"===(i=a[o])){var s=!!e.$$typeof,l=!!t.$$typeof;if((s||l)&&s!==l)return!1}if(!h.call(t,i)||!r(e[i],t[i],i,i,e,t,n))return!1}return!0}var m=r(g);function y(e,t){return e.source===t.source&&e.flags===t.flags}function b(e,t,r,n){var i=e.size===t.size;if(!i)return!1;if(!e.size)return!0;var a={};return e.forEach(function(o,s){if(i){var l=!1,u=0;t.forEach(function(i,d){!l&&!a[u]&&(l=r(o,i,s,d,e,t,n))&&(a[u]=!0),u++}),i=l}}),i}var v=r(b),x=Object.freeze({areArraysEqual:u,areDatesEqual:c,areMapsEqual:p,areObjectsEqual:g,areRegExpsEqual:y,areSetsEqual:b,createIsNestedEqual:t}),w=Object.freeze({areArraysEqual:d,areDatesEqual:c,areMapsEqual:f,areObjectsEqual:m,areRegExpsEqual:y,areSetsEqual:v,createIsNestedEqual:t}),j=l(x),S=l(n(x,{createIsNestedEqual:function(){return o}})),C=l(w),D=l(n(w,{createIsNestedEqual:function(){return o}}));e.circularDeepEqual=function(e,t){return C(e,t,new WeakMap)},e.circularShallowEqual=function(e,t){return D(e,t,new WeakMap)},e.createCustomCircularEqual=function(e){var t=l(n(w,e(w)));return function(e,r,n){return void 0===n&&(n=new WeakMap),t(e,r,n)}},e.createCustomEqual=function(e){return l(n(x,e(x)))},e.deepEqual=function(e,t){return j(e,t,void 0)},e.sameValueZeroEqual=o,e.shallowEqual=function(e,t){return S(e,t,void 0)},Object.defineProperty(e,"__esModule",{value:!0})})(t)},48075:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z","Alert")},33460:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M19.5,3.09L15,7.59V4H13V11H20V9H16.41L20.91,4.5L19.5,3.09M4,13V15H7.59L3.09,19.5L4.5,20.91L9,16.41V20H11V13H4Z","ArrowCollapse")},78584:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z","ArrowDown")},32977:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z","ArrowExpand")},26317:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z","ArrowUp")},65520:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M22 5V7H19V10H17V7H14V5H17V2H19V5H22M19 19H5V5H11V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V13H19V19M15 13V17H17V13H15M11 17H13V9H11V17M9 17V11H7V17H9Z","ChartBoxPlusOutline")},23246:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z","ChevronUp")},78270:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z","CodeBraces")},90738:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z","ContentCopy")},23706:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z","ContentDuplicate")},7434:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z","DownloadOutline")},47612:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z","DragVertical")},44939:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z","Launch")},84022:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z","Menu")},22284:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z","Pencil")},3690:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z","PencilOutline")},47511:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M8,6.2V4H7V2H17V4H16V12L18,14V16H17.8L14,12.2V4H10V8.2L8,6.2M20,20.7L18.7,22L12.8,16.1V22H11.2V16H6V14L8,12V11.3L2,5.3L3.3,4L20,20.7M8.8,14H10.6L9.7,13.1L8.8,14Z","PinOffOutline")},96346:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M19,19V5H5V19H19M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5C3,3.89 3.9,3 5,3H19M11,7H13V11H17V13H13V17H11V13H7V11H11V7Z","PlusBoxOutline")},83829:function(e,t,r){"use strict";var n;t.default=void 0,t.default=(0,((n=r(65129))&&n.__esModule?n:{default:n}).default)("M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z","TrashCan")},75668:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var n=f(r(2388)),i=p(r(45697)),a=p(r(63822)),o=r(57966),s=r(81825),l=r(2849),u=r(9280),d=p(r(80783)),c=p(r(55904));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(f=function(e,t){if(!t&&e&&e.__esModule)return e;var i,a,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((a=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(a.get||a.set)?i(o,t,a):o[t]=e[t]);return o})(e,t)}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function g(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m extends n.Component{static getDerivedStateFromProps(e,t){let{position:r}=e,{prevPropsPosition:n}=t;return r&&(!n||r.x!==n.x||r.y!==n.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:{...r}}):null}constructor(e){super(e),g(this,"onDragStart",(e,t)=>{if((0,c.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",t);let r=(0,l.createDraggableData)(this,t),n={x:r.x,y:r.y,slackX:0,slackY:0};if(this.props.bounds){let{x:e,y:t}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;let[i,a]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=i,n.y=a,n.slackX=this.state.slackX+(e-n.x),n.slackY=this.state.slackY+(t-n.y),r.x=n.x,r.y=n.y,r.deltaX=n.x-this.state.x,r.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(e,r))return!1;this.setState(n)}),g(this,"onDragStop",(e,t)=>{if(!this.state.dragging||!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,c.default)("Draggable: onDragStop: %j",t);let r={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:e,y:t}=this.props.position;r.x=e,r.y=t}this.setState(r)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??a.default.findDOMNode(this)}render(){let{axis:e,bounds:t,children:r,defaultPosition:i,defaultClassName:a,defaultClassNameDragging:u,defaultClassNameDragged:c,position:p,positionOffset:f,scale:g,...m}=this.props,y={},b=null,v=!p||this.state.dragging,x=p||i,w={x:(0,l.canDragX)(this)&&v?this.state.x:x.x,y:(0,l.canDragY)(this)&&v?this.state.y:x.y};this.state.isElementSVG?b=(0,s.createSVGTransform)(w,f):y=(0,s.createCSSTransform)(w,f);let j=(0,o.clsx)(r.props.className||"",a,{[u]:this.state.dragging,[c]:this.state.dragged});return n.createElement(d.default,h({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:j,style:{...r.props.style,...y},transform:b}))}}t.default=m,g(m,"displayName","Draggable"),g(m,"propTypes",{...d.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),g(m,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},80783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r(2388)),i=d(r(45697)),a=d(r(63822)),o=r(81825),s=r(2849),l=r(9280),u=d(r(55904));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(c=function(e,t){if(!t&&e&&e.__esModule)return e;var i,a,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((a=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(a.get||a.set)?i(o,t,a):o[t]=e[t]);return o})(e,t)}function p(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let f={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"},g=h;class m extends n.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;let t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,o.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,o.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"!==e.type||this.props.allowMobileScroll||e.preventDefault();let n=(0,o.getTouchIdentifier)(e);this.touchIdentifier=n;let i=(0,s.getControlPosition)(e,n,this);if(null==i)return;let{x:a,y:l}=i,d=(0,s.createCoreData)(this,a,l);(0,u.default)("DraggableCore: handleDragStart: %j",d),(0,u.default)("calling",this.props.onStart),!1!==this.props.onStart(e,d)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,o.addUserSelectStyles)(r),this.dragging=!0,this.lastX=a,this.lastY=l,(0,o.addEvent)(r,g.move,this.handleDrag),(0,o.addEvent)(r,g.stop,this.handleDragStop))}),p(this,"handleDrag",e=>{let t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX,t=n-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;r=this.lastX+e,n=this.lastY+t}let i=(0,s.createCoreData)(this,r,n);if((0,u.default)("DraggableCore: handleDrag: %j",i),!1===this.props.onDrag(e,i)||!1===this.mounted){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(t){let e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}return}this.lastX=r,this.lastY=n}),p(this,"handleDragStop",e=>{if(!this.dragging)return;let t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX||0,t=n-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),r=this.lastX+e,n=this.lastY+t}let i=(0,s.createCoreData)(this,r,n);if(!1===this.props.onStop(e,i)||!1===this.mounted)return!1;let a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,o.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,u.default)("DraggableCore: Removing handlers"),(0,o.removeEvent)(a.ownerDocument,g.move,this.handleDrag),(0,o.removeEvent)(a.ownerDocument,g.stop,this.handleDragStop))}),p(this,"onMouseDown",e=>(g=h,this.handleDragStart(e))),p(this,"onMouseUp",e=>(g=h,this.handleDragStop(e))),p(this,"onTouchStart",e=>(g=f,this.handleDragStart(e))),p(this,"onTouchEnd",e=>(g=f,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;let e=this.findDOMNode();e&&(0,o.addEvent)(e,f.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let e=this.findDOMNode();if(e){let{ownerDocument:t}=e;(0,o.removeEvent)(t,h.move,this.handleDrag),(0,o.removeEvent)(t,f.move,this.handleDrag),(0,o.removeEvent)(t,h.stop,this.handleDragStop),(0,o.removeEvent)(t,f.stop,this.handleDragStop),(0,o.removeEvent)(e,f.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,o.scheduleRemoveUserSelectStyles)(t)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:a.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=m,p(m,"displayName","DraggableCore"),p(m,"propTypes",{allowAnyClick:i.default.bool,allowMobileScroll:i.default.bool,children:i.default.node.isRequired,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(m,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},61193:function(e,t,r){"use strict";let{default:n,DraggableCore:i}=r(75668);e.exports=n,e.exports.default=n,e.exports.DraggableCore=i},81825:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=d,t.addEvent=function(e,t,r,n){if(!e)return;let i={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,i):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&d(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){let r=l(e,t,"px");return{[(0,i.browserPrefixToKey)("transform",i.default)]:r}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,n.findInArray)(e.targetTouches,e=>t===e.identifier)||e.changedTouches&&(0,n.findInArray)(e.changedTouches,e=>t===e.identifier)},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingTop),t-=(0,n.int)(r.paddingBottom)},t.innerWidth=function(e){let t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingLeft),t-=(0,n.int)(r.paddingRight)},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,r){let n=e;do{if(s(n,t))return!0;if(n===r)break;n=n.parentNode}while(n);return!1},t.offsetXYFromParent=function(e,t,r){let n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-n.left)/r,y:(e.clientY+t.scrollTop-n.top)/r}},t.outerHeight=function(e){let t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderTopWidth),t+=(0,n.int)(r.borderBottomWidth)},t.outerWidth=function(e){let t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderLeftWidth),t+=(0,n.int)(r.borderRightWidth)},t.removeClassName=c,t.removeEvent=function(e,t,r,n){if(!e)return;let i={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},t.scheduleRemoveUserSelectStyles=function(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{u(e)}):u(e)};var n=r(9280),i=a(r(38650));function a(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(a=function(e,t){if(!t&&e&&e.__esModule)return e;var i,a,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((a=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(a.get||a.set)?i(o,t,a):o[t]=e[t]);return o})(e,t)}let o="";function s(e,t){return o||(o=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,n.isFunction)(e[t])})),!!(0,n.isFunction)(e[o])&&e[o](t)}function l(e,t,r){let{x:n,y:i}=e,a=`translate(${n}${r},${i}${r})`;if(t){let e=`${"string"==typeof t.x?t.x:t.x+r}`,n=`${"string"==typeof t.y?t.y:t.y+r}`;a=`translate(${e}, ${n})`+a}return a}function u(e){if(e)try{if(e.body&&c(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{let t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}}function d(e,t){e.classList?e.classList.add(t):e.className.match(RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}},38650:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?`-${t.toLowerCase()}-${e}`:e},t.default=void 0,t.getPrefix=n;let r=["Moz","Webkit","O","ms"];function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";let t=window.document?.documentElement?.style;if(!t||e in t)return"";for(let n=0;n<r.length;n++)if(i(e,r[n])in t)return r[n];return""}function i(e,t){return t?`${t}${function(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)}`:e}t.default=n()},55904:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},2849:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,r){let i=!(0,n.isNum)(e.lastX),o=a(e);return i?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}},t.createDraggableData=function(e,t){let r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,r){var o;if(!e.props.bounds)return[t,r];let{bounds:s}=e.props;s="string"==typeof s?s:{left:(o=s).left,top:o.top,right:o.right,bottom:o.bottom};let l=a(e);if("string"==typeof s){let e,{ownerDocument:t}=l,r=t.defaultView;if(!((e="parent"===s?l.parentNode:l.getRootNode().querySelector(s))instanceof r.HTMLElement))throw Error('Bounds selector "'+s+'" could not find an element.');let a=r.getComputedStyle(l),o=r.getComputedStyle(e);s={left:-l.offsetLeft+(0,n.int)(o.paddingLeft)+(0,n.int)(a.marginLeft),top:-l.offsetTop+(0,n.int)(o.paddingTop)+(0,n.int)(a.marginTop),right:(0,i.innerWidth)(e)-(0,i.outerWidth)(l)-l.offsetLeft+(0,n.int)(o.paddingRight)-(0,n.int)(a.marginRight),bottom:(0,i.innerHeight)(e)-(0,i.outerHeight)(l)-l.offsetTop+(0,n.int)(o.paddingBottom)-(0,n.int)(a.marginBottom)}}return(0,n.isNum)(s.right)&&(t=Math.min(t,s.right)),(0,n.isNum)(s.bottom)&&(r=Math.min(r,s.bottom)),(0,n.isNum)(s.left)&&(t=Math.max(t,s.left)),(0,n.isNum)(s.top)&&(r=Math.max(r,s.top)),[t,r]},t.getControlPosition=function(e,t,r){let n="number"==typeof t?(0,i.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;let o=a(r),s=r.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,i.offsetXYFromParent)(n||e,s,r.props.scale)},t.snapToGrid=function(e,t,r){return[Math.round(t/e[0])*e[0],Math.round(r/e[1])*e[1]]};var n=r(9280),i=r(81825);function a(e){let t=e.findDOMNode();if(!t)throw Error("<DraggableCore>: Unmounted during event!");return t}},9280:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,r){if(e[t])return Error(`Invalid prop ${t} passed to ${r} - do not set this, set it on the child.`)},t.findInArray=function(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},75966:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(r(2388)),i=r(63822),a=p(r(45697)),o=r(61193),s=r(1706),l=r(67493),u=r(7373),d=r(92886),c=p(r(57966));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends n.default.Component{constructor(){super(...arguments),f(this,"state",{resizing:null,dragging:null,className:""}),f(this,"elementRef",n.default.createRef()),f(this,"onDragStart",(e,t)=>{let{node:r}=t,{onDragStart:n,transformScale:i}=this.props;if(!n)return;let a={top:0,left:0},{offsetParent:o}=r;if(!o)return;let s=o.getBoundingClientRect(),l=r.getBoundingClientRect(),d=l.left/i,c=s.left/i,p=l.top/i,f=s.top/i;a.left=d-c+o.scrollLeft,a.top=p-f+o.scrollTop,this.setState({dragging:a});let{x:h,y:g}=(0,u.calcXY)(this.getPositionParams(),a.top,a.left,this.props.w,this.props.h);return n.call(this,this.props.i,h,g,{e,node:r,newPosition:a})}),f(this,"onDrag",(e,t,r)=>{let{node:n,deltaX:a,deltaY:o}=t,{onDrag:s}=this.props;if(!s)return;if(!this.state.dragging)throw Error("onDrag called before onDragStart.");let l=this.state.dragging.top+o,d=this.state.dragging.left+a,{isBounded:c,i:p,w:f,h,containerWidth:g}=this.props,m=this.getPositionParams();if(c){let{offsetParent:e}=n;if(e){let{margin:t,rowHeight:r}=this.props,n=e.clientHeight-(0,u.calcGridItemWHPx)(h,r,t[1]);l=(0,u.clamp)(l,0,n);let i=(0,u.calcGridColWidth)(m),a=g-(0,u.calcGridItemWHPx)(f,i,t[0]);d=(0,u.clamp)(d,0,a)}}let y={top:l,left:d};r?this.setState({dragging:y}):(0,i.flushSync)(()=>{this.setState({dragging:y})});let{x:b,y:v}=(0,u.calcXY)(m,l,d,f,h);return s.call(this,p,b,v,{e,node:n,newPosition:y})}),f(this,"onDragStop",(e,t)=>{let{node:r}=t,{onDragStop:n}=this.props;if(!n)return;if(!this.state.dragging)throw Error("onDragEnd called before onDragStart.");let{w:i,h:a,i:o}=this.props,{left:s,top:l}=this.state.dragging;this.setState({dragging:null});let{x:d,y:c}=(0,u.calcXY)(this.getPositionParams(),l,s,i,a);return n.call(this,o,d,c,{e,node:r,newPosition:{top:l,left:s}})}),f(this,"onResizeStop",(e,t,r)=>this.onResizeHandler(e,t,r,"onResizeStop")),f(this,"onResizeStart",(e,t,r)=>this.onResizeHandler(e,t,r,"onResizeStart")),f(this,"onResize",(e,t,r)=>this.onResizeHandler(e,t,r,"onResize"))}shouldComponentUpdate(e,t){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;let r=(0,u.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),n=(0,u.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,l.fastPositionEqual)(r,n)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){let{droppingPosition:t}=this.props;if(!t)return;let r=this.elementRef.current;if(!r)return;let n=e.droppingPosition||{left:0,top:0},{dragging:i}=this.state,a=i&&t.left!==n.left||t.top!==n.top;if(i){if(a){let e=t.left-i.left,n=t.top-i.top;this.onDrag(t.e,{node:r,deltaX:e,deltaY:n},!0)}}else this.onDragStart(t.e,{node:r,deltaX:t.left,deltaY:t.top})}getPositionParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){let t,{usePercentages:r,containerWidth:n,useCSSTransforms:i}=this.props;return i?t=(0,l.setTransform)(e):(t=(0,l.setTopLeft)(e),r&&(t.left=(0,l.perc)(e.left/n),t.width=(0,l.perc)(e.width/n))),t}mixinDraggable(e,t){return n.default.createElement(o.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,t){return(r,n)=>t(r,n,e)}mixinResizable(e,t,r){let{cols:i,minW:a,minH:o,maxW:l,maxH:d,transformScale:c,resizeHandles:p,resizeHandle:f}=this.props,h=this.getPositionParams(),g=(0,u.calcGridItemPosition)(h,0,0,i,0).width,m=(0,u.calcGridItemPosition)(h,0,0,a,o),y=(0,u.calcGridItemPosition)(h,0,0,l,d),b=[m.width,m.height],v=[Math.min(y.width,g),Math.min(y.height,1/0)];return n.default.createElement(s.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:b,maxConstraints:v,onResizeStop:this.curryResizeHandler(t,this.onResizeStop),onResizeStart:this.curryResizeHandler(t,this.onResizeStart),onResize:this.curryResizeHandler(t,this.onResize),transformScale:c,resizeHandles:p,handle:f},e)}onResizeHandler(e,t,r,n){let{node:a,size:o,handle:s}=t,d=this.props[n];if(!d)return;let{x:c,y:p,i:f,maxH:h,minH:g,containerWidth:m}=this.props,{minW:y,maxW:b}=this.props,v=o;a&&(v=(0,l.resizeItemInDirection)(s,r,o,m),(0,i.flushSync)(()=>{this.setState({resizing:"onResizeStop"===n?null:v})}));let{w:x,h:w}=(0,u.calcWH)(this.getPositionParams(),v.width,v.height,c,p,s);x=(0,u.clamp)(x,Math.max(y,1),b),w=(0,u.clamp)(w,g,h),d.call(this,f,x,w,{e,node:a,size:v,handle:s})}render(){let{x:e,y:t,w:r,h:i,isDraggable:a,isResizable:o,droppingPosition:s,useCSSTransforms:l}=this.props,d=(0,u.calcGridItemPosition)(this.getPositionParams(),e,t,r,i,this.state),p=n.default.Children.only(this.props.children),f=n.default.cloneElement(p,{ref:this.elementRef,className:(0,c.default)("react-grid-item",p.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":a,"react-draggable-dragging":!!this.state.dragging,dropping:!!s,cssTransforms:l}),style:{...this.props.style,...p.props.style,...this.createStyle(d)}});return f=this.mixinResizable(f,d,o),f=this.mixinDraggable(f,a)}}t.default=h,f(h,"propTypes",{children:a.default.element,cols:a.default.number.isRequired,containerWidth:a.default.number.isRequired,rowHeight:a.default.number.isRequired,margin:a.default.array.isRequired,maxRows:a.default.number.isRequired,containerPadding:a.default.array.isRequired,x:a.default.number.isRequired,y:a.default.number.isRequired,w:a.default.number.isRequired,h:a.default.number.isRequired,minW:function(e,t){let r=e[t];return"number"!=typeof r?Error("minWidth not Number"):r>e.w||r>e.maxW?Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){let r=e[t];return"number"!=typeof r?Error("maxWidth not Number"):r<e.w||r<e.minW?Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){let r=e[t];return"number"!=typeof r?Error("minHeight not Number"):r>e.h||r>e.maxH?Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){let r=e[t];return"number"!=typeof r?Error("maxHeight not Number"):r<e.h||r<e.minH?Error("maxHeight smaller than item height/minHeight"):void 0},i:a.default.string.isRequired,resizeHandles:d.resizeHandleAxesType,resizeHandle:d.resizeHandleType,onDragStop:a.default.func,onDragStart:a.default.func,onDrag:a.default.func,onResizeStop:a.default.func,onResizeStart:a.default.func,onResize:a.default.func,isDraggable:a.default.bool.isRequired,isResizable:a.default.bool.isRequired,isBounded:a.default.bool.isRequired,static:a.default.bool,useCSSTransforms:a.default.bool.isRequired,transformScale:a.default.number,className:a.default.string,handle:a.default.string,cancel:a.default.string,droppingPosition:a.default.shape({e:a.default.object.isRequired,left:a.default.number.isRequired,top:a.default.number.isRequired})}),f(h,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1})},49580:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r(2388)),i=r(58367),a=d(r(57966)),o=r(67493),s=r(7373),l=d(r(75966)),u=d(r(92886));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(c=function(e,t){if(!t&&e&&e.__esModule)return e;var i,a,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((a=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(a.get||a.set)?i(o,t,a):o[t]=e[t]);return o})(e,t)}function p(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let f="react-grid-layout",h=!1;try{h=/firefox/i.test(navigator.userAgent)}catch(e){}class g extends n.Component{constructor(){super(...arguments),p(this,"state",{activeDrag:null,layout:(0,o.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,o.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),p(this,"dragEnterCounter",0),p(this,"onDragStart",(e,t,r,n)=>{let{e:i,node:a}=n,{layout:s}=this.state,l=(0,o.getLayoutItem)(s,e);if(!l)return;let u={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,o.cloneLayoutItem)(l),oldLayout:s,activeDrag:u}),this.props.onDragStart(s,l,l,null,i,a)}),p(this,"onDrag",(e,t,r,n)=>{let{e:i,node:a}=n,{oldDragItem:s}=this.state,{layout:l}=this.state,{cols:u,allowOverlap:d,preventCollision:c}=this.props,p=(0,o.getLayoutItem)(l,e);if(!p)return;let f={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:e};l=(0,o.moveElement)(l,p,t,r,!0,c,(0,o.compactType)(this.props),u,d),this.props.onDrag(l,s,p,f,i,a),this.setState({layout:d?l:(0,o.compact)(l,(0,o.compactType)(this.props),u),activeDrag:f})}),p(this,"onDragStop",(e,t,r,n)=>{let{e:i,node:a}=n;if(!this.state.activeDrag)return;let{oldDragItem:s}=this.state,{layout:l}=this.state,{cols:u,preventCollision:d,allowOverlap:c}=this.props,p=(0,o.getLayoutItem)(l,e);if(!p)return;l=(0,o.moveElement)(l,p,t,r,!0,d,(0,o.compactType)(this.props),u,c);let f=c?l:(0,o.compact)(l,(0,o.compactType)(this.props),u);this.props.onDragStop(f,s,p,null,i,a);let{oldLayout:h}=this.state;this.setState({activeDrag:null,layout:f,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(f,h)}),p(this,"onResizeStart",(e,t,r,n)=>{let{e:i,node:a}=n,{layout:s}=this.state,l=(0,o.getLayoutItem)(s,e);l&&(this.setState({oldResizeItem:(0,o.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(s,l,l,null,i,a))}),p(this,"onResize",(e,t,r,n)=>{let i,a,s,{e:l,node:u,size:d,handle:c}=n,{oldResizeItem:p}=this.state,{layout:f}=this.state,{cols:h,preventCollision:g,allowOverlap:m}=this.props,y=!1,[b,v]=(0,o.withLayoutItem)(f,e,e=>(a=e.x,s=e.y,-1!==["sw","w","nw","n","ne"].indexOf(c)&&(-1!==["sw","nw","w"].indexOf(c)&&(a=e.x+(e.w-t),t=e.x!==a&&a<0?e.w:t,a=a<0?0:a),-1!==["ne","n","nw"].indexOf(c)&&(s=e.y+(e.h-r),r=e.y!==s&&s<0?e.h:r,s=s<0?0:s),y=!0),g&&!m&&(0,o.getAllCollisions)(f,{...e,w:t,h:r,x:a,y:s}).filter(t=>t.i!==e.i).length>0&&(s=e.y,r=e.h,a=e.x,t=e.w,y=!1),e.w=t,e.h=r,e));if(!v)return;i=b,y&&(i=(0,o.moveElement)(b,v,a,s,!0,this.props.preventCollision,(0,o.compactType)(this.props),h,m));let x={w:v.w,h:v.h,x:v.x,y:v.y,static:!0,i:e};this.props.onResize(i,p,v,x,l,u),this.setState({layout:m?i:(0,o.compact)(i,(0,o.compactType)(this.props),h),activeDrag:x})}),p(this,"onResizeStop",(e,t,r,n)=>{let{e:i,node:a}=n,{layout:s,oldResizeItem:l}=this.state,{cols:u,allowOverlap:d}=this.props,c=(0,o.getLayoutItem)(s,e),p=d?s:(0,o.compact)(s,(0,o.compactType)(this.props),u);this.props.onResizeStop(p,l,c,null,i,a);let{oldLayout:f}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,f)}),p(this,"onDragOver",e=>{if(e.preventDefault(),e.stopPropagation(),h&&!e.nativeEvent.target?.classList.contains(f))return!1;let{droppingItem:t,onDropDragOver:r,margin:i,cols:a,rowHeight:o,maxRows:l,width:u,containerPadding:d,transformScale:c}=this.props,p=r?.(e);if(!1===p)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;let g={...t,...p},{layout:m}=this.state,y=e.currentTarget.getBoundingClientRect(),b=e.clientX-y.left,v=e.clientY-y.top,x={left:b/c,top:v/c,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){let{left:e,top:t}=this.state.droppingPosition;(e!=b||t!=v)&&this.setState({droppingPosition:x})}}else{let e=(0,s.calcXY)({cols:a,margin:i,maxRows:l,rowHeight:o,containerWidth:u,containerPadding:d||i},v,b,g.w,g.h);this.setState({droppingDOMNode:n.createElement("div",{key:g.i}),droppingPosition:x,layout:[...m,{...g,x:e.x,y:e.y,static:!1,isDraggable:!0}]})}}),p(this,"removeDroppingPlaceholder",()=>{let{droppingItem:e,cols:t}=this.props,{layout:r}=this.state,n=(0,o.compact)(r.filter(t=>t.i!==e.i),(0,o.compactType)(this.props),t,this.props.allowOverlap);this.setState({layout:n,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),p(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,0===this.dragEnterCounter&&this.removeDroppingPlaceholder()}),p(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),p(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();let{droppingItem:t}=this.props,{layout:r}=this.state,n=r.find(e=>e.i===t.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,n,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,t){let r;return t.activeDrag?null:((0,i.deepEqual)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,o.childrenEqual)(e.children,t.children)||(r=t.layout):r=e.layout,r)?{layout:(0,o.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,o.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null}shouldComponentUpdate(e,t){return this.props.children!==e.children||!(0,o.fastRGLPropsEqual)(this.props,e,i.deepEqual)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}componentDidUpdate(e,t){if(!this.state.activeDrag){let e=this.state.layout,r=t.layout;this.onLayoutMaybeChanged(e,r)}}containerHeight(){if(!this.props.autoSize)return;let e=(0,o.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}onLayoutMaybeChanged(e,t){t||(t=this.state.layout),(0,i.deepEqual)(t,e)||this.props.onLayoutChange(e)}placeholder(){let{activeDrag:e}=this.state;if(!e)return null;let{width:t,cols:r,margin:i,containerPadding:a,rowHeight:o,maxRows:s,useCSSTransforms:u,transformScale:d}=this.props;return n.createElement(l.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:t,cols:r,margin:i,containerPadding:a||i,maxRows:s,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:u,transformScale:d},n.createElement("div",null))}processGridItem(e,t){if(!e||!e.key)return;let r=(0,o.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;let{width:i,cols:a,margin:s,containerPadding:u,rowHeight:d,maxRows:c,isDraggable:p,isResizable:f,isBounded:h,useCSSTransforms:g,transformScale:m,draggableCancel:y,draggableHandle:b,resizeHandles:v,resizeHandle:x}=this.props,{mounted:w,droppingPosition:j}=this.state,S="boolean"==typeof r.isDraggable?r.isDraggable:!r.static&&p,C="boolean"==typeof r.isResizable?r.isResizable:!r.static&&f,D=r.resizeHandles||v,O=S&&h&&!1!==r.isBounded;return n.createElement(l.default,{containerWidth:i,cols:a,margin:s,containerPadding:u||s,maxRows:c,rowHeight:d,cancel:y,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:S,isResizable:C,isBounded:O,useCSSTransforms:g&&w,usePercentages:!w,transformScale:m,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:t?j:void 0,resizeHandles:D,resizeHandle:x},e)}render(){let{className:e,style:t,isDroppable:r,innerRef:i}=this.props,s=(0,a.default)(f,e),l={height:this.containerHeight(),...t};return n.createElement("div",{ref:i,className:s,style:l,onDrop:r?this.onDrop:o.noop,onDragLeave:r?this.onDragLeave:o.noop,onDragEnter:r?this.onDragEnter:o.noop,onDragOver:r?this.onDragOver:o.noop},n.Children.map(this.props.children,e=>this.processGridItem(e)),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}t.default=g,p(g,"displayName","ReactGridLayout"),p(g,"propTypes",u.default),p(g,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:o.noop,onDragStart:o.noop,onDrag:o.noop,onDragStop:o.noop,onResizeStart:o.noop,onResize:o.noop,onResizeStop:o.noop,onDrop:o.noop,onDropDragOver:o.noop})},92886:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeHandleType=t.resizeHandleAxesType=t.default=void 0;var n=a(r(45697)),i=a(r(2388));function a(e){return e&&e.__esModule?e:{default:e}}let o=t.resizeHandleAxesType=n.default.arrayOf(n.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),s=t.resizeHandleType=n.default.oneOfType([n.default.node,n.default.func]);t.default={className:n.default.string,style:n.default.object,width:n.default.number,autoSize:n.default.bool,cols:n.default.number,draggableCancel:n.default.string,draggableHandle:n.default.string,verticalCompact:function(e){e.verticalCompact},compactType:n.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&r(67493).validateLayout(t,"layout")},margin:n.default.arrayOf(n.default.number),containerPadding:n.default.arrayOf(n.default.number),rowHeight:n.default.number,maxRows:n.default.number,isBounded:n.default.bool,isDraggable:n.default.bool,isResizable:n.default.bool,allowOverlap:n.default.bool,preventCollision:n.default.bool,useCSSTransforms:n.default.bool,transformScale:n.default.number,isDroppable:n.default.bool,resizeHandles:o,resizeHandle:s,onLayoutChange:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onDragStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,onResizeStop:n.default.func,onDrop:n.default.func,droppingItem:n.default.shape({i:n.default.string.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired}),children:function(e,t){let r=e[t],n={};i.default.Children.forEach(r,function(e){if(e?.key!=null){if(n[e.key])throw Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');n[e.key]=!0}})},innerRef:n.default.any}},65966:function(e,t,r){"use strict";t.default=void 0;var n=d(r(2388)),i=u(r(45697)),a=r(58367),o=r(67493),s=r(5651),l=u(r(49580));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(d=function(e,t){if(!t&&e&&e.__esModule)return e;var i,a,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((a=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(a.get||a.set)?i(o,t,a):o[t]=e[t]);return o})(e,t)}function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function p(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let f=e=>Object.prototype.toString.call(e);function h(e,t){return null==e?null:Array.isArray(e)?e:e[t]}class g extends n.Component{constructor(){super(...arguments),p(this,"state",this.generateInitialState()),p(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){let{width:e,breakpoints:t,layouts:r,cols:n}=this.props,i=(0,s.getBreakpointFromWidth)(t,e),a=(0,s.getColsFromBreakpoint)(i,n),o=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,s.findOrGenerateResponsiveLayout)(r,t,i,i,a,o),breakpoint:i,cols:a}}static getDerivedStateFromProps(e,t){if(!(0,a.deepEqual)(e.layouts,t.layouts)){let{breakpoint:r,cols:n}=t;return{layout:(0,s.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,n,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,a.deepEqual)(this.props.breakpoints,e.breakpoints)&&(0,a.deepEqual)(this.props.cols,e.cols)||this.onWidthChange(e)}onWidthChange(e){let{breakpoints:t,cols:r,layouts:n,compactType:i}=this.props,a=this.props.breakpoint||(0,s.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),l=this.state.breakpoint,u=(0,s.getColsFromBreakpoint)(a,r),d={...n};if(l!==a||e.breakpoints!==t||e.cols!==r){l in d||(d[l]=(0,o.cloneLayout)(this.state.layout));let e=(0,s.findOrGenerateResponsiveLayout)(d,t,a,l,u,i);e=(0,o.synchronizeLayoutWithChildren)(e,this.props.children,u,i,this.props.allowOverlap),d[a]=e,this.props.onBreakpointChange(a,u),this.props.onLayoutChange(e,d),this.setState({breakpoint:a,layout:e,cols:u})}let c=h(this.props.margin,a),p=h(this.props.containerPadding,a);this.props.onWidthChange(this.props.width,c,u,p)}render(){let{breakpoint:e,breakpoints:t,cols:r,layouts:i,margin:a,containerPadding:o,onBreakpointChange:s,onLayoutChange:u,onWidthChange:d,...p}=this.props;return n.createElement(l.default,c({},p,{margin:h(a,this.state.breakpoint),containerPadding:h(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}t.default=g,p(g,"propTypes",{breakpoint:i.default.string,breakpoints:i.default.object,allowOverlap:i.default.bool,cols:i.default.object,margin:i.default.oneOfType([i.default.array,i.default.object]),containerPadding:i.default.oneOfType([i.default.array,i.default.object]),layouts(e,t){if("[object Object]"!==f(e[t]))throw Error("Layout property must be an object. Received: "+f(e[t]));Object.keys(e[t]).forEach(t=>{if(!(t in e.breakpoints))throw Error("Each key in layouts must align with a key in breakpoints.");(0,o.validateLayout)(e.layouts[t],"layouts."+t)})},width:i.default.number.isRequired,onBreakpointChange:i.default.func,onLayoutChange:i.default.func,onWidthChange:i.default.func}),p(g,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:o.noop,onLayoutChange:o.noop,onWidthChange:o.noop})},7373:function(e,t){"use strict";function r(e){let{margin:t,containerPadding:r,containerWidth:n,cols:i}=e;return(n-t[0]*(i-1)-2*r[0])/i}function n(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function i(e,t,r){return Math.max(Math.min(e,r),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcGridColWidth=r,t.calcGridItemPosition=function(e,t,i,a,o,s){let{margin:l,containerPadding:u,rowHeight:d}=e,c=r(e),p={};return s&&s.resizing?(p.width=Math.round(s.resizing.width),p.height=Math.round(s.resizing.height)):(p.width=n(a,c,l[0]),p.height=n(o,d,l[1])),s&&s.dragging?(p.top=Math.round(s.dragging.top),p.left=Math.round(s.dragging.left)):s&&s.resizing&&"number"==typeof s.resizing.top&&"number"==typeof s.resizing.left?(p.top=Math.round(s.resizing.top),p.left=Math.round(s.resizing.left)):(p.top=Math.round((d+l[1])*i+u[1]),p.left=Math.round((c+l[0])*t+u[0])),p},t.calcGridItemWHPx=n,t.calcWH=function(e,t,n,a,o,s){let{margin:l,maxRows:u,cols:d,rowHeight:c}=e,p=r(e),f=Math.round((t+l[0])/(p+l[0])),h=Math.round((n+l[1])/(c+l[1])),g=i(f,0,d-a),m=i(h,0,u-o);return -1!==["sw","w","nw"].indexOf(s)&&(g=i(f,0,d)),-1!==["nw","n","ne"].indexOf(s)&&(m=i(h,0,u)),{w:g,h:m}},t.calcXY=function(e,t,n,a,o){let{margin:s,containerPadding:l,cols:u,rowHeight:d,maxRows:c}=e,p=r(e),f=Math.round((n-l[0])/(p+s[0])),h=Math.round((t-l[1])/(d+s[1]));return{x:f=i(f,0,u-a),y:h=i(h,0,c-o)}},t.clamp=i},27135:function(e,t,r){"use strict";t.default=function(e){var t;return t=class extends n.Component{constructor(){super(...arguments),d(this,"state",{width:1280}),d(this,"elementRef",n.createRef()),d(this,"mounted",!1),d(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new a.default(e=>{if(this.elementRef.current instanceof HTMLElement){let t=e[0].contentRect.width;this.setState({width:t})}});let e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.observe(e)}componentWillUnmount(){this.mounted=!1;let e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.unobserve(e),this.resizeObserver.disconnect()}render(){let{measureBeforeMount:t,...r}=this.props;return t&&!this.mounted?n.createElement("div",{className:(0,o.default)(this.props.className,"react-grid-layout"),style:this.props.style,ref:this.elementRef}):n.createElement(e,u({innerRef:this.elementRef},r,this.state))}},d(t,"defaultProps",{measureBeforeMount:!1}),d(t,"propTypes",{measureBeforeMount:i.default.bool}),t};var n=l(r(2388)),i=s(r(45697)),a=s(r(91033)),o=s(r(57966));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(l=function(e,t){if(!t&&e&&e.__esModule)return e;var i,a,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((a=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(a.get||a.set)?i(o,t,a):o[t]=e[t]);return o})(e,t)}function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function d(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},31362:function(e){e.exports=function(e,t,r){return e===t||e.className===t.className&&r(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&r(e.verticalCompact,t.verticalCompact)&&r(e.compactType,t.compactType)&&r(e.layout,t.layout)&&r(e.margin,t.margin)&&r(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&r(e.resizeHandles,t.resizeHandles)&&r(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&r(e.droppingItem,t.droppingItem)&&r(e.innerRef,t.innerRef)}},5651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOrGenerateResponsiveLayout=function(e,t,r,a,o,s){if(e[r])return(0,n.cloneLayout)(e[r]);let l=e[a],u=i(t),d=u.slice(u.indexOf(r));for(let t=0,r=d.length;t<r;t++){let r=d[t];if(e[r]){l=e[r];break}}return l=(0,n.cloneLayout)(l||[]),(0,n.compact)((0,n.correctBounds)(l,{cols:o}),s,o)},t.getBreakpointFromWidth=function(e,t){let r=i(e),n=r[0];for(let i=1,a=r.length;i<a;i++){let a=r[i];t>e[a]&&(n=a)}return n},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.sortBreakpoints=i;var n=r(67493);function i(e){return Object.keys(e).sort(function(t,r){return e[t]-e[r]})}},67493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=o,t.childrenEqual=function(e,t){return(0,i.deepEqual)(a.default.Children.map(e,e=>e?.key),a.default.Children.map(t,e=>e?.key))&&(0,i.deepEqual)(a.default.Children.map(e,e=>e?.props["data-grid"]),a.default.Children.map(t,e=>e?.props["data-grid"]))},t.cloneLayout=s,t.cloneLayoutItem=u,t.collides=d,t.compact=c,t.compactItem=h,t.compactType=function(e){let{verticalCompact:t,compactType:r}=e||{};return!1===t?null:r},t.correctBounds=g,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=b,t.getFirstCollision=y,t.getLayoutItem=m,t.getStatics=v,t.modifyLayout=l,t.moveElement=x,t.moveElementAwayFromCollision=w,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.resizeItemInDirection=function(e,t,r,n){let i=M[e];return i?i(t,{...t,...r},n):r},t.setTopLeft=function(e){let{top:t,left:r,width:n,height:i}=e;return{top:`${t}px`,left:`${r}px`,width:`${n}px`,height:`${i}px`,position:"absolute"}},t.setTransform=function(e){let{top:t,left:r,width:n,height:i}=e,a=`translate(${r}px,${t}px)`;return{transform:a,WebkitTransform:a,MozTransform:a,msTransform:a,OTransform:a,width:`${n}px`,height:`${i}px`,position:"absolute"}},t.sortLayoutItems=R,t.sortLayoutItemsByColRow=A,t.sortLayoutItemsByRowCol=Z,t.synchronizeLayoutWithChildren=function(e,t,r,n,i){e=e||[];let s=[];a.default.Children.forEach(t,t=>{if(t?.key==null)return;let r=m(e,String(t.key)),n=t.props["data-grid"];r&&null==n?s.push(u(r)):n?s.push(u({...n,i:t.key})):s.push(u({w:1,h:1,x:0,y:o(s),i:String(t.key)}))});let l=g(s,{cols:r});return i?l:c(l,n,r)},t.validateLayout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",r=["x","y","w","h"];if(!Array.isArray(e))throw Error(t+" must be an array!");for(let n=0,i=e.length;n<i;n++){let i=e[n];for(let e=0;e<r.length;e++){let a=r[e],o=i[a];if("number"!=typeof o||Number.isNaN(o))throw Error(`ReactGridLayout: ${t}[${n}].${a} must be a number! Received: ${o} (${typeof o})`)}if(void 0!==i.i&&"string"!=typeof i.i)throw Error(`ReactGridLayout: ${t}[${n}].i must be a string! Received: ${i.i} (${typeof i.i})`)}},t.withLayoutItem=function(e,t,r){let n=m(e,t);return n?[e=l(e,n=r(u(n))),n]:[e,null]};var n,i=r(58367),a=(n=r(2388))&&n.__esModule?n:{default:n};function o(e){let t=0,r;for(let n=0,i=e.length;n<i;n++)(r=e[n].y+e[n].h)>t&&(t=r);return t}function s(e){let t=Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=u(e[r]);return t}function l(e,t){let r=Array(e.length);for(let n=0,i=e.length;n<i;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function u(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function d(e,t){return e.i!==t.i&&!(e.x+e.w<=t.x)&&!(e.x>=t.x+t.w)&&!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h)}function c(e,t,r,n){let i=v(e),a=R(e,t),o=Array(e.length);for(let s=0,l=a.length;s<l;s++){let l=u(a[s]);l.static||(l=h(i,l,t,r,a,n),i.push(l)),o[e.indexOf(a[s])]=l,l.moved=!1}return o}t.fastRGLPropsEqual=r(31362);let p={x:"w",y:"h"};function f(e,t,r,n){let i=p[n];t[n]+=1;let a=e.map(e=>e.i).indexOf(t.i);for(let o=a+1;o<e.length;o++){let a=e[o];if(!a.static){if(a.y>t.y+t.h)break;d(t,a)&&f(e,a,r+t[i],n)}}t[n]=r}function h(e,t,r,n,i,a){let s,l="horizontal"===r;if("vertical"===r)for(t.y=Math.min(o(e),t.y);t.y>0&&!y(e,t);)t.y--;else if(l)for(;t.x>0&&!y(e,t);)t.x--;for(;(s=y(e,t))&&!(null===r&&a);)if(l?f(i,t,s.x+s.w,"x"):f(i,t,s.y+s.h,"y"),l&&t.x+t.w>n)for(t.x=n-t.w,t.y++;t.x>0&&!y(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function g(e,t){let r=v(e);for(let n=0,i=e.length;n<i;n++){let i=e[n];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),i.static)for(;y(r,i);)i.y++;else r.push(i)}return e}function m(e,t){for(let r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function y(e,t){for(let r=0,n=e.length;r<n;r++)if(d(e[r],t))return e[r]}function b(e,t){return e.filter(e=>d(e,t))}function v(e){return e.filter(e=>e.static)}function x(e,t,r,n,i,a,o,l,u){if(t.static&&!0!==t.isDraggable||t.y===n&&t.x===r)return e;t.i,String(r),String(n),t.x,t.y;let d=t.x,c=t.y;"number"==typeof r&&(t.x=r),"number"==typeof n&&(t.y=n),t.moved=!0;let p=R(e,o);("vertical"===o&&"number"==typeof n?c>=n:"horizontal"===o&&"number"==typeof r&&d>=r)&&(p=p.reverse());let f=b(p,t),h=f.length>0;if(h&&u)return s(e);if(h&&a)return V(`Collision prevented on ${t.i}, reverting.`),t.x=d,t.y=c,t.moved=!1,e;for(let r=0,n=f.length;r<n;r++){let n=f[r];t.i,t.x,t.y,n.i,n.x,n.y,n.moved||(e=n.static?w(e,n,t,i,o,l):w(e,t,n,i,o,l))}return e}function w(e,t,r,n,i,a){let o="horizontal"===i,s="vertical"===i,l=t.static;if(n){n=!1;let u={x:o?Math.max(t.x-r.w,0):r.x,y:s?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},d=y(e,u),c=d&&d.y+d.h>t.y,p=d&&t.x+t.w>d.x;if(!d)return V(`Doing reverse collision on ${r.i} up to [${u.x},${u.y}].`),x(e,r,o?u.x:void 0,s?u.y:void 0,n,l,i,a);if(c&&s)return x(e,r,void 0,t.y+1,n,l,i,a);if(c&&null==i)return t.y=r.y,r.y=r.y+r.h,e;else if(p&&o)return x(e,t,r.x,void 0,n,l,i,a)}let u=o?r.x+1:void 0,d=s?r.y+1:void 0;return null==u&&null==d?e:x(e,r,o?r.x+1:void 0,s?r.y+1:void 0,n,l,i,a)}let j=(e,t,r,n)=>e+r>n?t:r,S=(e,t,r)=>e<0?t:r,C=e=>Math.max(0,e),D=e=>Math.max(0,e),O=(e,t,r)=>{let{left:n,height:i,width:a}=t,o=e.top-(i-e.height);return{left:n,width:a,height:S(o,e.height,i),top:D(o)}},P=(e,t,r)=>{let{top:n,left:i,height:a,width:o}=t;return{top:n,height:a,width:j(e.left,e.width,o,r),left:C(i)}},k=(e,t,r)=>{let{top:n,height:i,width:a}=t,o=e.left-(a-e.width);return{height:i,width:o<0?e.width:j(e.left,e.width,a,r),top:D(n),left:C(o)}},E=(e,t,r)=>{let{top:n,left:i,height:a,width:o}=t;return{width:o,left:i,height:S(n,e.height,a),top:D(n)}},M={n:O,ne:function(){return O(arguments.length<=0?void 0:arguments[0],P(...arguments),arguments.length<=2?void 0:arguments[2])},e:P,se:function(){return E(arguments.length<=0?void 0:arguments[0],P(...arguments),arguments.length<=2?void 0:arguments[2])},s:E,sw:function(){return E(arguments.length<=0?void 0:arguments[0],k(...arguments),arguments.length<=2?void 0:arguments[2])},w:k,nw:function(){return O(arguments.length<=0?void 0:arguments[0],k(...arguments),arguments.length<=2?void 0:arguments[2])}};function R(e,t){return"horizontal"===t?A(e):"vertical"===t?Z(e):e}function Z(e){return e.slice(0).sort(function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1})}function A(e){return e.slice(0).sort(function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1})}function V(){}t.noop=()=>{}},69968:function(e,t,r){e.exports=r(49580).default,e.exports.utils=r(67493),e.exports.calculateUtils=r(7373),e.exports.Responsive=r(65966).default,e.exports.Responsive.utils=r(5651),e.exports.WidthProvider=r(27135).default},22827:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(2388)),i=r(61193),a=r(59069),o=r(448),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,p(t,e);var r=t.prototype;return r.componentWillUnmount=function(){this.resetData()},r.resetData=function(){this.lastHandleRect=this.slack=null},r.runConstraints=function(e,t){var r=this.props,n=r.minConstraints,i=r.maxConstraints,a=r.lockAspectRatio;if(!n&&!i&&!a)return[e,t];if(a){var o=this.props.width/this.props.height;Math.abs(e-this.props.width)>Math.abs((t-this.props.height)*o)?t=e/o:e=t*o}var s=e,l=t,u=this.slack||[0,0],d=u[0],c=u[1];return e+=d,t+=c,n&&(e=Math.max(n[0],e),t=Math.max(n[1],t)),i&&(e=Math.min(i[0],e),t=Math.min(i[1],t)),this.slack=[d+(s-e),c+(l-t)],[e,t]},r.resizeHandler=function(e,t){var r=this;return function(n,i){var a=i.node,o=i.deltaX,s=i.deltaY;"onResizeStart"===e&&r.resetData();var l=("both"===r.props.axis||"x"===r.props.axis)&&"n"!==t&&"s"!==t,u=("both"===r.props.axis||"y"===r.props.axis)&&"e"!==t&&"w"!==t;if(l||u){var d=t[0],c=t[t.length-1],p=a.getBoundingClientRect();null!=r.lastHandleRect&&("w"===c&&(o+=p.left-r.lastHandleRect.left),"n"===d&&(s+=p.top-r.lastHandleRect.top)),r.lastHandleRect=p,"w"===c&&(o=-o),"n"===d&&(s=-s);var f=r.props.width+(l?o/r.props.transformScale:0),h=r.props.height+(u?s/r.props.transformScale:0),g=r.runConstraints(f,h);f=g[0],h=g[1];var m=f!==r.props.width||h!==r.props.height,y="function"==typeof r.props[e]?r.props[e]:null;y&&!("onResize"===e&&!m)&&(null==n.persist||n.persist(),y(n,{node:a,size:{width:f,height:h},handle:t})),"onResizeStop"===e&&r.resetData()}}},r.renderResizeHandle=function(e,t){var r=this.props.handle;if(!r)return n.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof r)return r(e,t);var i=c({ref:t},"string"==typeof r.type?{}:{handleAxis:e});return n.cloneElement(r,i)},r.render=function(){var e=this,t=this.props,r=t.children,o=t.className,l=t.draggableOpts,d=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,s));return(0,a.cloneElement)(r,c(c({},p),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(r.props.children,d.map(function(t){var r,a=null!=(r=e.handleRefs[t])?r:e.handleRefs[t]=n.createRef();return n.createElement(i.DraggableCore,u({},l,{nodeRef:a,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,a))}))}))},t}(n.Component);t.default=f,f.propTypes=o.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},8735:function(e,t,r){"use strict";t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(2388)),i=l(r(45697)),a=l(r(22827)),o=r(448),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,r){var n=r.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(n,function(){return t.props.onResize&&t.props.onResize(e,r)})):t.setState(n)},t}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e),t.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},t.prototype.render=function(){var e=this.props,t=e.handle,r=e.handleSize,i=(e.onResize,e.onResizeStart),o=e.onResizeStop,l=e.draggableOpts,u=e.minConstraints,c=e.maxConstraints,f=e.lockAspectRatio,h=e.axis,g=(e.width,e.height,e.resizeHandles),m=e.style,y=e.transformScale,b=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,s);return n.createElement(a.default,{axis:h,draggableOpts:l,handle:t,handleSize:r,height:this.state.height,lockAspectRatio:f,maxConstraints:c,minConstraints:u,onResizeStart:i,onResize:this.onResize,onResizeStop:o,resizeHandles:g,transformScale:y,width:this.state.width},n.createElement("div",d({},b,{style:p(p({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(n.Component);t.default=h,h.propTypes=p(p({},o.resizableProps),{},{children:i.default.element})},448:function(e,t,r){"use strict";t.__esModule=!0,t.resizableProps=void 0;var n,i=(n=r(45697))&&n.__esModule?n:{default:n};r(61193),t.resizableProps={axis:i.default.oneOf(["both","x","y","none"]),className:i.default.string,children:i.default.element.isRequired,draggableOpts:i.default.shape({allowAnyClick:i.default.bool,cancel:i.default.string,children:i.default.node,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:i.default.node,grid:i.default.arrayOf(i.default.number),handle:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number}),height:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];return"both"===a.axis||"y"===a.axis?(e=i.default.number).isRequired.apply(e,r):i.default.number.apply(i.default,r)},handle:i.default.oneOfType([i.default.node,i.default.func]),handleSize:i.default.arrayOf(i.default.number),lockAspectRatio:i.default.bool,maxConstraints:i.default.arrayOf(i.default.number),minConstraints:i.default.arrayOf(i.default.number),onResizeStop:i.default.func,onResizeStart:i.default.func,onResize:i.default.func,resizeHandles:i.default.arrayOf(i.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:i.default.number,width:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];return"both"===a.axis||"x"===a.axis?(e=i.default.number).isRequired.apply(e,r):i.default.number.apply(i.default,r)}}},59069:function(e,t,r){"use strict";t.__esModule=!0,t.cloneElement=function(e,t){return t.style&&e.props.style&&(t.style=o(o({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),i.default.cloneElement(e,t)};var n,i=(n=r(2388))&&n.__esModule?n:{default:n};function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}},1706:function(e,t,r){"use strict";e.exports=function(){throw Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=r(22827).default,e.exports.ResizableBox=r(8735).default},91033:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>j});var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var i=n[r];e.call(t,i[1],i[0])}},t}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==r.g&&r.g.Math===Math?r.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,i=0;function a(){r&&(r=!1,e()),n&&l()}function s(){o(a)}function l(){var e=Date.now();if(r){if(e-i<2)return;n=!0}else r=!0,n=!1,setTimeout(s,20);i=e}return l}(this.refresh.bind(this),0)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;s.some(function(e){return!!~r.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),d=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},c=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},p=m(0,0,0,0);function f(e){return parseFloat(e)||0}function h(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){return t+f(e["border-"+r+"-width"])},0)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof c(e).SVGGraphicsElement}:function(e){return e instanceof c(e).SVGElement&&"function"==typeof e.getBBox};function m(e,t,r,n){return{x:e,y:t,width:r,height:n}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=function(e){if(!i)return p;if(g(e)){var t;return m(0,0,(t=e.getBBox()).width,t.height)}return function(e){var t,r=e.clientWidth,n=e.clientHeight;if(!r&&!n)return p;var i=c(e).getComputedStyle(e),a=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var i=n[r],a=e["padding-"+i];t[i]=f(a)}return t}(i),o=a.left+a.right,s=a.top+a.bottom,l=f(i.width),u=f(i.height);if("border-box"===i.boxSizing&&(Math.round(l+o)!==r&&(l-=h(i,"left","right")+o),Math.round(u+s)!==n&&(u-=h(i,"top","bottom")+s)),(t=e)!==c(t).document.documentElement){var d=Math.round(l+o)-r,g=Math.round(u+s)-n;1!==Math.abs(d)&&(l-=d),1!==Math.abs(g)&&(u-=g)}return m(a.left,a.top,l,u)}(e)}(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var r,n,i,a,o,s=(r=t.x,n=t.y,i=t.width,a=t.height,d(o=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:r,y:n,width:i,height:a,top:n,right:r+i,bottom:a+n,left:r}),o);d(this,{target:e,contentRect:s})},v=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof c(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof c(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new b(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),x="undefined"!=typeof WeakMap?new WeakMap:new n,w=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var r=new v(t,u.getInstance(),this);x.set(this,r)};["observe","unobserve","disconnect"].forEach(function(e){w.prototype[e]=function(){var t;return(t=x.get(this))[e].apply(t,arguments)}});let j=void 0!==a.ResizeObserver?a.ResizeObserver:w},83:function(e,t,r){"use strict";var n=r(2388),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,o=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,d=n[1];return s(function(){i.value=r,i.getSnapshot=t,u(i)&&d({inst:i})},[e,r,t]),o(function(){return u(i)&&d({inst:i}),e(function(){u(i)&&d({inst:i})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},26251:function(e,t,r){"use strict";var n=r(2388),i=r(61688),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var c=s(null);if(null===c.current){var p={hasValue:!1,value:null};c.current=p}else p=c.current;var f=o(e,(c=u(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==i&&p.hasValue){var t=p.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(o=e,t):(o=e,s=r)}var o,s,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]))[0],c[1]);return l(function(){p.hasValue=!0,p.value=f},[f]),d(f),f}},61688:function(e,t,r){"use strict";e.exports=r(83)},52798:function(e,t,r){"use strict";e.exports=r(26251)}}]);